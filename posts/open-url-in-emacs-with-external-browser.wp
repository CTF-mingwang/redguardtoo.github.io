<html><body><p>Here is some handy elisp function which use browse-url-generic to open the url in external browser (firefox, for example). </p> <p> The key point is how to detect the url. If we are in w3m-mode, we will use the link under cursor or the URI of current web page. Or else, we will let browse-url-generic to detect the url. </p>    <pre class="src src-elisp">(<span style="color: #b5bd68;">defun</span> <span style="color: #81a2be;">w3mext-open-link-or-image-or-url</span> ()
  <span style="color: #b294bb;">"Opens the current link or image or current page's uri or any url-like text under cursor in firefox."</span>
  (interactive)
  (<span style="color: #b5bd68;">let</span> (url)
    (<span style="color: #b5bd68;">if</span> (string= major-mode <span style="color: #8abeb7;">"w3m-mode"</span>)
        (setq url (or (w3m-anchor) (w3m-image) w3m-current-url)))
    (browse-url-generic (<span style="color: #b5bd68;">if</span> url url (car (browse-url-interactive-arg <span style="color: #8abeb7;">"URL: "</span>))))
    ))
(global-set-key (kbd <span style="color: #8abeb7;">"C-c b"</span>) 'w3mext-open-link-or-image-or-url)

</pre>   <p> To specify the external browser like firefox, add below code into ~/.emacs: </p>   <pre class="src src-elisp"><span style="color: #969896; font-style: italic;">;; </span><span style="color: #969896; font-style: italic;">`C-h v browse-url-generic-program RET` to see the documentation</span>

<span style="color: #969896; font-style: italic;">;; </span><span style="color: #969896; font-style: italic;">*is-a-mac* and *linux* is the boolean constants defined by me</span>

(setq browse-url-generic-program
      (<span style="color: #b5bd68;">cond</span>
       (*is-a-mac* <span style="color: #8abeb7;">"open"</span>)
       (*linux* (executable-find <span style="color: #8abeb7;">"firefox"</span>))
       ))
</pre>  </body></html>