<html><body><div id="outline-container-1" class="outline-3"> <h3 id="sec-1">Key points</h3> <div class="outline-text-3" id="text-1">  <ul> <li>see <a href="http://www.centos.org/docs/5/html/Deployment_Guide-en-US/s1-nfs-server-config-exports.html">Redhat documenation</a>, best doc on exportfs </li> <li><a href="http://superuser.com/questions/492989/understanding-subnet-mask">Understanding Subnet mask</a> and <a href="http://superuser.com/questions/186850/what-are-the-essentials-of-a-subnet-mask">essential Subnet mask</a> </li> <li>`sudo exportfs -r` to reload /etc/exports </li> <li>`sudo exportfs -v` to see current nfs exports </li> <li>content of /etc/exports: </li> </ul>     


<pre class="prettyprint ">

/srv/nfs4/z 192.168.0.0/16(ro,insecure,no_subtree_check)
</pre>



  <ul> <li>check <a href="http://alephnull.com/benchmarks/sata2012/nfsv4.html">optimizatioin tips</a> </li> <li>`man 5 exports` for the documentation of /etc/exports </li> <li><a href="https://www.serverstack.com/blog/2012/11/21/debugging-nfs-file-access-on-server-and-client-side/">Debugging NFS File Access on Server and Client Side</a> </li> </ul>     


<pre class="prettyprint ">

# turn on the log

sudo rpcdebug -m nfsd -s proc

# turn off the log
</pre>



  <ul> <li>then `sudo tail -f /var/log/messages.log` </li> <li>Basically you need `sudo systemctl enable syslog-ng.service` to enable system log before you use rpcdebug </li> </ul>  </div>  </div>  <div id="outline-container-2" class="outline-3"> <h3 id="sec-2">Summary</h3> <div class="outline-text-3" id="text-2">  <p>On server side: </p>   


<pre class="prettyprint ">

sudo exportfs

# got output like:

# /srv/nfs4/z   192.168.0.0/16
</pre>



   <p> Then on client side: </p>   


<pre class="prettyprint ">

# 131072 is 128K

sudo mount 192.168.1.9:/srv/nfs4/z ~/z -o rsize=131072,wsize=131072,noatime,nodiratime,intr
</pre>



  </div> </div> </body></html>