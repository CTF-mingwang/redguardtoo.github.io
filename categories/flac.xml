<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="../assets/xml/rss.xsl" media="all"?><rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/"><channel><title>Chen's blog (flac)</title><link>http://blog.binchen.org/</link><description></description><atom:link href="http://blog.binchen.org/categories/flac.xml" type="application/rss+xml" rel="self"></atom:link><language>en</language><lastBuildDate>Fri, 12 Aug 2016 07:03:50 GMT</lastBuildDate><generator>https://getnikola.com/</generator><docs>http://blogs.law.harvard.edu/tech/rss</docs><item><title>How to split album into different flac and tag them under Gentoo Linux</title><link>http://blog.binchen.org/posts/how-to-split-album-into-different-flac-and-tag-them-under-gentoo-linux.html</link><dc:creator>Chen Bin</dc:creator><description>&lt;div&gt;&lt;p&gt;&lt;/p&gt;&lt;div id="outline-container-1" class="outline-3"&gt; &lt;h4 id="sec-1"&gt;Install necessary CLI tools&lt;/h4&gt; &lt;div class="outline-text-3" id="text-1"&gt;     &lt;pre class="src src-sh"&gt;sudo emerge media-sound/shntool
sudo emerge cuetools
&lt;p&gt;&lt;/p&gt;&lt;/pre&gt;  &lt;/div&gt;  &lt;/div&gt;  &lt;div id="outline-container-2" class="outline-3"&gt; &lt;h4 id="sec-2"&gt;Download the script&lt;/h4&gt; &lt;div class="outline-text-3" id="text-2"&gt;  &lt;p&gt;See &lt;a href="https://bbs.archlinux.org/viewtopic.php?id=58766"&gt;https://bbs.archlinux.org/viewtopic.php?id=58766&lt;/a&gt; for the source of bash script. &lt;/p&gt; &lt;p&gt; Here is the full content of the bash script: &lt;/p&gt;   &lt;pre class="src src-sh"&gt;&lt;span style="color: #969896; font-style: italic;"&gt;#&lt;/span&gt;&lt;span style="color: #969896; font-style: italic;"&gt;!/bin/&lt;/span&gt;&lt;span style="color: #b9ca4a;"&gt;bash&lt;/span&gt;
&lt;p&gt;&lt;span style="color: #969896; font-style: italic;"&gt;# &lt;/span&gt;&lt;span style="color: #969896; font-style: italic;"&gt;split image file (flac, ape, wav, etc.) according to cue-file&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span style="color: #b9ca4a;"&gt;if&lt;/span&gt; [ -f &lt;span style="color: #70c0b1;"&gt;"$1"&lt;/span&gt; ]; &lt;span style="color: #b9ca4a;"&gt;then&lt;/span&gt;
    &lt;span style="color: #e7c547;"&gt;i&lt;/span&gt;=0
    &lt;span style="color: #b9ca4a;"&gt;for&lt;/span&gt; cuefile&lt;span style="color: #b9ca4a;"&gt; in&lt;/span&gt; &lt;em&gt;.cue; &lt;span style="color: #b9ca4a;"&gt;do&lt;/span&gt;
        &lt;span style="color: #e7c547;"&gt;i&lt;/span&gt;=$(($&lt;span style="color: #e7c547;"&gt;i&lt;/span&gt; + 1))
    &lt;span style="color: #b9ca4a;"&gt;done&lt;/span&gt;
    &lt;span style="color: #b9ca4a;"&gt;if&lt;/span&gt; [ $&lt;span style="color: #e7c547;"&gt;i&lt;/span&gt; -eq 1 ]; &lt;span style="color: #b9ca4a;"&gt;then&lt;/span&gt;
        &lt;span style="color: #969896; font-style: italic;"&gt;# &lt;/span&gt;&lt;span style="color: #969896; font-style: italic;"&gt;precies 1 cuesheet gevonden&lt;/span&gt;
        &lt;span style="color: #b9ca4a;"&gt;if&lt;/span&gt; grep -q &lt;span style="color: #70c0b1;"&gt;"INDEX 01 00:00:00"&lt;/span&gt; &lt;/em&gt;.cue ; &lt;span style="color: #b9ca4a;"&gt;then&lt;/span&gt;
            nice shntool split -t &lt;span style="color: #70c0b1;"&gt;"%n %t"&lt;/span&gt; -f &lt;em&gt;.cue &lt;span style="color: #70c0b1;"&gt;"$1"&lt;/span&gt;
        &lt;span style="color: #b9ca4a;"&gt;else&lt;/span&gt;
            &lt;span style="color: #c397d8;"&gt;echo&lt;/span&gt; &lt;span style="color: #70c0b1;"&gt;"The first track has a pre-gap. Shntool will cut that off and put it in a seperate file."&lt;/span&gt;
            &lt;span style="color: #c397d8;"&gt;echo&lt;/span&gt; &lt;span style="color: #70c0b1;"&gt;"You don't want that. Please modify the cuesheet from:"&lt;/span&gt;
            grep -m1 &lt;span style="color: #70c0b1;"&gt;"INDEX 00"&lt;/span&gt; &lt;/em&gt;.cue
            grep -m1 &lt;span style="color: #70c0b1;"&gt;"INDEX 01"&lt;/span&gt; *.cue
            &lt;span style="color: #c397d8;"&gt;echo&lt;/span&gt; &lt;span style="color: #70c0b1;"&gt;"to:"&lt;/span&gt;
            &lt;span style="color: #c397d8;"&gt;echo&lt;/span&gt; &lt;span style="color: #70c0b1;"&gt;"    INDEX 01 00:00:00"&lt;/span&gt;
            &lt;span style="color: #b9ca4a;"&gt;exit&lt;/span&gt; 1
        &lt;span style="color: #b9ca4a;"&gt;fi&lt;/span&gt;
    &lt;span style="color: #b9ca4a;"&gt;elif&lt;/span&gt; [ $&lt;span style="color: #e7c547;"&gt;i&lt;/span&gt; -eq 0 ]; &lt;span style="color: #b9ca4a;"&gt;then&lt;/span&gt;
        &lt;span style="color: #c397d8;"&gt;echo&lt;/span&gt; &lt;span style="color: #70c0b1;"&gt;"No cuesheet found in the current directory."&lt;/span&gt;
        &lt;span style="color: #b9ca4a;"&gt;exit&lt;/span&gt; 1
    &lt;span style="color: #b9ca4a;"&gt;elif&lt;/span&gt; [ $&lt;span style="color: #e7c547;"&gt;i&lt;/span&gt; -gt 1 ]; &lt;span style="color: #b9ca4a;"&gt;then&lt;/span&gt;
        &lt;span style="color: #c397d8;"&gt;echo&lt;/span&gt; &lt;span style="color: #70c0b1;"&gt;"$i cuesheets found in the current directory. Please remove the superfluous cuesheets."&lt;/span&gt;
        &lt;span style="color: #b9ca4a;"&gt;exit&lt;/span&gt; 1
    &lt;span style="color: #b9ca4a;"&gt;fi&lt;/span&gt;
&lt;span style="color: #b9ca4a;"&gt;else&lt;/span&gt;
    &lt;span style="color: #c397d8;"&gt;echo&lt;/span&gt; &lt;span style="color: #70c0b1;"&gt;"Split image file (flac, ape, wav, etc.) according to cue-file."&lt;/span&gt;
    &lt;span style="color: #c397d8;"&gt;echo&lt;/span&gt; &lt;span style="color: #70c0b1;"&gt;"Output files are in FLAC."&lt;/span&gt;
    &lt;span style="color: #c397d8;"&gt;echo&lt;/span&gt; &lt;span style="color: #70c0b1;"&gt;"Usage: &lt;code&gt;basename $0&lt;/code&gt; &amp;lt;image-file&amp;gt;"&lt;/span&gt;
    &lt;span style="color: #b9ca4a;"&gt;exit&lt;/span&gt; 1
&lt;span style="color: #b9ca4a;"&gt;fi&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span style="color: #c397d8;"&gt;echo&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span style="color: #e7c547;"&gt;album&lt;/span&gt;=&lt;span style="color: #c397d8;"&gt;&lt;code&gt;grep -m 1 TITLE *.cue | cut -d\" -f2&lt;/code&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span style="color: #e7c547;"&gt;artist&lt;/span&gt;=&lt;span style="color: #c397d8;"&gt;&lt;code&gt;grep -m 1 PERFORMER *.cue | cut -d\" -f2&lt;/code&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span style="color: #b9ca4a;"&gt;for&lt;/span&gt; file&lt;span style="color: #b9ca4a;"&gt; in&lt;/span&gt; [0-9]*.wav; &lt;span style="color: #b9ca4a;"&gt;do&lt;/span&gt;
    &lt;span style="color: #c397d8;"&gt;echo&lt;/span&gt; &lt;span style="color: #70c0b1;"&gt;"Encoding $file"&lt;/span&gt;&lt;/p&gt;
&lt;pre class="code literal-block"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #b9ca4a;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;if&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; [[ &lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;span&lt;/span&gt; &lt;span class="n"&gt;style&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;"color: #e7c547;"&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="nb"&gt;file&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="n"&gt;span&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt; == 0 ]] ; &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #b9ca4a;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;then&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #e7c547;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;tracknr&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;=&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;span&lt;/span&gt; &lt;span class="n"&gt;style&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;"color: #e7c547;"&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="nb"&gt;file&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="n"&gt;span&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #b9ca4a;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;else&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #e7c547;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;tracknr&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;=&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;span&lt;/span&gt; &lt;span class="n"&gt;style&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;"color: #e7c547;"&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="nb"&gt;file&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="n"&gt;span&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #b9ca4a;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;fi&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #e7c547;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;title&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;=&lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #c397d8;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;`echo &lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="nb"&gt;file&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt; | sed -e "s/.wav$//"`&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;

nice flac -s -T &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #70c0b1;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;"artist=&lt;span class="nv"&gt;$artist&lt;/span&gt;"&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; -T &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #70c0b1;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;"album=&lt;span class="nv"&gt;$album&lt;/span&gt;"&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; -T &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #70c0b1;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;"title=&lt;span class="nv"&gt;$title&lt;/span&gt;"&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #70c0b1;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;\&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;
-T &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #70c0b1;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;"tracknumber=&lt;span class="nv"&gt;$tracknr&lt;/span&gt;"&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #70c0b1;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;"&lt;span class="nv"&gt;$file&lt;/span&gt;"&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; &lt;span class="ni"&gt;&amp;amp;amp;&amp;amp;amp;&lt;/span&gt; rm &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #70c0b1;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;"&lt;span class="nv"&gt;$file&lt;/span&gt;"&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;
&lt;/pre&gt;


&lt;p&gt;&lt;span style="color: #b9ca4a;"&gt;done&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;&lt;/pre&gt;   &lt;p&gt; Put the script somewhere and name it to "cue2flac" &lt;/p&gt;&lt;/div&gt;  &lt;/div&gt;  &lt;div id="outline-container-3" class="outline-3"&gt; &lt;h4 id="sec-3"&gt;Do the real conversion&lt;/h4&gt; &lt;div class="outline-text-3" id="text-3"&gt;     &lt;pre class="src src-sh"&gt;&lt;span style="color: #969896; font-style: italic;"&gt;# &lt;/span&gt;&lt;span style="color: #969896; font-style: italic;"&gt;convert the ape to corresponding wav file, for example, "a.ape" is converted to "a.ape.wav"&lt;/span&gt;
&lt;p&gt;find . -name &lt;span style="color: #70c0b1;"&gt;'*.ape'&lt;/span&gt;|xargs -I {} ffmpeg -i {} {}.wav&lt;/p&gt;
&lt;p&gt;&lt;span style="color: #969896; font-style: italic;"&gt;# &lt;/span&gt;&lt;span style="color: #969896; font-style: italic;"&gt;split wav and convert it to flac, make sure the *.cue exists in current directory&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;cue2flac a.ape.wav&lt;/p&gt;
&lt;p&gt;&lt;span style="color: #969896; font-style: italic;"&gt;# &lt;/span&gt;&lt;span style="color: #969896; font-style: italic;"&gt;do the cleaning (OPTIONAL)&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;rm &lt;em&gt;.ape &lt;/em&gt;.wav&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;&lt;/pre&gt;  &lt;/div&gt; &lt;/div&gt; &lt;/div&gt;</description><category>cue</category><category>en</category><category>flac</category><guid>http://blog.binchen.org/posts/how-to-split-album-into-different-flac-and-tag-them-under-gentoo-linux.html</guid><pubDate>Sun, 12 May 2013 20:32:29 GMT</pubDate></item></channel></rss>