<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="../assets/xml/rss.xsl" media="all"?><rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/"><channel><title>Chen's blog (python)</title><link>http://blog.binchen.org/</link><description></description><atom:link href="http://blog.binchen.org/categories/python.xml" type="application/rss+xml" rel="self"></atom:link><language>en</language><lastBuildDate>Thu, 11 Dec 2014 17:02:38 GMT</lastBuildDate><generator>http://getnikola.com/</generator><docs>http://blogs.law.harvard.edu/tech/rss</docs><item><title>python code to migrate the MySQL database</title><link>http://blog.binchen.org/posts/python-code-to-migrate-the-mysql-database-enmysqldatabasepython.html</link><dc:creator>Chen Bin</dc:creator><description>&lt;div&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;The script can read configuration file and runs on python 2.4. &lt;/p&gt;   &lt;pre class="src src-python"&gt;&lt;span style="color: #af0000;"&gt;#!/usr/bin/python&lt;/span&gt;
&lt;span style="color: #af00ff;"&gt;import&lt;/span&gt; sys
&lt;p&gt;&lt;span style="color: #af00ff;"&gt;import&lt;/span&gt; os&lt;/p&gt;
&lt;p&gt;&lt;span style="color: #af00ff;"&gt;import&lt;/span&gt; string&lt;/p&gt;
&lt;p&gt;&lt;span style="color: #af00ff;"&gt;import&lt;/span&gt; time&lt;/p&gt;
&lt;p&gt;&lt;span style="color: #af00ff;"&gt;import&lt;/span&gt; datetime&lt;/p&gt;
&lt;p&gt;&lt;span style="color: #af00ff;"&gt;import&lt;/span&gt; getopt&lt;/p&gt;
&lt;p&gt;&lt;span style="color: #af0000;"&gt;#############&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span style="color: #af0000;"&gt;# CONFIG&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span style="color: #af0000;"&gt;#############&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span style="color: #af5f00;"&gt;DB_NAME&lt;/span&gt;=&lt;span style="color: #87005f;"&gt;'mydb'&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span style="color: #af5f00;"&gt;DB_PASSWORD&lt;/span&gt;=&lt;span style="color: #87005f;"&gt;'111111'&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span style="color: #af5f00;"&gt;DB_USER&lt;/span&gt;=&lt;span style="color: #87005f;"&gt;'root'&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span style="color: #af5f00;"&gt;DB_HOST&lt;/span&gt;=&lt;span style="color: #87005f;"&gt;'mylinux0'&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span style="color: #af5f00;"&gt;SQL_DB_SCHEMA&lt;/span&gt;=os.path.abspath(&lt;span style="color: #87005f;"&gt;"db_schema.sql"&lt;/span&gt;)&lt;/p&gt;
&lt;p&gt;&lt;span style="color: #af5f00;"&gt;SQL_CREATE_TABLE&lt;/span&gt;=os.path.abspath(&lt;span style="color: #87005f;"&gt;"000.sql"&lt;/span&gt;)&lt;/p&gt;
&lt;p&gt;&lt;span style="color: #af5f00;"&gt;CLONE_TABLES&lt;/span&gt;=[&lt;span style="color: #87005f;"&gt;'MyJobs'&lt;/span&gt;,&lt;span style="color: #87005f;"&gt;'MyUsers'&lt;/span&gt;]&lt;/p&gt;
&lt;p&gt;&lt;span style="color: #af0000;"&gt;#############&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span style="color: #af0000;"&gt;# GLOBALS&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span style="color: #af0000;"&gt;#############&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span style="color: #af5f00;"&gt;backup_db&lt;/span&gt;=&lt;span style="color: #af00ff;"&gt;False&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span style="color: #af5f00;"&gt;migration&lt;/span&gt;=&lt;span style="color: #af00ff;"&gt;False&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span style="color: #af5f00;"&gt;config&lt;/span&gt;=&lt;span style="color: #008787;"&gt;None&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span style="color: #af5f00;"&gt;verbose&lt;/span&gt;=&lt;span style="color: #af00ff;"&gt;False&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span style="color: #af5f00;"&gt;delete&lt;/span&gt;=&lt;span style="color: #af00ff;"&gt;False&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span style="color: #af5f00;"&gt;remote&lt;/span&gt;=&lt;span style="color: #af00ff;"&gt;False&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span style="color: #af00ff;"&gt;def&lt;/span&gt; &lt;span style="color: #0000ff;"&gt;sql_cmd&lt;/span&gt;(cmd):
    &lt;span style="color: #af00ff;"&gt;if&lt;/span&gt; remote:
        &lt;span style="color: #af00ff;"&gt;return&lt;/span&gt; &lt;span style="color: #87005f;"&gt;'mysql -h %s -u %s -p%s -e " %s " %s'&lt;/span&gt; % (DB_HOST,DB_USER,DB_PASSWORD,cmd,DB_NAME)
    &lt;span style="color: #af00ff;"&gt;return&lt;/span&gt; &lt;span style="color: #87005f;"&gt;'mysql -u %s -p%s -e " %s " %s'&lt;/span&gt; % (DB_USER,DB_PASSWORD,cmd,DB_NAME)&lt;/p&gt;
&lt;p&gt;&lt;span style="color: #af00ff;"&gt;def&lt;/span&gt; &lt;span style="color: #0000ff;"&gt;sql_script&lt;/span&gt;(script):
    &lt;span style="color: #af00ff;"&gt;if&lt;/span&gt; remote:
        &lt;span style="color: #af00ff;"&gt;return&lt;/span&gt; &lt;span style="color: #87005f;"&gt;'mysql -h %s -u %s -p%s %s &amp;lt; %s'&lt;/span&gt; % (DB_HOST,DB_USER,DB_PASSWORD,DB_NAME,script)
    &lt;span style="color: #af00ff;"&gt;return&lt;/span&gt; &lt;span style="color: #87005f;"&gt;'mysql -u %s -p%s %s &amp;lt; %s'&lt;/span&gt; % (DB_USER,DB_PASSWORD,DB_NAME,script)&lt;/p&gt;
&lt;p&gt;&lt;span style="color: #af00ff;"&gt;def&lt;/span&gt; &lt;span style="color: #0000ff;"&gt;make_sql_to_create_table&lt;/span&gt;():
    s=&lt;span style="color: #5f5f87;"&gt;open&lt;/span&gt;(SQL_DB_SCHEMA).read()
    &lt;span style="color: #af00ff;"&gt;for&lt;/span&gt; t &lt;span style="color: #af00ff;"&gt;in&lt;/span&gt; CLONE_TABLES:
        s=s.replace(t,t+&lt;span style="color: #87005f;"&gt;'2'&lt;/span&gt;)
    &lt;span style="color: #5f5f87;"&gt;open&lt;/span&gt;(SQL_CREATE_TABLE,&lt;span style="color: #87005f;"&gt;'w'&lt;/span&gt;).write(s)&lt;/p&gt;
&lt;p&gt;&lt;span style="color: #af00ff;"&gt;def&lt;/span&gt; &lt;span style="color: #0000ff;"&gt;backup_database&lt;/span&gt;():
    fname=&lt;span style="color: #87005f;"&gt;"%s-%s.dump.gz"&lt;/span&gt; % (DB_NAME,time.strftime(&lt;span style="color: #87005f;"&gt;'%Y%m%d%H%M%S'&lt;/span&gt;, time.gmtime()))
    &lt;span style="color: #af00ff;"&gt;if&lt;/span&gt; remote:
        cmd=&lt;span style="color: #87005f;"&gt;"mysqldump -h %s -u %s -p%s --compact %s|gzip -9 &amp;gt; %s"&lt;/span&gt; % (DB_HOST,DB_USER,DB_PASSWORD,DB_NAME,fname)
    &lt;span style="color: #af00ff;"&gt;else&lt;/span&gt;:
        cmd=&lt;span style="color: #87005f;"&gt;"mysqldump -u %s -p%s --compact %s|gzip -9 &amp;gt; %s"&lt;/span&gt; % (DB_USER,DB_PASSWORD,DB_NAME,fname)&lt;/p&gt;
&lt;pre class="code literal-block"&gt;&lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #af00ff;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;print&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #87005f;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;"==WILL RUN &lt;span class="cp"&gt;[&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="nb"&gt;s&lt;/span&gt; &lt;span class="cp"&gt;]&lt;/span&gt;"&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; % (cmd)
os.system(cmd)
&lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #af00ff;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;print&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #87005f;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;"==DONE"&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;
&lt;/pre&gt;


&lt;p&gt;&lt;span style="color: #af00ff;"&gt;def&lt;/span&gt; &lt;span style="color: #0000ff;"&gt;delete_db_records&lt;/span&gt;():
    cmd=sql_cmd(&lt;span style="color: #87005f;"&gt;"delete from sources;delete from cameras;"&lt;/span&gt;)
    &lt;span style="color: #af00ff;"&gt;print&lt;/span&gt; &lt;span style="color: #87005f;"&gt;"==WILL RUN [ %s ]"&lt;/span&gt; % (cmd)
    os.system(cmd)
    &lt;span style="color: #af00ff;"&gt;print&lt;/span&gt; &lt;span style="color: #87005f;"&gt;"==DONE"&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span style="color: #af00ff;"&gt;def&lt;/span&gt; &lt;span style="color: #0000ff;"&gt;package&lt;/span&gt;():
    cmd=&lt;span style="color: #87005f;"&gt;"tar zcvf migrate-db.tar.gz &lt;em&gt;.sql migrate.py .migrate_&lt;/em&gt;"&lt;/span&gt;
    &lt;span style="color: #af00ff;"&gt;print&lt;/span&gt; &lt;span style="color: #87005f;"&gt;"==WILL RUN [ %s ]"&lt;/span&gt; % (cmd)
    os.system(cmd)
    &lt;span style="color: #af00ff;"&gt;print&lt;/span&gt; &lt;span style="color: #87005f;"&gt;"==DONE"&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span style="color: #af00ff;"&gt;def&lt;/span&gt; &lt;span style="color: #0000ff;"&gt;read_config&lt;/span&gt;(config):
    &lt;span style="color: #af00ff;"&gt;global&lt;/span&gt; DB_NAME
    &lt;span style="color: #af00ff;"&gt;global&lt;/span&gt; DB_PASSWORD
    &lt;span style="color: #af00ff;"&gt;global&lt;/span&gt; DB_USER
    &lt;span style="color: #af00ff;"&gt;global&lt;/span&gt; DB_HOST
    f=&lt;span style="color: #5f5f87;"&gt;open&lt;/span&gt;(config,&lt;span style="color: #87005f;"&gt;"r"&lt;/span&gt;)
    &lt;span style="color: #af00ff;"&gt;for&lt;/span&gt; line &lt;span style="color: #af00ff;"&gt;in&lt;/span&gt; f:
        a=line.split(&lt;span style="color: #87005f;"&gt;"="&lt;/span&gt;)
        &lt;span style="color: #af00ff;"&gt;if&lt;/span&gt; &lt;span style="color: #5f5f87;"&gt;len&lt;/span&gt;(a)!=2:
            &lt;span style="color: #af00ff;"&gt;continue&lt;/span&gt;
        n=a[0].strip()
        v=a[1].strip()
        &lt;span style="color: #af00ff;"&gt;if&lt;/span&gt; n==&lt;span style="color: #87005f;"&gt;"DB_NAME"&lt;/span&gt;:
            DB_NAME=v
        &lt;span style="color: #af00ff;"&gt;elif&lt;/span&gt; n==&lt;span style="color: #87005f;"&gt;"DB_PASSWORD"&lt;/span&gt;:
            DB_PASSWORD=v
        &lt;span style="color: #af00ff;"&gt;elif&lt;/span&gt; n==&lt;span style="color: #87005f;"&gt;"DB_USER"&lt;/span&gt;:
            DB_USER=v
        &lt;span style="color: #af00ff;"&gt;elif&lt;/span&gt; n==&lt;span style="color: #87005f;"&gt;"DB_HOST"&lt;/span&gt;:
            DB_HOST=v&lt;/p&gt;
&lt;p&gt;&lt;span style="color: #af00ff;"&gt;def&lt;/span&gt; &lt;span style="color: #0000ff;"&gt;usage&lt;/span&gt;():
    &lt;span style="color: #af00ff;"&gt;print&lt;/span&gt; &lt;span style="color: #87005f;"&gt;'''&lt;/span&gt;
&lt;span style="color: #87005f;"&gt;USAGE: python migrate.py [OPTIONS]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span style="color: #87005f;"&gt;OPTIONS:&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span style="color: #87005f;"&gt;    -h, --help&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span style="color: #87005f;"&gt;        print this help&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span style="color: #87005f;"&gt;    -b, --backup-database&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span style="color: #87005f;"&gt;        backup the old database before migration (recommended)&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span style="color: #87005f;"&gt;    -m, --migrate&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span style="color: #87005f;"&gt;        donot start migration&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span style="color: #87005f;"&gt;    -v, --verbose&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span style="color: #87005f;"&gt;        print database related information&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span style="color: #87005f;"&gt;    -p, --package&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span style="color: #87005f;"&gt;        packge all the scripts into migrate-db.tar.gz&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span style="color: #87005f;"&gt;    -d, --delete-db-records&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span style="color: #87005f;"&gt;        delete database records so we can restart migration&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span style="color: #87005f;"&gt;    -c, --config&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span style="color: #87005f;"&gt;SAMPLES:&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span style="color: #87005f;"&gt;    python migrate.py -b                        #back database and exit&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span style="color: #87005f;"&gt;    python migrate.py -m                        #start migration right now&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span style="color: #87005f;"&gt;    python migrate.py -b -m                     #backup the database and start the migration (recommended)&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span style="color: #87005f;"&gt;    python migrate.py -v                        #print database information and exit&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span style="color: #87005f;"&gt;    python migrate.py -c .migrate_staging -v    #print staging database information and exit&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span style="color: #87005f;"&gt;'''&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span style="color: #af00ff;"&gt;def&lt;/span&gt; &lt;span style="color: #0000ff;"&gt;show_info&lt;/span&gt;():
    &lt;span style="color: #af00ff;"&gt;print&lt;/span&gt; &lt;span style="color: #87005f;"&gt;'''&lt;/span&gt;
&lt;span style="color: #87005f;"&gt;==Database Information&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span style="color: #87005f;"&gt;name:{name}&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span style="color: #87005f;"&gt;password:{password}&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span style="color: #87005f;"&gt;user:{user}&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span style="color: #87005f;"&gt;host:{host}&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span style="color: #87005f;"&gt;'''&lt;/span&gt;.format(name=DB_NAME, password=DB_PASSWORD,user=DB_USER,host=DB_HOST)&lt;/p&gt;
&lt;p&gt;&lt;span style="color: #af00ff;"&gt;def&lt;/span&gt; &lt;span style="color: #0000ff;"&gt;confirm&lt;/span&gt;(prompt=&lt;span style="color: #008787;"&gt;None&lt;/span&gt;, resp=&lt;span style="color: #af00ff;"&gt;False&lt;/span&gt;):
    &lt;span style="color: #87005f;"&gt;"""prompts for yes or no response from the user. Returns True for yes and&lt;/span&gt;
&lt;span style="color: #87005f;"&gt;    False for no.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span style="color: #87005f;"&gt;    'resp' should be set to the default value assumed by the caller when&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span style="color: #87005f;"&gt;    user simply types ENTER.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span style="color: #87005f;"&gt;    &amp;gt;&amp;gt;&amp;gt; confirm(prompt='Create Directory?', resp=True)&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span style="color: #87005f;"&gt;    Create Directory? [y]|n:&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span style="color: #87005f;"&gt;    True&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span style="color: #87005f;"&gt;    &amp;gt;&amp;gt;&amp;gt; confirm(prompt='Create Directory?', resp=False)&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span style="color: #87005f;"&gt;    Create Directory? [n]|y:&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span style="color: #87005f;"&gt;    False&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span style="color: #87005f;"&gt;    &amp;gt;&amp;gt;&amp;gt; confirm(prompt='Create Directory?', resp=False)&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span style="color: #87005f;"&gt;    Create Directory? [n]|y: y&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span style="color: #87005f;"&gt;    True&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span style="color: #87005f;"&gt;    """&lt;/span&gt;&lt;/p&gt;
&lt;pre class="code literal-block"&gt;&lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #af00ff;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;if&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; prompt &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #af00ff;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;is&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #008787;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;None&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;:
    prompt = &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #87005f;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;'WARNING: DONOT run me twice and migration CANNOT be rolled back, GO?'&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;

&lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #af00ff;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;if&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; resp:
    prompt = &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #87005f;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;'%s &lt;span class="cp"&gt;[&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="nb"&gt;s&lt;/span&gt;&lt;span class="cp"&gt;]&lt;/span&gt;|%s: '&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; % (prompt, &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #87005f;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;'y'&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;, &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #87005f;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;'n'&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;)
&lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #af00ff;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;else&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;:
    prompt = &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #87005f;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;'%s &lt;span class="cp"&gt;[&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="nb"&gt;s&lt;/span&gt;&lt;span class="cp"&gt;]&lt;/span&gt;|%s: '&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; % (prompt, &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #87005f;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;'n'&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;, &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #87005f;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;'y'&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;)

&lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #af00ff;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;while&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #af00ff;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;True&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;:
    ans = &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #5f5f87;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;raw_input&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;(prompt)
    &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #af00ff;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;if&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #af00ff;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;not&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; ans:
        &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #af00ff;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;return&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; resp
    &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #af00ff;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;if&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; ans &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #af00ff;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;not&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #af00ff;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;in&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; &lt;span class="cp"&gt;[&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nx"&gt;span&lt;/span&gt; &lt;span class="n"&gt;style&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;"color: #87005f;"&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="s1"&gt;'y'&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nx"&gt;span&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nx"&gt;span&lt;/span&gt; &lt;span class="n"&gt;style&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;"color: #87005f;"&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="s1"&gt;'Y'&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nx"&gt;span&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nx"&gt;span&lt;/span&gt; &lt;span class="n"&gt;style&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;"color: #87005f;"&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="s1"&gt;'n'&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nx"&gt;span&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nx"&gt;span&lt;/span&gt; &lt;span class="n"&gt;style&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;"color: #87005f;"&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="s1"&gt;'N'&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nx"&gt;span&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;]&lt;/span&gt;:
        &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #af00ff;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;print&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #87005f;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;'please enter y or n.'&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;
        &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #af00ff;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;continue&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #af00ff;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;if&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; ans == &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #87005f;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;'y'&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #af00ff;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;or&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; ans == &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #87005f;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;'Y'&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;:
        &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #af00ff;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;return&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #af00ff;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;True&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #af00ff;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;if&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; ans == &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #87005f;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;'n'&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #af00ff;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;or&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; ans == &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #87005f;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;'N'&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;:
        &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #af00ff;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;return&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #af00ff;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;False&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;
&lt;/pre&gt;


&lt;p&gt;&lt;span style="color: #af00ff;"&gt;if&lt;/span&gt; &lt;span style="color: #5f5f87;"&gt;&lt;strong&gt;name&lt;/strong&gt;&lt;/span&gt;==&lt;span style="color: #87005f;"&gt;"&lt;strong&gt;main&lt;/strong&gt;"&lt;/span&gt;:
    &lt;span style="color: #87005f;"&gt;'''&lt;/span&gt;
&lt;span style="color: #87005f;"&gt;    @see http://linux.byexamples.com/archives/366/python-how-to-run-a-command-line-within-python/&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span style="color: #87005f;"&gt;    '''&lt;/span&gt;
    &lt;span style="color: #af00ff;"&gt;try&lt;/span&gt;:
        opts, args = getopt.getopt(sys.argv[1:], &lt;span style="color: #87005f;"&gt;"hbmvpdc:r"&lt;/span&gt;, [&lt;span style="color: #87005f;"&gt;"help"&lt;/span&gt;, &lt;span style="color: #87005f;"&gt;"backup-database"&lt;/span&gt;,&lt;span style="color: #87005f;"&gt;"--migrate"&lt;/span&gt;,&lt;span style="color: #87005f;"&gt;"--verbose"&lt;/span&gt;,&lt;span style="color: #87005f;"&gt;"--package"&lt;/span&gt;,&lt;span style="color: #87005f;"&gt;"--delete-db-records"&lt;/span&gt;,&lt;span style="color: #87005f;"&gt;"--config="&lt;/span&gt;,&lt;span style="color: #87005f;"&gt;"--remote"&lt;/span&gt;])
    &lt;span style="color: #af00ff;"&gt;except&lt;/span&gt; getopt.GetoptError, err:
        &lt;span style="color: #af00ff;"&gt;print&lt;/span&gt; str(err) &lt;span style="color: #af0000;"&gt;# will print something like "option -a not recognized"&lt;/span&gt;
        usage()
        &lt;span style="color: #5f5f87;"&gt;exit&lt;/span&gt;(2)&lt;/p&gt;
&lt;pre class="code literal-block"&gt;&lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #af00ff;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;if&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #5f5f87;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;len&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;(opts)==0:
    usage()
    &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #5f5f87;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;exit&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;(2)

&lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #af00ff;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;for&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; o, a &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #af00ff;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;in&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; opts:
    &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #af00ff;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;if&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; o &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #af00ff;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;in&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; (&lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #87005f;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;"-h"&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;, &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #87005f;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;"--help"&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;):
        usage()
        sys.exit()
    &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #af00ff;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;elif&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; o &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #af00ff;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;in&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; (&lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #87005f;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;"-v"&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;, &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #87005f;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;"--verbose"&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;):
        verbose=&lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #af00ff;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;True&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #af00ff;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;elif&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; o &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #af00ff;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;in&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; (&lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #87005f;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;"-c"&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;, &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #87005f;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;"--config"&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;):
        config=a
        &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #af00ff;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;print&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; config
    &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #af00ff;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;elif&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; o &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #af00ff;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;in&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; (&lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #87005f;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;"-d"&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;, &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #87005f;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;"--delete-db-records"&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;):
        delete=&lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #af00ff;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;True&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #af00ff;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;elif&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; o &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #af00ff;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;in&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; (&lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #87005f;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;"-p"&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;, &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #87005f;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;"--package"&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;):
        package()
        &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #5f5f87;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;exit&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;(0)
    &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #af00ff;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;elif&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; o &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #af00ff;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;in&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; (&lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #87005f;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;"-b"&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;, &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #87005f;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;"--backup-database"&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;):
        backup_db=&lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #af00ff;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;True&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #af00ff;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;elif&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; o &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #af00ff;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;in&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; (&lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #87005f;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;"-m"&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;, &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #87005f;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;"--migrate"&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;):
        migration=&lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #af00ff;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;True&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #af00ff;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;elif&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; o &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #af00ff;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;in&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; (&lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #87005f;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;"-r"&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;, &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #87005f;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;"--remote"&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;):
        remote=&lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #af00ff;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;True&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #af00ff;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;else&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;:
        &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #af00ff;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;assert&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #af00ff;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;False&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;, &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #87005f;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;"unhandled option"&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;

&lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #af00ff;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;if&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; config!=&lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #008787;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;None&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;:
    read_config(config)

&lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #af00ff;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;if&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; delete:
    delete_db_records()
    sys.exit()

&lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #af00ff;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;if&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; verbose:
    show_info()
    sys.exit()

&lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #af00ff;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;if&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; backup_db:
    backup_database()

&lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #af00ff;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;if&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; migration==&lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #af00ff;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;False&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;:
    &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #5f5f87;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;exit&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;(0)

&lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #af00ff;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;if&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; confirm()==&lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #af00ff;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;False&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;:
    &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #af00ff;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;print&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #87005f;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;"Aborting ..."&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #5f5f87;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;exit&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;(0)

make_sql_to_create_table()

&lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #af00ff;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;print&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #87005f;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;"==START MIGRATION"&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;

&lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #af0000;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;# test data base connection&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;
cmd=sql_cmd(&lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #87005f;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;'show databases;use %s;'&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; % (DB_NAME))
&lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #af00ff;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;print&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #87005f;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;"==WILL RUN &lt;span class="cp"&gt;[&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="nb"&gt;s&lt;/span&gt; &lt;span class="cp"&gt;]&lt;/span&gt;"&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; % (cmd)
os.system(cmd)
&lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #af00ff;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;print&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #87005f;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;"==DONE"&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;

cmd=sql_script(&lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #87005f;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;"000.sql"&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;)
&lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #af00ff;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;print&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #87005f;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;"==WILL RUN &lt;span class="cp"&gt;[&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="nb"&gt;s&lt;/span&gt; &lt;span class="cp"&gt;]&lt;/span&gt;"&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; % (cmd)
os.system(cmd)
&lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #af00ff;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;print&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #87005f;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;"==DONE"&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;

os.system(sql_cmd(&lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #87005f;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;"insert into migrate (Action) values ('001.sql')"&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;))
cmd=sql_script(&lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #87005f;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;"001.sql"&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;)
&lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #af00ff;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;print&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #87005f;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;"==WILL RUN &lt;span class="cp"&gt;[&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="nb"&gt;s&lt;/span&gt; &lt;span class="cp"&gt;]&lt;/span&gt;"&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; % (cmd)
os.system(cmd)
&lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #af00ff;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;print&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #87005f;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;"==DONE"&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;

os.system(sql_cmd(&lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #87005f;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;"insert into migrate (Action) values ('002.sql')"&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;))
cmd=sql_script(&lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #87005f;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;"002.sql"&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;)
&lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #af00ff;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;print&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #87005f;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;"==WILL RUN &lt;span class="cp"&gt;[&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="nb"&gt;s&lt;/span&gt; &lt;span class="cp"&gt;]&lt;/span&gt;"&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; % (cmd)
os.system(cmd)
&lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #af00ff;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;print&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #87005f;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;"==DONE"&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;

os.system(sql_cmd(&lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #87005f;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;"insert into migrate (Action) values ('003.sql')"&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;))
cmd=sql_script(&lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #87005f;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;"003.sql"&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;)
&lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #af00ff;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;print&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #87005f;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;"==WILL RUN &lt;span class="cp"&gt;[&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="nb"&gt;s&lt;/span&gt; &lt;span class="cp"&gt;]&lt;/span&gt;"&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; % (cmd)
os.system(cmd)
&lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #af00ff;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;print&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #87005f;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;"==DONE"&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;

os.system(sql_cmd(&lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #87005f;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;"insert into migrate (Action) values ('004.sql')"&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;))
cmd=sql_script(&lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #87005f;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;"004.sql"&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;)
&lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #af00ff;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;print&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #87005f;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;"==WILL RUN &lt;span class="cp"&gt;[&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="nb"&gt;s&lt;/span&gt; &lt;span class="cp"&gt;]&lt;/span&gt;"&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; % (cmd)
os.system(cmd)
&lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #af00ff;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;print&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #87005f;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;"==DONE"&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;

os.system(sql_cmd(&lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #87005f;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;"insert into migrate (Action) values ('005.sql')"&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;))
cmd=sql_script(&lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #87005f;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;"005.sql"&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;)
&lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #af00ff;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;print&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #87005f;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;"==WILL RUN &lt;span class="cp"&gt;[&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="nb"&gt;s&lt;/span&gt; &lt;span class="cp"&gt;]&lt;/span&gt;"&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; % (cmd)
os.system(cmd)
&lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #af00ff;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;print&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #87005f;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;"==DONE"&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;

os.system(sql_cmd(&lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #87005f;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;"insert into migrate (Action) values ('006.sql')"&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;))
cmd=sql_script(&lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #87005f;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;"006.sql"&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;)
&lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #af00ff;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;print&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #87005f;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;"==WILL RUN &lt;span class="cp"&gt;[&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="nb"&gt;s&lt;/span&gt; &lt;span class="cp"&gt;]&lt;/span&gt;"&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; % (cmd)
os.system(cmd)
&lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #af00ff;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;print&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #87005f;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;"==DONE"&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;

os.system(sql_cmd(&lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #87005f;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;"insert into migrate (Action) values ('100.sql')"&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;))
cmd=sql_script(&lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #87005f;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;"100.sql"&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;)
&lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #af00ff;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;print&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #87005f;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;"==WILL RUN &lt;span class="cp"&gt;[&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="nb"&gt;s&lt;/span&gt; &lt;span class="cp"&gt;]&lt;/span&gt;"&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; % (cmd)
os.system(cmd)
&lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #af00ff;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;print&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #87005f;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;"==DONE"&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;

cmd=sql_script(&lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #87005f;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;"insert_sample_sources.sql"&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;)
&lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #af00ff;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;print&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #87005f;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;"==WILL RUN &lt;span class="cp"&gt;[&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="nb"&gt;s&lt;/span&gt; &lt;span class="cp"&gt;]&lt;/span&gt;"&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; % (cmd)
os.system(cmd)
&lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #af00ff;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;print&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #87005f;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;"==DONE"&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;

cmd=sql_script(&lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #87005f;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;"app_config.sql"&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;)
&lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #af00ff;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;print&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #87005f;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;"==WILL RUN &lt;span class="cp"&gt;[&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="nb"&gt;s&lt;/span&gt; &lt;span class="cp"&gt;]&lt;/span&gt;"&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; % (cmd)
os.system(cmd)
&lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #af00ff;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;print&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #87005f;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;"==DONE"&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;

&lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #af00ff;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;print&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; &lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"color: #87005f;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;"==END MIGRATION"&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;
&lt;/pre&gt;


&lt;p&gt;&lt;span style="color: #af0000;"&gt;# vim: set expandtab tabstop=4 shiftwidth=4:&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;&lt;/pre&gt;  &lt;/div&gt;</description><category>database</category><category>en</category><category>mysql</category><category>python</category><guid>http://blog.binchen.org/posts/python-code-to-migrate-the-mysql-database-enmysqldatabasepython.html</guid><pubDate>Wed, 22 Aug 2012 12:08:00 GMT</pubDate></item><item><title>Sample python code to resize image</title><link>http://blog.binchen.org/posts/sample-python-code-to-resize-image.html</link><dc:creator>Chen Bin</dc:creator><description>&lt;div&gt;&lt;p&gt;&lt;/p&gt;&lt;pre class="src src-python"&gt;&lt;span style="color: #cd0000;"&gt;#!/usr/bin/python&lt;/span&gt;
&lt;span style="color: #00cdcd; font-weight: bold;"&gt;import&lt;/span&gt; Image
&lt;p&gt;&lt;span style="color: #00cdcd; font-weight: bold;"&gt;import&lt;/span&gt; cStringIO&lt;/p&gt;
&lt;p&gt;&lt;span style="color: #cdcd00;"&gt;data&lt;/span&gt;=&lt;span style="color: #0000ee; font-weight: bold;"&gt;open&lt;/span&gt;(&lt;span style="color: #00cd00;"&gt;"test.png"&lt;/span&gt;,&lt;span style="color: #00cd00;"&gt;"rb"&lt;/span&gt;).read()&lt;/p&gt;
&lt;p&gt;&lt;span style="color: #cd0000;"&gt;# in real application, I handle the data in memory&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span style="color: #cdcd00;"&gt;img&lt;/span&gt;=Image.open(cStringIO.StringIO(data))&lt;/p&gt;
&lt;p&gt;img.thumbnail((800,480),Image.ANTIALIAS)&lt;/p&gt;
&lt;p&gt;img.save(&lt;span style="color: #00cd00;"&gt;"test-p.jpg"&lt;/span&gt;,&lt;span style="color: #00cd00;"&gt;"JPEG"&lt;/span&gt;)&lt;/p&gt;
&lt;p&gt;img.thumbnail((128,128),Image.ANTIALIAS)&lt;/p&gt;
&lt;p&gt;img.save(&lt;span style="color: #00cd00;"&gt;"test-t.jpg"&lt;/span&gt;,&lt;span style="color: #00cd00;"&gt;"JPEG"&lt;/span&gt;)&lt;/p&gt;
&lt;p&gt;&lt;span style="color: #00cdcd; font-weight: bold;"&gt;print&lt;/span&gt; &lt;span style="color: #00cd00;"&gt;"DONE"&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;&lt;/pre&gt;  &lt;/div&gt;</description><category>en</category><category>graphic</category><category>python</category><guid>http://blog.binchen.org/posts/sample-python-code-to-resize-image.html</guid><pubDate>Wed, 28 Sep 2011 05:40:00 GMT</pubDate></item></channel></rss>