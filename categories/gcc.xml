<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="../assets/xml/rss.xsl" media="all"?><rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/"><channel><title>Chen's blog (gcc)</title><link>http://blog.binchen.org/</link><description></description><atom:link href="http://blog.binchen.org/categories/gcc.xml" type="application/rss+xml" rel="self"></atom:link><language>en</language><lastBuildDate>Sun, 07 Dec 2014 23:12:04 GMT</lastBuildDate><generator>http://getnikola.com/</generator><docs>http://blogs.law.harvard.edu/tech/rss</docs><item><title>Always turn on "-fpermissive" for GCC 4.6</title><link>http://blog.binchen.org/posts/always-turn-on-fpermissive-for-gcc-4-6.html</link><dc:creator>Chen Bin</dc:creator><description>&lt;div&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;Below code will get error message if compiled by gcc 4.6+: &lt;/p&gt;   &lt;pre class="example"&gt;"const A" as 'this' argument of "void A::a()' discards qualifiers [-fpermissive]
&lt;/pre&gt;    &lt;pre class="src src-c++"&gt;&lt;span style="color: #00cdcd; font-weight: bold;"&gt;class&lt;/span&gt; &lt;span style="color: #00cd00;"&gt;A&lt;/span&gt;
&lt;p&gt;{
   &lt;span style="color: #00cd00;"&gt;void&lt;/span&gt; &lt;span style="color: #0000ee; font-weight: bold;"&gt;a&lt;/span&gt;();
}&lt;/p&gt;
&lt;p&gt;&lt;span style="color: #00cdcd; font-weight: bold;"&gt;class&lt;/span&gt; &lt;span style="color: #00cd00;"&gt;B&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;{
   &lt;span style="color: #00cdcd; font-weight: bold;"&gt;virtual&lt;/span&gt; &lt;span style="color: #00cd00;"&gt;void&lt;/span&gt; &lt;span style="color: #0000ee; font-weight: bold;"&gt;b&lt;/span&gt;() &lt;span style="color: #00cdcd; font-weight: bold;"&gt;const&lt;/span&gt;;
}&lt;/p&gt;
&lt;p&gt;&lt;span style="color: #00cdcd; font-weight: bold;"&gt;class&lt;/span&gt; &lt;span style="color: #00cd00;"&gt;MyClass&lt;/span&gt;:&lt;span style="color: #00cdcd; font-weight: bold;"&gt;public&lt;/span&gt; &lt;span style="color: #00cd00;"&gt;B&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;{
  &lt;span style="color: #00cd00;"&gt;A&lt;/span&gt; &lt;span style="color: #cdcd00;"&gt;_a&lt;/span&gt;;
  &lt;span style="color: #00cdcd; font-weight: bold;"&gt;virtual&lt;/span&gt; &lt;span style="color: #00cd00;"&gt;b&lt;/span&gt;() &lt;span style="color: #00cdcd; font-weight: bold;"&gt;const&lt;/span&gt;
  {
    _a.a(); &lt;span style="color: #cd0000;"&gt;//&lt;/span&gt;&lt;span style="color: #cd0000;"&gt;gcc complains here!&lt;/span&gt;
  }
}&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;&lt;/pre&gt;  &lt;p&gt; Since I cannot modify class A and B, I need add "-fpermission" to CXX&lt;sub&gt;FLAG&lt;/sub&gt;. Here is my &lt;a href="http://www.cmake.org"&gt;cmake&lt;/a&gt; code, &lt;/p&gt;   &lt;pre class="src src-cmake"&gt;if(CMAKE_COMPILER_IS_GNUCC)
  # needed for gcc 4.6+
  set(CMAKE_CXX_FLAGS &lt;span style="color: #00cd00;"&gt;"${CMAKE_CXX_FLAGS} -fpermissive"&lt;/span&gt;)
endif()
&lt;p&gt;&lt;/p&gt;&lt;/pre&gt;  &lt;/div&gt;</description><category>en</category><category>gcc</category><category>linux</category><guid>http://blog.binchen.org/posts/always-turn-on-fpermissive-for-gcc-4-6.html</guid><pubDate>Sat, 14 Jan 2012 10:38:00 GMT</pubDate></item></channel></rss>