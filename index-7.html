<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# " lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="Linux, Programming, Emacs">
<meta name="viewport" content="width=device-width">
<title>Chen's blog (old posts, page 7) | Chen's blog</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<link rel="alternate" type="application/rss+xml" title="RSS" href="rss.xml">
<link rel="canonical" href="http://blog.binchen.org/index-7.html">
<!--[if lt IE 9]><script src="/assets/js/html5.js"></script><![endif]-->
</head>
<body>
    <section class="social"><ul>
<li><a href="index.html" title="Home"><i class="icon-home"></i></a></li>
            <li><a href="archive.html" title="Archives"><i class="icon-folder-open-alt"></i></a></li>
            <li><a href="categories/index.html" title="Tags"><i class="icon-tags"></i></a></li>
            <li><a href="rss.xml" title="RSS"><i class="icon-rss"></i></a></li>
            <li><a href="stories/about.html" title="About me"><i class="icon-user"></i></a></li>
            <li><a href="https://twitter.com/chen_bin" title="My Twitter"><i class="icon-twitter"></i></a></li>
            <li><a href="https://github.com/redguardtoo" title="My Github"><i class="icon-github"></i></a></li>

        </ul></section><section class="page-content"><div class="content" rel="main">
            
        <div class="post">
            <h1 class="title"><a href="posts/commentuncomment-line-is-easy-in-emacs.html">Comment/uncomment line(s) is easy in Emacs</a></h1>
            <div class="meta">
                <div class="authordate">
                    <time class="timeago" datetime="2013-02-01T20:49:00+00:00">2013-02-01 20:49</time>
</div>
                <div class="stats">
                    
        
    <a href="posts/commentuncomment-line-is-easy-in-emacs.html#disqus_thread" data-disqus-identifier="cache/posts/commentuncomment-line-is-easy-in-emacs.html">Comments</a>


                </div>
            
        <div itemprop="keywords" class="tags">
        <ul>
        Tags : 
           <li><a class="tag p-category" href="categories/emacs.html" rel="tag">emacs</a></li>
           <li><a class="tag p-category" href="categories/en.html" rel="tag">en</a></li>
        </ul>
</div>

            </div>
            <div class="body">
                <div>
<p></p>
<p>It's easy if you use <a href="https://github.com/redguardtoo/evil-nerd-commenter">evil-nerd-comment</a>er. As its README said, comment/uncomment line is only pressing ",ci" in evil-mode. </p> <p> You can also select the region and press "M-;" to comment the lines in the region. If part of the line is not in the region, the whole line will still be commented out. This saves your extra key pressing for moving cursor to the beginning of the first line or moving the cursor to the end of the last line. </p> <p> The reason to make commenting so efficient is that I need comment/uncomment code for debug purpose. </p> <p> Some people say comment out the code is not a right way to debug. The right way is using debugger. </p> <p> But if you debug some huge project, using the debugger makes no sense for many reasons: </p>
<ul>
<li>debugging DSL the middleware whose debugger simply does not exist </li> <li>The bug can be reproduced on production server </li> <li>Too much overhead to set up debugger. Say I'm debugging component from other teams and developers and the technologies they use make configuring debugger very harder. </li> </ul>
</div>
            </div>
        </div>
        <div class="post">
            <h1 class="title"><a href="posts/fa-biao-yi-nian-chen-wei-emacs-gao-shou-man-yi-zhou-nian-de-gan-wu.html">发表满一周年的感悟</a></h1>
            <div class="meta">
                <div class="authordate">
                    <time class="timeago" datetime="2013-01-30T21:00:00+00:00">2013-01-30 21:00</time>
</div>
                <div class="stats">
                    
        
    <a href="posts/fa-biao-yi-nian-chen-wei-emacs-gao-shou-man-yi-zhou-nian-de-gan-wu.html#disqus_thread" data-disqus-identifier="cache/posts/fa-biao-yi-nian-chen-wei-emacs-gao-shou-man-yi-zhou-nian-de-gan-wu.html">Comments</a>


                </div>
            
        <div itemprop="keywords" class="tags">
        <ul>
        Tags : 
           <li><a class="tag p-category" href="categories/emacs.html" rel="tag">emacs</a></li>
           <li><a class="tag p-category" href="categories/zh.html" rel="tag">zh</a></li>
        </ul>
</div>

            </div>
            <div class="body">
                <div>
<p></p>
<p>原创日期: <span class="timestamp-wrapper"> <span class="timestamp">2013-01-31 四</span></span> </p> <p> 2012年1月31日我写了<a href="http://blog.binchen.org/?p=268">一年成为Emacs高手(像神一样使用编辑器)</a> (后文简称&lt;一年&gt;),到今天(2013年1月31日)正好一周年. </p> <p> 这一年中,我不断地维护更新该文,力求能够反映最新社区咨询,解决读者的实际问题,这个过程本身使我受益匪浅. </p> <p> 最大的收获就是静下心来花时间把一件事情做到极致,对个人收获是最大的. </p> <p> 例如,我不断维护&lt;一年&gt;一文,使得这篇文章成为我所有文章中最受欢迎的文章,其评论数和读者私下联系我的次数超过了我所有其他文章的总和.很多读者还热心给我推荐了Emacs其他好用的功能(如插件<a href="https://github.com/dimitri/switch-window">switch-window</a>),学习这些功能靠我自己摸索可能要花大量的时间. </p> <p> 该文之所以能够受欢迎,我想主要是因为文章质量比较高,信息丰富.我的总结是,只有花大量时间,反复修改,才能写出高质量的文章.例如,&lt;一年成为Emacs高手&gt;我前前后后改了十多个版本,前后花了一年时间,最新版本是两天前更新的. </p> <p> 持之以恒的最大优点是可以达到很深的深度,获得不可替代性,而报酬(读者的赞扬回馈,我个人知识智力的增长)是和我钻研的深度成正比的. </p> <p> 例如,在反复修改&lt;一年&gt;一文中,我自己对于该文的中心思想认识越来越深刻了.该中心思想就是,一个人能够达到的高度,是由他的设的起点有多高决定的,而最好的起点就是世界级的顶尖高手.这个道理除了写博客和Emacs外,还可以应用到很多地方. </p> <p> 持之以恒的道理我从小都懂,但是在维护&lt;一年&gt;的过程我才算真正领悟了这个道理(纸面上知道不算知道,做了才算真正知道).就我个人来讲,主要是因为对自己的智力比较自负,总觉得追求有趣新奇的东西才配得上自己的天赋,对于已知的比较枯燥的小修小补的工作有点不屑一顾.事实上,修补完善的过程是很轻松的,不需要花太多时间精力,而获得的回报是巨大的.我要做得就是适当地抑制一下自己追新求变的热情. </p> <p> 接下来是我给读者的问题. </p> <p> <b>如果你一年前读过了&lt;一年成为Emacs高手&gt;,你现在是否成为了Emacs高手?你的一周年感悟是什么?</b> </p> <p> 无论你已经是高手了,或正在成为高手的路上,把你的感悟告诉我.我会汇总后发表在我的博客上. </p> <p> 这是我的<a href="https://twitter.com/#!/chen_bin">twitter</a>和<a href="https://plus.google.com/110954683162859211810">google plus</a>以及<a href="http://www.weibo.com/u/2453581630">微博</a>,也可以通过我的email&lt;chenbin DOT sh AT GMAIL DOT COM&gt;联系我.我也在新浪weibo.com上开通账号emacsguru. </p>
</div>
            </div>
        </div>
        <div class="post">
            <h1 class="title"><a href="posts/open-url-in-emacs-with-external-browser.html">Open url in Emacs with external browser</a></h1>
            <div class="meta">
                <div class="authordate">
                    <time class="timeago" datetime="2013-01-28T10:59:00+00:00">2013-01-28 10:59</time>
</div>
                <div class="stats">
                    
        
    <a href="posts/open-url-in-emacs-with-external-browser.html#disqus_thread" data-disqus-identifier="cache/posts/open-url-in-emacs-with-external-browser.html">Comments</a>


                </div>
            
        <div itemprop="keywords" class="tags">
        <ul>
        Tags : 
           <li><a class="tag p-category" href="categories/browser.html" rel="tag">browser</a></li>
           <li><a class="tag p-category" href="categories/elisp.html" rel="tag">elisp</a></li>
           <li><a class="tag p-category" href="categories/emacs.html" rel="tag">emacs</a></li>
           <li><a class="tag p-category" href="categories/en.html" rel="tag">en</a></li>
        </ul>
</div>

            </div>
            <div class="body">
                <div>
<p></p>
<p>Here is some handy elisp function which use browse-url-generic to open the url in external browser (firefox, for example). </p> <p> The key point is how to detect the url. If we are in w3m-mode, we will use the link under cursor or the URI of current web page. Or else, we will let browse-url-generic to detect the url. </p>    <pre class="src src-elisp">(<span style="color: #b5bd68;">defun</span> <span style="color: #81a2be;">w3mext-open-link-or-image-or-url</span> ()
  <span style="color: #b294bb;">"Opens the current link or image or current page's uri or any url-like text under cursor in firefox."</span>
  (interactive)
  (<span style="color: #b5bd68;">let</span> (url)
    (<span style="color: #b5bd68;">if</span> (string= major-mode <span style="color: #8abeb7;">"w3m-mode"</span>)
        (setq url (or (w3m-anchor) (w3m-image) w3m-current-url)))
    (browse-url-generic (<span style="color: #b5bd68;">if</span> url url (car (browse-url-interactive-arg <span style="color: #8abeb7;">"URL: "</span>))))
    ))
(global-set-key (kbd <span style="color: #8abeb7;">"C-c b"</span>) 'w3mext-open-link-or-image-or-url)
<p></p></pre>   <p> To specify the external browser like firefox, add below code into ~/.emacs: </p>   <pre class="src src-elisp"><span style="color: #969896; font-style: italic;">;; </span><span style="color: #969896; font-style: italic;"><code>C-h v browse-url-generic-program RET</code> to see the documentation</span>
<p><span style="color: #969896; font-style: italic;">;; </span><span style="color: #969896; font-style: italic;"><em>is-a-mac</em> and <em>linux</em> is the boolean constants defined by me</span></p>
<p>(setq browse-url-generic-program
      (<span style="color: #b5bd68;">cond</span>
       (<em>is-a-mac</em> <span style="color: #8abeb7;">"open"</span>)
       (<em>linux</em> (executable-find <span style="color: #8abeb7;">"firefox"</span>))
       ))
</p></pre>  </div>
            </div>
        </div>
        <div class="post">
            <h1 class="title"><a href="posts/simplest-workflow-on-email-git-commit-in-emacs-no-magit-needed.html">Simplest workflow on email git commit in Emacs (No magit needed)</a></h1>
            <div class="meta">
                <div class="authordate">
                    <time class="timeago" datetime="2013-01-27T15:51:00+00:00">2013-01-27 15:51</time>
</div>
                <div class="stats">
                    
        
    <a href="posts/simplest-workflow-on-email-git-commit-in-emacs-no-magit-needed.html#disqus_thread" data-disqus-identifier="cache/posts/simplest-workflow-on-email-git-commit-in-emacs-no-magit-needed.html">Comments</a>


                </div>
            
        <div itemprop="keywords" class="tags">
        <ul>
        Tags : 
           <li><a class="tag p-category" href="categories/emacs.html" rel="tag">emacs</a></li>
           <li><a class="tag p-category" href="categories/email.html" rel="tag">email</a></li>
           <li><a class="tag p-category" href="categories/en.html" rel="tag">en</a></li>
           <li><a class="tag p-category" href="categories/git.html" rel="tag">git</a></li>
           <li><a class="tag p-category" href="categories/patch.html" rel="tag">patch</a></li>
        </ul>
</div>

            </div>
            <div class="body">
                <div>
<p></p>
<p>Sometimes I just want to email my trivial patch to the original author and forget it. In this case "github fork" or "git format-patch" is too heavy weight for me. </p> <p> So here is the simplest workflow I can figure out: </p>
<ul>
<li>Step 1, command "M-x vc-dir" whose hotkey is "C-x v d" </li> <li>Step 2, command "M-x git-print-log" whose hotkey is "C-x v l" </li> <li>Step 3, Move focus to the specific commit and run command "M-x log-view-diff" whose hotkey is "d". </li> <li>Step 4, Yank the commit/diff </li> <li>Step 5, Compose new email (command "M-x compose-mail" whose hotkey is "C-x m") </li> <li>Step 6, Make sure the subject of email start with "[PATCH]". See <a href="http://linuxtv.org/wiki/index.php/Development:_How_to_submit_patches">this patch sumbit guide</a> for reasons. </li> <li>Step 7, Paste the content of commit/diff into email body. </li> <li>Step 8, Send the email by command "M-x message-send-and-exit" whose hotkey is "C-c C-c" </li> </ul>
<p> Please note: </p>
<ul>
<li>Step 1 is usually necessary unless you only need the diff of current file. </li> <li>Step 2 and step 3 could be replaced with command "M-x vc-diff" or hotkey "C-x v =" if you want to email the diff of work directory. </li> </ul>
</div>
            </div>
        </div>
        <div class="post">
            <h1 class="title"><a href="posts/import-gmail-contacts-into-bbdb.html">Import Gmail contacts into BBDB</a></h1>
            <div class="meta">
                <div class="authordate">
                    <time class="timeago" datetime="2013-01-26T11:56:00+00:00">2013-01-26 11:56</time>
</div>
                <div class="stats">
                    
        
    <a href="posts/import-gmail-contacts-into-bbdb.html#disqus_thread" data-disqus-identifier="cache/posts/import-gmail-contacts-into-bbdb.html">Comments</a>


                </div>
            
        <div itemprop="keywords" class="tags">
        <ul>
        Tags : 
           <li><a class="tag p-category" href="categories/bbdb.html" rel="tag">bbdb</a></li>
           <li><a class="tag p-category" href="categories/emacs.html" rel="tag">emacs</a></li>
           <li><a class="tag p-category" href="categories/en.html" rel="tag">en</a></li>
           <li><a class="tag p-category" href="categories/gmail.html" rel="tag">gmail</a></li>
           <li><a class="tag p-category" href="categories/google.html" rel="tag">google</a></li>
        </ul>
</div>

            </div>
            <div class="body">
                <div>
<p></p>
<ul>
<li>Go to <a href="http://contacts.google.com">http://contacts.google.com</a>, click the menu "More&gt;&gt;Export…&gt;&gt;vCard format (blah, blah …)". </li> <li>Click "Export" button. Download the contacts.vcf. </li> <li>Make sure <a href="https://github.com/trebb/bbdb-vcard">bbdb-vcard.el</a> installed. </li> <li>In Emacs run "M-x bbdb-vcard-import-file" and input the full path of contacts.vcf </li> <li>In Emacs run "M-x bbdb-save" </li> <li>Remove contacts whose names are empty. These are Google Plus people inserted automatically by Gmail: </li> </ul>
<p>Run the command in shell: </p>   <pre class="src src-sh"><span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">the orginal ~/.bbdb will be saved as ~/.bbdb.bak</span>
sed -i.bak <span style="color: #70c0b1;">'/["" ""/d'</span> ~/.bbdb
<p></p></pre>  </div>
            </div>
        </div>
        <div class="post">
            <h1 class="title"><a href="posts/search-the-word-under-cursor-in-stackoverflow-com-and-google-code-search.html">Search at both stackoverflow and google code in Emacs</a></h1>
            <div class="meta">
                <div class="authordate">
                    <time class="timeago" datetime="2013-01-23T09:18:00+00:00">2013-01-23 09:18</time>
</div>
                <div class="stats">
                    
        
    <a href="posts/search-the-word-under-cursor-in-stackoverflow-com-and-google-code-search.html#disqus_thread" data-disqus-identifier="cache/posts/search-the-word-under-cursor-in-stackoverflow-com-and-google-code-search.html">Comments</a>


                </div>
            
        <div itemprop="keywords" class="tags">
        <ul>
        Tags : 
           <li><a class="tag p-category" href="categories/emacs.html" rel="tag">emacs</a></li>
           <li><a class="tag p-category" href="categories/en.html" rel="tag">en</a></li>
           <li><a class="tag p-category" href="categories/programming.html" rel="tag">programming</a></li>
           <li><a class="tag p-category" href="categories/search.html" rel="tag">search</a></li>
           <li><a class="tag p-category" href="categories/stackoverflow.html" rel="tag">stackoverflow</a></li>
        </ul>
</div>

            </div>
            <div class="body">
                <div>
<p></p>
<p>Two programming sites are most valuable to me: </p>
<dl>
<dt>stackoverflow.com</dt>
<dd>solution design and code prototype </dd> <dt>google code search</dt>
<dd>code sample from real product </dd> </dl>
<p> So I write some elisp code w3mext-hacker-search to automate the workflow. </p> <p> Copy the into ~/.emacs and you can use hotkey "C-c ; s" to open search results in external browser (firefox, for example): </p>   <pre class="src src-elisp"><span style="color: #969896; font-style: italic;">; </span><span style="color: #969896; font-style: italic;">external browser should be firefox</span>
(setq browse-url-generic-program
      (<span style="color: #b9ca4a;">cond</span>
       (<em>is-a-mac</em> <span style="color: #70c0b1;">"open"</span>)
       (<em>linux</em> (executable-find <span style="color: #70c0b1;">"firefox"</span>))
       ))
<p><span style="color: #969896; font-style: italic;">;; </span><span style="color: #969896; font-style: italic;">use external browser to search</span></p>
<p>(<span style="color: #b9ca4a;">defun</span> <span style="color: #7aa6da;">w3mext-hacker-search</span> ()
  <span style="color: #c397d8;">"search word under cursor in google code search and stackoverflow.com"</span>
  (interactive)
  (<span style="color: #b9ca4a;">require</span> '<span style="color: #e78c45;">w3m</span>)
  (<span style="color: #b9ca4a;">let</span> ((keyword (w3m-url-encode-string (thing-at-point 'symbol))))
    (browse-url-generic (concat <span style="color: #70c0b1;">"http://code.google.com/codesearch?q="</span> keyword))
    (browse-url-generic (concat <span style="color: #70c0b1;">"http://www.google.com.au/search?hl=en&amp;q="</span> keyword <span style="color: #70c0b1;">"+site:stackoverflow.com"</span> )))
  )</p>
<p>(add-hook 'prog-mode-hook '( lambda () (local-set-key (kbd <span style="color: #70c0b1;">"C-c ; s"</span>) 'w3mext-hacker-search)) )</p>
<p></p></pre>  </div>
            </div>
        </div>
        <div class="post">
            <h1 class="title"><a href="posts/toggle-http-proxy-in-emacs-w3m.html">Toggle http proxy in emacs-w3m</a></h1>
            <div class="meta">
                <div class="authordate">
                    <time class="timeago" datetime="2013-01-04T14:50:00+00:00">2013-01-04 14:50</time>
</div>
                <div class="stats">
                    
        
    <a href="posts/toggle-http-proxy-in-emacs-w3m.html#disqus_thread" data-disqus-identifier="cache/posts/toggle-http-proxy-in-emacs-w3m.html">Comments</a>


                </div>
            
        <div itemprop="keywords" class="tags">
        <ul>
        Tags : 
           <li><a class="tag p-category" href="categories/elisp.html" rel="tag">elisp</a></li>
           <li><a class="tag p-category" href="categories/emacs.html" rel="tag">emacs</a></li>
           <li><a class="tag p-category" href="categories/en.html" rel="tag">en</a></li>
           <li><a class="tag p-category" href="categories/http.html" rel="tag">http</a></li>
           <li><a class="tag p-category" href="categories/proxy.html" rel="tag">proxy</a></li>
        </ul>
</div>

            </div>
            <div class="body">
                <div>
<p></p>
<p><a href="http://www.emacswiki.org/emacs/emacs-w3m">emacs-w3m</a> is a browser embedded in Emacs. It can handle all my basic web surfing needs. </p> <p> For some reason, I need switch my http proxy frequently when accessing the internet in China. So I need figure out a easy way doing this. </p> <p> It turns out all I need to do is to set/unset the environment variable "http_proxy" in elisp code. Restarting the w3m session after change the environment variable is not needed at all. </p> <p> Here is my code: </p>   
<pre class="prettyprint ">

(defun toggle-env-http-proxy ()
  "set/unset the environment variable http_proxy which w3m uses"
  (interactive)
  (let ((proxy "http://127.0.0.1:8000"))
    (if (string= (getenv "http_proxy") proxy)
        ;; clear the proxy
        (progn
          (setenv "http_proxy" "")
          (message "env http_proxy is empty now")
          )
      ;; set the proxy
      (setenv "http_proxy" proxy)
      (message "env http_proxy is %s now" proxy)
        )
    ))
</pre>

<p></p>
</div>
            </div>
        </div>
        <div class="post">
            <h1 class="title"><a href="posts/use-popfile-at-linux.html">Use POPFile at Linux</a></h1>
            <div class="meta">
                <div class="authordate">
                    <time class="timeago" datetime="2012-12-28T13:37:00+00:00">2012-12-28 13:37</time>
</div>
                <div class="stats">
                    
        
    <a href="posts/use-popfile-at-linux.html#disqus_thread" data-disqus-identifier="cache/posts/use-popfile-at-linux.html">Comments</a>


                </div>
            
        <div itemprop="keywords" class="tags">
        <ul>
        Tags : 
           <li><a class="tag p-category" href="categories/email.html" rel="tag">email</a></li>
           <li><a class="tag p-category" href="categories/en.html" rel="tag">en</a></li>
           <li><a class="tag p-category" href="categories/filter.html" rel="tag">filter</a></li>
           <li><a class="tag p-category" href="categories/linux.html" rel="tag">linux</a></li>
           <li><a class="tag p-category" href="categories/popfile.html" rel="tag">popfile</a></li>
           <li><a class="tag p-category" href="categories/spam.html" rel="tag">spam</a></li>
        </ul>
</div>

            </div>
            <div class="body">
                <div>
<p>
CREATED: <span class="timestamp-wrapper"><span class="timestamp">&lt;2012-12-28&gt;</span></span>
</p>

<p>
UPDATED: <span class="timestamp-wrapper"><span class="timestamp">&lt;2015-12-03 Thu&gt;</span></span>
</p>

<p>
<a href="http://getpopfile.org">POPFile</a> automatically sorts my emails.
</p>

<div id="outline-container-sec-1" class="outline-2">
<h3 id="sec-1">
<span class="section-number-2">1</span> Install POPFile</h3>
<div class="outline-text-2" id="text-1">
<p>
Download and extract the zip file to ~/bin/popfile/.
</p>
</div>
</div>

<div id="outline-container-sec-2" class="outline-2">
<h3 id="sec-2">
<span class="section-number-2">2</span> Install third party packages</h3>
<div class="outline-text-2" id="text-2">
<p>
Run:
</p>
<div class="org-src-container">

<pre><code class="lang-sh">sudo cpan DBD::SQLite DBI Date::Format Date::Parse HTML::Tagset HTML::Template IO::Socket::SSL Net::IDN::Encode Mozilla::CA
</code></pre>

</div>

<p>
BTW, don't let cpan detect the mirror site because it takes too much time. Choose the site manually!
</p>

<p>
First question: Would you like automatic setup? Yes!
</p>

<p>
Second quesiton: Set up mirror site for you? No!
</p>

<p>
Third question: Choose one mirror site from the list? No!
</p>

<p>
Forth question: Please input the site manually. <a href="http://mirror.optusnet.com.au/CPAN/">http://mirror.optusnet.com.au/CPAN/</a>
</p>

<p>
This is my cpan setup (Please note I use HTTP proxy which is OPTIONAL),
</p>

<div class="org-src-container">

<pre><code class="lang-perl"># content of /root/.cpan/CPAN/MyConfig.pm
$CPAN::Config = {
  'applypatch' =&gt; q[],
  'auto_commit' =&gt; q[0],
  'build_cache' =&gt; q[100],
  'build_dir' =&gt; q[/root/.cpan/build],
  'build_dir_reuse' =&gt; q[0],
  'build_requires_install_policy' =&gt; q[yes],
  'bzip2' =&gt; q[/bin/bzip2],
  'cache_metadata' =&gt; q[1],
  'check_sigs' =&gt; q[0],
  'colorize_output' =&gt; q[0],
  'commandnumber_in_prompt' =&gt; q[1],
  'connect_to_internet_ok' =&gt; q[1],
  'cpan_home' =&gt; q[/root/.cpan],
  'ftp_passive' =&gt; q[1],
  'ftp_proxy' =&gt; q[],
  'getcwd' =&gt; q[cwd],
  'gpg' =&gt; q[/usr/bin/gpg],
  'gzip' =&gt; q[/bin/gzip],
  'halt_on_failure' =&gt; q[0],
  'histfile' =&gt; q[/root/.cpan/histfile],
  'histsize' =&gt; q[100],
  'http_proxy' =&gt; q[http://127.0.0.1:3128],
  'inactivity_timeout' =&gt; q[0],
  'index_expire' =&gt; q[1],
  'inhibit_startup_message' =&gt; q[0],
  'keep_source_where' =&gt; q[/root/.cpan/sources],
  'load_module_verbosity' =&gt; q[none],
  'make' =&gt; q[/usr/bin/make],
  'make_arg' =&gt; q[],
  'make_install_arg' =&gt; q[],
  'make_install_make_command' =&gt; q[/usr/bin/make],
  'makepl_arg' =&gt; q[INSTALLDIRS=site],
  'mbuild_arg' =&gt; q[],
  'mbuild_install_arg' =&gt; q[],
  'mbuild_install_build_command' =&gt; q[./Build],
  'mbuildpl_arg' =&gt; q[--installdirs site],
  'no_proxy' =&gt; q[],
  'pager' =&gt; q[/usr/bin/less],
  'patch' =&gt; q[/usr/bin/patch],
  'perl5lib_verbosity' =&gt; q[none],
  'prefer_external_tar' =&gt; q[1],
  'prefer_installer' =&gt; q[MB],
  'prefs_dir' =&gt; q[/root/.cpan/prefs],
  'prerequisites_policy' =&gt; q[follow],
  'scan_cache' =&gt; q[atstart],
  'shell' =&gt; q[/bin/bash],
  'show_unparsable_versions' =&gt; q[0],
  'show_upload_date' =&gt; q[0],
  'show_zero_versions' =&gt; q[0],
  'tar' =&gt; q[/bin/tar],
  'tar_verbosity' =&gt; q[none],
  'term_is_latin' =&gt; q[1],
  'term_ornaments' =&gt; q[1],
  'test_report' =&gt; q[0],
  'trust_test_report_history' =&gt; q[0],
  'unzip' =&gt; q[/usr/bin/unzip],
  'urllist' =&gt; [q[http://mirror.optusnet.com.au/CPAN/]],
  'use_sqlite' =&gt; q[0],
  'version_timeout' =&gt; q[15],
  'wget' =&gt; q[/usr/bin/wget],
  'yaml_load_code' =&gt; q[0],
  'yaml_module' =&gt; q[YAML],
};
1;
__END__
</code></pre>

</div>

<p>
Double check installed packages:
</p>

<div class="org-src-container">

<pre><code class="lang-sh">perl -MDBI -e 'print $MIME::DBI::VERSION'
</code></pre>

</div>

<p>
If there is any error:
</p>

<div class="org-src-container">

<pre><code class="lang-sh">perl -V
sudo rm -rf /usr/lib/perl5/site_perl/*
sudo cpan DBD::SQLite DBI Date::Format Date::Parse HTML::Tagset HTML::Template IO::Socket::SSL Net::IDN::Encode MOZILLA::CA
</code></pre>

</div>

<p></p>
</div>
</div>
<div id="outline-container-sec-3" class="outline-2">
<h3 id="sec-3">
<span class="section-number-2">3</span> Setup</h3>
<div class="outline-text-2" id="text-3">
<p>
I only use IMAP. The purpose of tweak POP3 port is only to make the program executable without root permission.
</p>

<p>
See <a href="http://getpopfile.org/docs/howtos:mayneedroot">http://getpopfile.org/docs/howtos:mayneedroot</a> for details.
</p>

<p>
Run the below command to fix the root issue.
</p>
<div class="org-src-container">


<pre><code class="lang-sh">sed -i 's/pop3_port \+110/pop3_port 1110/g' ~/bin/popfile/popfile.cfg
</code></pre>

</div>

<p>
Here is my popfile setup for <a href="http://davmail.sourceforge.net/">Davmail</a>.
</p>

<p>
Davmail is a gateway to convert Outlook/Exchange service to IMAP/POP3). It's required if and only if you use Microsoft's Exchange/Outlook.
</p>

<p>
For other email service, you DON'T need Davmail
</p>

<p>
Please note in my current setup, ssl is disabled because I'm running Davmail Server on my own computer. Or else, you need enable ssl service.
</p>

<div class="org-src-container">

<pre><code class="lang-conf">bayes_bad_sqlite_version 4.0.0
bayes_corpus corpus
bayes_database popfile.db
bayes_dbauth 
bayes_dbconnect dbi:SQLite:dbname=$dbname
bayes_dbuser 
bayes_hostname 192-168-1-3.tpgi.com.au
bayes_localhostname 
bayes_nihongo_parser kakasi
bayes_sqlite_journal_mode delete
bayes_sqlite_tweaks 4294967295
bayes_subject_mod_left [
bayes_subject_mod_pos 1
bayes_subject_mod_right ]
bayes_unclassified_weight 100
bayes_xpl_angle 0
config_pidcheck_interval 5
config_piddir ./
GLOBAL_debug 1
GLOBAL_last_update_check 1407715200
GLOBAL_message_cutoff 100000
GLOBAL_msgdir messages/
GLOBAL_ssl_verify_peer_certs 0
GLOBAL_timeout 60
GLOBAL_update_check 1
history_archive 0
history_archive_classes 0
history_archive_dir archive
history_history_days 2
html_cache_templates 0
html_column_characters 0
html_columns +inserted,+from,+to,-cc,+subject,-date,-size,+bucket
html_date_format 
html_language English
html_last_reset Sat Dec  1 11:06:48 2012
html_local 0
html_page_size 20
html_password b6b3637136ad630eba43aa5ee7106780
html_port 8888
html_search_filter_highlight 0
html_send_stats 1
html_session_dividers 1
html_show_bucket_help 1
html_show_training_help 0
html_skin simplyblue
html_strict_templates 0
html_test_language 0
html_wordtable_format 
imap_bucket_folder_mappings job--&gt;job--&gt;geek--&gt;geek--&gt;business--&gt;business--&gt;ad--&gt;ad--&gt;unclassified--&gt;INBOX--&gt;work--&gt;work--&gt;
imap_enabled 1
imap_expunge 0
imap_hostname localhost
imap_login binc1
imap_password password1
imap_port 1143
imap_training_mode 0
imap_uidnexts work--&gt;749--&gt;job--&gt;5914--&gt;INBOX--&gt;20736--&gt;geek--&gt;5009--&gt;ad--&gt;1296--&gt;business--&gt;15--&gt;
imap_uidvalidities job--&gt;98--&gt;work--&gt;107--&gt;ad--&gt;100--&gt;business--&gt;106--&gt;geek--&gt;99--&gt;INBOX--&gt;2--&gt;
imap_update_interval 1000
imap_use_ssl 0
imap_watched_folders INBOX--&gt;INBOX--&gt;
logger_format default
logger_level 0
logger_logdir ./
nntp_enabled 0
nntp_force_fork 1
nntp_headtoo 0
nntp_local 1
nntp_port 119
nntp_separator :
nntp_socks_port 1080
nntp_socks_server 
nntp_welcome_string NNTP POPFile (v1.1.3) server ready
pop3_enabled 0
pop3_force_fork 1
pop3_local 1
pop3_port 1110
pop3_secure_port 110
pop3_secure_server 
pop3_separator :
pop3_socks_port 1080
pop3_socks_server 
pop3_toptoo 0
pop3_welcome_string POP3 POPFile (v1.1.3) server ready
smtp_chain_port 25
smtp_chain_server 
smtp_enabled 0
smtp_force_fork 1
smtp_local 1
smtp_port 25
smtp_socks_port 1080
smtp_socks_server 
smtp_welcome_string SMTP POPFile (v1.1.3) welcome
xmlrpc_enabled 0
xmlrpc_local 1
xmlrpc_port 8081
</code></pre>

</div>

<p>
The only remaining issue is user name. If it contains "\", you should replace it with "\\" when inputting in Popfile!
</p>

<p></p>
</div>
</div>
<div id="outline-container-sec-4" class="outline-2">
<h3 id="sec-4">
<span class="section-number-2">4</span> Run the program</h3>
<div class="outline-text-2" id="text-4">
<p>
See <a href="http://getpopfile.org/docs/howtos:runlocation">http://getpopfile.org/docs/howtos:runlocation</a> for details.
</p>
<div class="org-src-container">
<pre><code class="lang-sh">cd ~/bin/popfile;perl popfile.pl
</code></pre>

<p></p>
</div>
</div>
</div>
<div id="outline-container-sec-5" class="outline-2">
<h3 id="sec-5">
<span class="section-number-2">5</span> Start the POPFile automatically when bash login</h3>
<div class="outline-text-2" id="text-5">
<p>
Insert below code in ~/.bashrc:
</p>
<div class="org-src-container">
<pre><code class="lang-bash">OS_NAME=`uname -s`
if [ $OS_NAME == Linux ]; then
   # start popfile
   if [ -f $HOME/bin/popfile/popfile.pl ]; then
      # @see http://getpopfile.org/docs/howtos:runlocation
      pop_pid=`ps -ef | grep perl | grep popfile.pl | gawk '{print $2}'`
      if [ "${pop_pid}" = "" ] ; then
         cd $HOME/bin/popfile
         perl popfile.pl &gt;&gt; /dev/null 2&gt;&amp;1 &amp;
      fi
      cd $HOME
   fi
fi
</code></pre>

<p></p>
</div>
</div>
</div>
<div id="outline-container-sec-6" class="outline-2">
<h3 id="sec-6">
<span class="section-number-2">6</span> Start the POPFile systemd service as a user (OPTIONAL)</h3>
<div class="outline-text-2" id="text-6">
<p>
My user name is cb. Put popfile.service in <i>usr/lib/systemd/system</i>. Then run <code>systemctl enable popfile</code> to install service. Run <code>systemctl start popfile</code> to start the service. My Linux distribution is ArchLinux.
</p>
<p>
here is content of popfile.service.
</p>

<div class="org-src-container">

<pre><code class="lang-conf">[Unit]
Description=POPFile (Automatic Email Classification) Service

[Service]
WorkingDirectory=/home/cb/bin/popfile
ExecStart=/usr/bin/perl popfile.pl
User=cb

[Install]
WantedBy=multi-user.target
</code></pre>

</div>

<p></p>
</div>
</div>
<div id="outline-container-sec-7" class="outline-2">
<h3 id="sec-7">
<span class="section-number-2">7</span> Backup</h3>
<div class="outline-text-2" id="text-7">
<p>
Please backup popfile.cfg and popfile.db.
</p>

<p>
See <a href="http://getpopfile.org/docs/howtos:backup">http://getpopfile.org/docs/howtos:backup</a> for details.
</p>
</div>

<p></p>
</div>
<div id="outline-container-sec-8" class="outline-2">
<h3 id="sec-8">
<span class="section-number-2">8</span> Summary</h3>
<div class="outline-text-2" id="text-8">
<ul class="org-ul">
<li>Portable
</li>
<li>No root privilege needed
</li>
<li>No X windows needed. I can manage mails in remote shell
</li>
</ul>
</div>
</div>
</div>
            </div>
        </div>
        <div class="post">
            <h1 class="title"><a href="posts/emacs-lisp-bin-bu-nan-xue.html">Emacs Lisp并不难学</a></h1>
            <div class="meta">
                <div class="authordate">
                    <time class="timeago" datetime="2012-11-29T21:00:00+00:00">2012-11-29 21:00</time>
</div>
                <div class="stats">
                    
        
    <a href="posts/emacs-lisp-bin-bu-nan-xue.html#disqus_thread" data-disqus-identifier="cache/posts/emacs-lisp-bin-bu-nan-xue.html">Comments</a>


                </div>
            
        <div itemprop="keywords" class="tags">
        <ul>
        Tags : 
           <li><a class="tag p-category" href="categories/elisp.html" rel="tag">elisp</a></li>
           <li><a class="tag p-category" href="categories/emacs.html" rel="tag">emacs</a></li>
           <li><a class="tag p-category" href="categories/essential.html" rel="tag">essential</a></li>
           <li><a class="tag p-category" href="categories/lisp.html" rel="tag">lisp</a></li>
           <li><a class="tag p-category" href="categories/zh.html" rel="tag">zh</a></li>
        </ul>
</div>

            </div>
            <div class="body">
                <div>
<p></p>
<p>作者:陈斌 (redguardtoo) </p> <p> 原创日期: <span class="timestamp-wrapper"> <span class="timestamp">2012-11-30 五</span></span> </p> <p> 本文的目的是把Lisp去神秘化. </p> <p> 我学的是Emacs Lisp(Emacs Lisp),开发环境也是Emacs.所以我举的例子都是只基于Elisp. </p> <p> 本文针对的读者是有相当经验的开发者,目的是尽可能简明扼要地突出重点. </p> <p> 我对于目前的主流开发语言都很熟悉,但是Lisp还只能算是入门水准,所以错过很多Lisp精彩之处是很可能的. </p> <p> 我所谓的重点,主要是指Lisp对于开发一个现实世界的产品有什么优点. </p>  <div id="outline-container-1" class="outline-3"> <h4 id="sec-1">所有的函数和数据可以在系统运行时改变</h4> <div class="outline-text-3" id="text-1">  <p>其意义是,假设你一个系统上线了,你可以随时改变正在运行的代码,不需要重启系统. </p> <p> 我的理解是,一个函数实际上就是带有字符串Key(该key就是函数名)的数据,运行某个函数就是在系统运行时根据Key找到对应的数据(或者代码,在Lips中是一回事)运行之. </p> <p> 例如,我可以在hook中申明某个函数将被调用,而这个函数的定义可以还不存在.系统在<em>运行时</em>才会去寻找这个函数.解释一下,hook可以认为是事件触发机制,就是在系统运行的某个时刻调用用户自定义的函数) </p> <p> 优点是灵活性很高.缺点是Lisp写的东西快不了. </p>
</div>  </div>  <div id="outline-container-2" class="outline-3"> <h4 id="sec-2">没有namespace,所有的函数默认都是可以全局访问的</h4> <div class="outline-text-3" id="text-2">  <p>正因为这两条,所以要多打字(每个函数都要手动输入名字前缀). </p> <p> 这点我完全可以接受,没有namespace就是多打点字而已.那些不了解历史或者没有用过C的初级程序员可能会大惊小怪.实际上没什么大不了的. </p> <p> 所有函数都可以访问在Emacs场景下有个巨大的优点,见下一条. </p>
</div>  </div>  <div id="outline-container-3" class="outline-3"> <h4 id="sec-3">defadivce可以改变系统中任意函数的行为.</h4> <div class="outline-text-3" id="text-3">  <p>defadvice可以重定义系统中的任意函数.原因如前文所说. </p>
</div>  </div>  <div id="outline-container-4" class="outline-3"> <h4 id="sec-4">循环语句和条件判断语句</h4> <div class="outline-text-3" id="text-4">  <p>和其他语言没什么不同,foreach之类的语法糖也不少. </p> <p> 我唯一不喜欢的是没有C中的return,break,和continue语句,这样的缺点是有可能让代码嵌套过深. </p> <p> 不过不是什么大不了的问题,Lisp也提供了一些替代语法. </p> <p> 另外其他所有语言提供了这些语法糖又怎么样呢,我遇到的超过50%的程序员还是一样瞎写. </p>
</div>  </div>  <div id="outline-container-5" class="outline-3"> <h4 id="sec-5">不同寻常的语法</h4> <div class="outline-text-3" id="text-5">  <p>Lisp语法是操作符号在前,被操作对象在后. </p> <p> 例如2+3+4,在Lisp的语法中是这样的: </p>   <pre class="src src-elisp">(+ 2 3 4)
</pre>   <p> 所有的语法都是这样的前缀表达式(<a href="http://zh.wikipedia.org/wiki/%E6%B3%A2%E5%85%B0%E8%A1%A8%E7%A4%BA%E6%B3%95">Polish Notation</a>),很多人不习惯这样的语法,但是它有一些突出优点: </p> <ol>
<li>这样的语法做语法解析特别容易,所以第三方支持工具很容易开发. 在大规模系统开发时,这点很有用.例如,分析大型项目的源代码时,你能唯一依靠的grep和正则表达式,ELisp简单严格的语法使得正则表达式很好写.  </li> <li>实际编程时少打很多运算符号,这对于有实战经验的程序员是巨大的优点.如果你和我说什么重要的是思想和设计模式,打字速度不重要,那么菜鸟请走开.  </li> <li>最重要的优点是,这种语法相当于一种过滤机制,能够接受这种语法的人通常都是头脑比较开放思维敏捷的人.说到底产品开发的决定性因素是人,所以这个能过滤人的优点是决定性的. </li> </ol>
</div>  </div>  <div id="outline-container-6" class="outline-3"> <h4 id="sec-6">函数可内嵌文档,且该文档可被Emacs帮助系统调用</h4> <div class="outline-text-3" id="text-6">  <p>现在能做到这点的系统也没几家.从细节我们可以看出Emacs和Elisp的完美之处. </p>
</div> </div> </div>
            </div>
        </div>
        <div class="post">
            <h1 class="title"><a href="posts/how-to-manage-and-use-tags-file-of-third-party-libraries-in-emacs.html">How to use ctags with Emacs effectively</a></h1>
            <div class="meta">
                <div class="authordate">
                    <time class="timeago" datetime="2012-11-22T12:35:00+00:00">2012-11-22 12:35</time>
</div>
                <div class="stats">
                    
        
    <a href="posts/how-to-manage-and-use-tags-file-of-third-party-libraries-in-emacs.html#disqus_thread" data-disqus-identifier="cache/posts/how-to-manage-and-use-tags-file-of-third-party-libraries-in-emacs.html">Comments</a>


                </div>
            
        <div itemprop="keywords" class="tags">
        <ul>
        Tags : 
           <li><a class="tag p-category" href="categories/ctags.html" rel="tag">ctags</a></li>
           <li><a class="tag p-category" href="categories/emacs.html" rel="tag">emacs</a></li>
           <li><a class="tag p-category" href="categories/en.html" rel="tag">en</a></li>
        </ul>
</div>

            </div>
            <div class="body">
                <div>
<p></p>
<p>  See <a href="http://emacswiki.org/emacs/EmacsTags">http://emacswiki.org/emacs/EmacsTags</a> for general usage of tags file. A file name of tags files is 'TAGS' by default. But in Emacs manual the 'tags file' is named 'tags table'. Either 'tags file' or 'tags table' or 'TAGS' is only different name for the same thing. </p> <p>   According wiki page, people usually use ctags to do two things, </p>
<ol>
<li>Code navigation </li> <li>Auto-complete/Intellisense  <p>   In my opinion, ctags is OK for code navigation because it's integrated into Emacs well and ctags supports more programming language. But ctags only uses regular expression to analyze the code. So it's not as precise as professional tools like <a href="http://cscope.sourceforge.net/">cscope</a> or <a href="http://www.gnu.org/software/global">GNU Global</a>. According to my own experience, ctags plus grep is actually good enough for code navigation in big enterprise projects with mixed environments. If you are among a few talented geeks who are developing Linux kenel in the most efficient way, you should use better tools like <a href="http://www.gnu.org/software/global">GNU Global</a>. See the head up from <a href="https://plus.google.com/113859563190964307534/posts/Ayr687eH451">Nick Alcock</a>. His summary of the Pro/Con of GNU Global is great. </p> <p>   Intellisense is a different story. For programming languages like Javascript, ctags provide some intellisense with is better than nothing. C++ is a more complex language which is a litter harder for ctags to handle unless you are not using those "advanced" features of C++. </p> <p>   I found one missing piece from Emacswiki is the tip on how to <b>manage tags file</b> easily when the TAGS is built from some code of third party libraries (<a href="http://http://en.wikipedia.org/wiki/Qt_(framework)">QT</a>, <a href="http://www.wxwidgets.org">wxWidgets</a>, <a href="http://www.gtk.org">GTK</a>, <a href="http://www.boost.org">Boost</a>, just name a few). </p> <p>   My typical work flow is: </p>
</li> <li>Load the tags file for my own code. </li> <li>Load other tags files built from third party libraries related to my current task. </li> <li>Unload third party tags immediately if its not needed.  <p>   The purpose to load tags files is to look up API easily. For example, I use C++ library <a href="http://wxwidgets.org">wxWidgets</a> to develop my application. I want to use its API called wxWindow::Maximize. I type 'M-x find-tag" and input the keyword "Maximize". So I can check the function definition and know what parameters I need fill in to use "Maximize". </p> <p>   The reason to do the unload thing is to avoid function name confliction from some tags files. Emacswiki has a section "Choosing Among Multiple Tags for the Same Name" to solve this problem. But unloading is more convenient. In theory, it would be annoying if I need repeat load and unload the same tags files. In reality, it seldom happens because if I need work on Javascript (so I unload C++ related TAGS), I will usually keep working on Javascript until the end of the day. </p>
</li> </ol>
<div id="outline-container-1" class="outline-3"> <h4 id="sec-1">Produce tags files for all the environments</h4> <div class="outline-text-3" id="text-1">  <p>For exmaple, I produce tags files of Library A for Mac and Linux. I put tags file from Mac at directory "/home/cb/tags/Library_A/mac" and file from Linux at "/home/cb/tags/Library_A/linux" </p>
</div>  </div>  <div id="outline-container-2" class="outline-3"> <h4 id="sec-2">Use git and github to manage the tags files</h4> <div class="outline-text-3" id="text-2">  <p>So I can have copies of the tags files at github server and my local computers. That's also a part of my strategy to setup the development environment. My projects on different computers usually use same external library. </p> <p> Emacswiki discusses how to update your tags file frequently because your own code are updated frequently. But the tags file from a big library like wxWidgets need not be updated to often because I only use limited old APIs in that library. </p>
</div>  </div>  <div id="outline-container-3" class="outline-3"> <h4 id="sec-3">Write emacs lisp code to load/unload these tags files</h4> <div class="outline-text-3" id="text-3">  <p>Here is the code. In this example, if I need load tags file for <a href="http://www.wxwidgets.org">wxWidgets</a>, I call the function "add-wx-tags". If I need unload the tags file, I press "Ctrl-u" and call the same function "add-wx-tags". Since I use <a href="http://www.emacswiki.org/Smex">Smex</a>, calling function doesn't mean pressing many keys. </p>   
<pre class="prettyprint lang-lisp">
; Set up tags built from third party libraries ===begin
; define tags alias like "wx-tags" here
(setq wx-tags (expand-file-name "~/tags/wx/osx/TAGS"))

; @see &lt;Selecting a Tags Table&gt; in Emacs manual for details.
; We only change the list "tags-table-list". It is documented officialy.
(defun insert-into-tags-table-list(e)
  (add-to-list 'tags-table-list e t)
  )

(defun delete-from-tags-table-list (e)
  (setq tags-table-list (delete e tags-table-list))
  )

; This is a sample command, all you need is copy/paste this template
; for other new commands
(defun add-wx-tags (&amp;optional del)
  "Add or delete(C-u) wxWidgets tags into tags-table-list"
  (interactive "P")
  (let (mytags)
    ; here add your third party tags files
    ; Usually you need load/unload tags files combination in one command
    ; change below line to add them
    (setq mytags (list wx-tags))
    (if del (mapc 'delete-from-tags-table-list mytags)
      (mapc 'insert-into-tags-table-list mytags)
      )
    )
  )
; === end
</pre>

<p></p>
<p> This solution only uses one standard variable "tags-table-list" in Emacs. So it will always work with any other Emacs plugins you install. And you can use all the old hotkeys and functions ("find-tag", for example) without any problem. </p> <p> See <a href="http://www.gnu.org/software/emacs/manual/html_node/emacs/Select-Tags-Table.html">Emacs manual</a> for technical details. </p>
</div> </div> </div>
            </div>
        </div>
    
        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-8.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-6.html" rel="next">Older posts</a>
            </li>
        </ul></nav><script>var disqus_shortname="chenbin0";(function(){var a=document.createElement("script");a.async=true;a.src="https://"+disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)}());</script><footer id="footer"><p>Contents © 2016         <a href="mailto:chenbin.sh@gmail.com">Chen Bin</a> - Powered by         <a href="http://getnikola.com" rel="nofollow">Nikola</a>         </p>
            
        </footer>
</div>
    </section><script src="assets/js/all-nocdn.js" type="text/javascript"></script><script type="text/javascript">
            $(function(){
                $('.timeago').timeago();
            });
        </script>
</body>
</html>
