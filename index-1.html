<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# " lang="en">
    <head>
    <meta charset="utf-8">
    <meta name="description" content="Linux, Programming, Emacs">
    <meta name="viewport" content="width=device-width">
    <title>Chen's blog (old posts, page 1) | Chen's blog</title>

    
            <link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">

    
            <link rel="alternate" type="application/rss+xml" title="RSS" href="rss.xml">

      <link rel="canonical" href="http://blog.binchen.org/index-1.html">



    
        <!--[if lt IE 9]><script src="/assets/js/html5.js"></script><![endif]-->

    





</head>
<body>
    <section class="social">
        <ul>
        
            <li><a href="index.html" title="Home"><i class="icon-home"></i></a></li>
            <li><a href="archive.html" title="Archives"><i class="icon-folder-open-alt"></i></a></li>
            <li><a href="categories/index.html" title="Tags"><i class="icon-tags"></i></a></li>
            <li><a href="rss.xml" title="RSS"><i class="icon-rss"></i></a></li>
            <li><a href="stories/about.html" title="About me"><i class="icon-user"></i></a></li>
            <li><a href="https://twitter.com/chen_bin" title="My Twitter"><i class="icon-twitter"></i></a></li>
            <li><a href="https://github.com/redguardtoo" title="My Github"><i class="icon-github"></i></a></li>

        </ul>
    </section>
    <section class="page-content">
        <div class="content" rel="main">
            
        <div class="post">
            <h1 class="title"><a href="posts/one-line-linux-cli-to-remove-span-tag.html">One-line Linux CLI to remove span tag</a></h1>
            <div class="meta">
                <div class="authordate">
                    <time class="timeago" datetime="2011-05-12T15:00:00+00:00">2011-05-12 15:00</time>
                </div>
                <div class="stats">
                    
        
    <a href="posts/one-line-linux-cli-to-remove-span-tag.html#disqus_thread" data-disqus-identifier="cache/posts/one-line-linux-cli-to-remove-span-tag.html">Comments</a>


                </div>
            
        <div itemprop="keywords" class="tags">
        <ul>
        Tags : 
           <li><a class="tag p-category" href="categories/blog.html" rel="tag">blog</a></li>
           <li><a class="tag p-category" href="categories/cms.html" rel="tag">cms</a></li>
           <li><a class="tag p-category" href="categories/en.html" rel="tag">en</a></li>
           <li><a class="tag p-category" href="categories/linux.html" rel="tag">linux</a></li>
        </ul>
        </div>

            </div>
            <div class="body">
                <div>
<p></p>
<p>Some CMS are too smart to handle &lt;span&gt; tag properly. </p> <p> I have to copy the content into clipboard, remove the span tag, and paste it back into CMS. </p> <p> Actually all the trouble could be saved by one line linux command, </p>   <pre class="src src-sh">xclip -o|sed <span style="color:#802a55;">'s%&lt;/<em>span[^&gt;]</em>&gt;%%g'</span>|xclip -selection c
</pre>
</div>
            </div>
        </div>
        <div class="post">
            <h1 class="title"><a href="posts/linux-zhuo-mian-shi-yong-zhi-dao.html">Linux桌面使用之道</a></h1>
            <div class="meta">
                <div class="authordate">
                    <time class="timeago" datetime="2011-05-08T16:08:00+00:00">2011-05-08 16:08</time>
                </div>
                <div class="stats">
                    
        
    <a href="posts/linux-zhuo-mian-shi-yong-zhi-dao.html#disqus_thread" data-disqus-identifier="cache/posts/linux-zhuo-mian-shi-yong-zhi-dao.html">Comments</a>


                </div>
            
        <div itemprop="keywords" class="tags">
        <ul>
        Tags : 
           <li><a class="tag p-category" href="categories/desktop.html" rel="tag">desktop</a></li>
           <li><a class="tag p-category" href="categories/linux.html" rel="tag">linux</a></li>
           <li><a class="tag p-category" href="categories/software.html" rel="tag">software</a></li>
           <li><a class="tag p-category" href="categories/zh.html" rel="tag">zh</a></li>
        </ul>
        </div>

            </div>
            <div class="body">
                <div>
<p></p>
<p>作者: 陈斌(redguardtoo) </p> <p> 注意: 我会长期维护本文,请参考下面的更新时间 </p> <p> 更新时间: <span class="timestamp-wrapper"> <span class="timestamp">2014-04-14 Mon</span></span> </p> <p> 原创时间: <span class="timestamp-wrapper"> <span class="timestamp">2011-05-08 日</span></span> </p> <p> 这是为有志于成为顶尖Linux Geek的中级Linux用户而写的入门指导. </p> <p> 本文的重点是如何高效地使用Linux桌面软件. </p>  <div id="outline-container-1" class="outline-3"> <h4 id="sec-1">为什么你的Linux水准原地踏步</h4> <div class="outline-text-3" id="text-1">   </div>  <div id="outline-container-1-1" class="outline-4"> <h5 id="sec-1-1">消费主义</h5> <div class="outline-text-4" id="text-1-1">  <p>Linux下的免费软件很多,许多人就要把所有有趣的软件都玩遍.这就和高富帅收集跑车,白富美收集包包一个概念.但是问题的关键是时间都被浪费了,学习Linux的初衷被丢之脑后. </p>
</div>  </div>  <div id="outline-container-1-2" class="outline-4"> <h5 id="sec-1-2">自我主义</h5> <div class="outline-text-4" id="text-1-2">  <p>例如,拒绝使用更好的软件,因为"我习惯了老的软件"或者"我写了脚本可以实现类似功能"或者"我的人生哲学等等" </p>
</div>  </div>  <div id="outline-container-1-3" class="outline-4"> <h5 id="sec-1-3">缺乏经验,轻信他人</h5> <div class="outline-text-4" id="text-1-3">  <p>典型的就是如果有个新的最酷的文本编辑器出来了.你立即丢弃了你正在用的Emacs,因为你轻信了新软件的广告.一旦那个软件停止升级,发觉你在其上时间精力投资也就白费了.也许在转投阵营前调查软件后面的人(用户和开发者)可能更好一点. </p> <p> 又比如有个开源界的知名人士宣称Unix的原则就是很多小的独立的程序通过纯文本协议相互作用.在你把这当成黄金法则到处乱应用之前,也许你应该了解一下该大牛讲话的风格就是比较偏激的. </p>
</div>  </div>  <div id="outline-container-1-4" class="outline-4"> <h5 id="sec-1-4">自我管理差</h5> <div class="outline-text-4" id="text-1-4">  <p>年青的我就是最好的反面典型.当时我自认为自己智商高,记忆力好,所以学到有用的知识后没有记下来,后来全忘了. </p> <p> 现在我醒悟了,我会写下心得,公开发表,同时增量备份到全世界至少三个服务器上.在若干年内不断的维护改进. </p> <p> 比如我写的<a href="https://github.com/redguardtoo/mastering-emacs-in-one-year-guide/blob/master/guide-zh.org">一年成为Emacs高手</a>就是一个活生生的例子. </p>
</div> </div>  </div>  <div id="outline-container-2" class="outline-3"> <h4 id="sec-2">哲学</h4> <div class="outline-text-3" id="text-2">   </div>  <div id="outline-container-2-1" class="outline-4"> <h5 id="sec-2-1">长期投资</h5> <div class="outline-text-4" id="text-2-1">  <p>软件对我而言是长期投资.所以我会花很多时间学习软件的快捷键(快捷键长期来说操作比鼠标高效),那种只能用鼠标操作的软件对我来说就是"坏"软件. </p>
</div>  </div>  <div id="outline-container-2-2" class="outline-4"> <h5 id="sec-2-2">理性思维</h5> <div class="outline-text-4" id="text-2-2">  <p>以文件管理器来说,在Windows平台下我长期使用并热爱Total Commander,在Linux下平台下也有几款文件管理器在界面和功能上和Total Commander上非常接近,自然从感情上讲我会爱屋及乌.但是我最后还是选择了以Emacs作为主要的文件管理器,以丑陋的Midnight Commander为辅助,因我已确定选择软件的总的原则是尽可能用少的的软件做尽可能多的事.具体说来就是以Emacs做任何事,如果一定要用其他软件辅助Emacs,快捷键也应是Emacs的.Midnight Commander符合该条件 </p>
</div>  </div>  <div id="outline-container-2-3" class="outline-4"> <h5 id="sec-2-3">科学方法</h5> <div class="outline-text-4" id="text-2-3">  <p>细节见后文,我要强调的是我的工具和方法都是有高手验证过,有官方文档支持.对我而言,科学的含义,就是前人反复验证过的,过去100%成功也许能保证现在将来可能成功(因工具环境不断在变化,所以只是有可能).除此以外都不叫科学. </p>
</div>  </div>  <div id="outline-container-2-4" class="outline-4"> <h5 id="sec-2-4">以人为本</h5> <div class="outline-text-4" id="text-2-4">  <p>在后文我会列出一些筛选软件的方法.也会推荐一些软件.但你决不要认为只要用了这些软件或者记住了我的方法就能成为高手了.这只是敲门砖而已. </p> <p> 实际上我推荐的不是软件,而是人.这些软件和用户和开发者是一个精英荟萃的圈子.重要的是你要理解这个圈子的风格. </p>
</div> </div>  </div>  <div id="outline-container-3" class="outline-3"> <h4 id="sec-3">少而精</h4> <div class="outline-text-3" id="text-3">  <p>软件数量少,品质高,功能强,依赖小,界面通用. </p> </div>  <div id="outline-container-3-1" class="outline-4"> <h5 id="sec-3-1">数量少</h5> <div class="outline-text-4" id="text-3-1">  <p>这点很重要,只有需要使用的软件少(但是完成的工作一分都不能少),才可能精通. </p> <p> 软件少的另外一个好处是维护省心,例如你发觉某个软件的快捷键和另一未知软件有冲突,找出另一个未知软件的工作量和你在系统上安装的软件数量有重大关系. </p>
</div>  </div>  <div id="outline-container-3-2" class="outline-4"> <h5 id="sec-3-2">品质高</h5> <div class="outline-text-4" id="text-3-2">  <p>我对于品质的要求很简单: </p>
<ul> <li>久经考验(例如Emacs的开发历史有35年以上) </li> <li>聪明人认同 </li> </ul>   <p> 何为久经考验,何为聪明人,我相信是可以找出很多客观的指标的.指标越严格,筛选结果就越少. </p>
</div>  </div>  <div id="outline-container-3-3" class="outline-4"> <h5 id="sec-3-3">功能强</h5> <div class="outline-text-4" id="text-3-3">  <p>原谅我又用Emacs举例,用Emacs可以看网页,收邮件,写程序,做笔记,写博客,读rss. </p> <p> 附带说明一下,在我罗列的这些功能中,Emacs都是极为优秀,很少有同类软件可以媲美. </p> <p> 事实上,功能强的终极境界就是提供了一个无所不能的可编程平台. </p>
</div>  </div>  <div id="outline-container-3-4" class="outline-4"> <h5 id="sec-3-4">依赖小</h5> <div class="outline-text-4" id="text-3-4">  <p>例如,命令行软件不依赖于QT,GTK之类图形界面库,安装包小很多,运行时消耗内存也小,启动快. </p>
</div>  </div>  <div id="outline-container-3-5" class="outline-4"> <h5 id="sec-3-5">界面通用</h5> <div class="outline-text-4" id="text-3-5">  <p>例如,我写程序用emacs,一般操作用bash shell,文件管理用Midnight Commander(mc),上网用Firefox,但是通过适当的设置(Firefox需要安装插件keysnail,其他软件只要用最新版即可),他们的快捷键都是Emacs的. </p>
</div> </div>  </div>  <div id="outline-container-4" class="outline-3"> <h4 id="sec-4">软件推荐</h4> <div class="outline-text-3" id="text-4">   </div>  <div id="outline-container-4-1" class="outline-4"> <h5 id="sec-4-1">编辑器</h5> <div class="outline-text-4" id="text-4-1">  <p>我用Emacs,考虑到它可以做任何事,可以认为它是轻量级的. </p> <p> Vim也用,万不得已用nano,结束了. </p>
</div>  </div>  <div id="outline-container-4-2" class="outline-4"> <h5 id="sec-4-2">浏览器</h5> <div class="outline-text-4" id="text-4-2">  <p>Firefox.它是自由软件,所以有很多顶尖Geek为其写插件.例如<a href="https://github.com/mooz/keysnail/wiki">keysnail</a>可以把Firefox的快捷键设置为Emacs的快捷键.所以我可以不用鼠标浏览网页. </p>
</div>  </div>  <div id="outline-container-4-3" class="outline-4"> <h5 id="sec-4-3">Shell</h5> <div class="outline-text-4" id="text-4-3">  <p>我用bash,在我的.bashrc中有如下一行, </p>   
<pre class="prettyprint ">

export HISTSIZE=200000
</pre>

<p></p>
<p> 确保我输入的所有命令都不会丢失,我偏爱命令行软件,但是记命令会消耗我很多脑细胞,所以我让shell替我记住.我只要记住按Ctrl+R可搜索历史就好了. </p> <p> 其他有用的选项还很多.这只是个例子,说明Bash是可编程的. </p>
</div>  </div>  <div id="outline-container-4-4" class="outline-4"> <h5 id="sec-4-4">桌面</h5> <div class="outline-text-4" id="text-4-4">  <p>Gnome,KDE是绝对不会考虑的.我使用更轻量级的<a href="http://i3wm.org/">i3</a>. </p> <p> i3的优点是平铺桌面(例如左边开一个窗口写代码,右边开个窗口看PDF文档)极为方便,学习曲线很低(同类软件我大概试用过10多个了,包括主流的Gnome,KDE,XFCE4). </p>
</div>  </div>  <div id="outline-container-4-5" class="outline-4"> <h5 id="sec-4-5">其他</h5> <div class="outline-text-4" id="text-4-5">  <ul> <li>联网我自己写脚本,因为GUI工具如wicd之类的依赖多而且曾经折腾过我. </li> <li>听音乐我用命令行工具mpd和mpc </li> <li>播放视频我用<a href="http://www.mplayerhq.hu">mplayer</a>(命令行),等等. </li> <li>硬盘清理我用bleachbit(清理常用软件产生的临时文件),localepurge(删除无用的多国语言),ncdu(检查硬盘如何被占用) </li> <li>文件管理器我用Midnight Commander.其键盘快捷键可设置为Emacs的快捷键,对于我这种记不住快捷键的人很有用. </li> </ul>  </div> </div>  </div>  <div id="outline-container-5" class="outline-3"> <h4 id="sec-5">软件的使用也需维护</h4> <div class="outline-text-3" id="text-5">  <p>安装软件在包管理系统的帮助下很简单.麻烦的是最新软件有时候不稳定,这通常是因为软件的配置文件更新引起的. </p> </div>  <div id="outline-container-5-1" class="outline-4"> <h5 id="sec-5-1">将/etc目录下的默认配置文件备份</h5> <div class="outline-text-4" id="text-5-1">  <p>Linux的软件默认配置文件在/etc/目录下. 我使用分布式版本控制软件<a href="http://git-scm.com/">git</a>管理/etc目录,分布式版本控制系统好处很多,最大好处就是数据到处有完整备份,非常安全.具体细节请参考<a href="http://en.wikipedia.org/wiki/Distributed_revision_control_system">wikipedia</a>. </p> <p> 在Linux上更新完系统或者安装最新软件包后,可以考虑手动将/etc目录下的文件用git备份. </p>   
<pre class="prettyprint ">

sudo git add /etc/

sudo git commit -am "backup"
</pre>

<p></p>
<p> 一旦某软件工作不正常了,可以检查其/etc下默认配置文件的修改纪录,将配置文件恢复到上一个正常工作的版本. </p>   
<pre class="prettyprint ">

sudo git log /etc/mysql/my.cnf #check history

sudo git checkout commit_ref(version) /etc/mysql/my.cnf #restoren file
</pre>

<p></p>
</div>  </div>  <div id="outline-container-5-2" class="outline-4"> <h5 id="sec-5-2">将用户目录下的用户定制配置文件备份</h5> <div class="outline-text-4" id="text-5-2">  <p>我也用git将个人用户的配置文件(在/home/username/下的配置文件)备份到<a href="http://www.github.com">github</a>的服务器上.这里必须用第三方服务器同步配置,因为我使用多台电脑. </p> <p> 具体操作可写成长篇大论,这里不展开了. </p>
</div>  </div>  <div id="outline-container-5-3" class="outline-4"> <h5 id="sec-5-3">将软件版本降级</h5> <div class="outline-text-4" id="text-5-3">  <p>最新版本的软件可能不稳定,这时降级是必要的. </p> <p> 对于Arch Linux来说很简单,请参考<a href="https://wiki.archlinux.org/index.php/Downgrading_Packages">Archwiki</a>,实际上很简单,安装名为downgrade的软件,然后让它干所有的体力活就行了. </p>   
<pre class="prettyprint ">

packer downgrade
</pre>

<p></p>
<p> 对于其他主流的Linux发行版如Centos或者Ubuntu来说,由于包的测试周期比较长,所以不会有不稳定的问题. </p> <p> 对于小众版本来说(例如我现在实用Gentoo Linux),更好的策略是不要随意使用最新版本的软件. </p>
</div>  </div>  <div id="outline-container-5-4" class="outline-4"> <h5 id="sec-5-4">云备份</h5> <div class="outline-text-4" id="text-5-4">  <p>电子图书,多媒体文件用专业的云备份服务更好,我推荐<a href="https://www.getdropbox.com/referrals/NTg1ODg2Mjk">Dropbox</a>. </p> <p> Dropbox实在是妙用无穷(例如,国外有人把Dropbox和git结合使用),我只是用了其最简单的功能. </p> <p> 顺便说一下,国内的服务不要用,安全原因,不言自明. </p>
</div>  </div>  <div id="outline-container-5-5" class="outline-4"> <h5 id="sec-5-5">备份操作系统</h5> <div class="outline-text-4" id="text-5-5">  <p>不用经常作,又有云备份,又有分布式版本控制系统,怕什么. </p> <p> 备份整个硬盘是用<a href="http://clonezilla.org/">Clonezilla</a>,只是备份操作系统的话用以下命令, </p>   
<pre class="prettyprint ">

tar zcvpf mylinux.tgz --exclude=/proc/* --exclude=/lost+found --exclude='mylinux.tgz' --exclude=/mnt/* --exclude=/home/username/* --exclude=/sys/* /
</pre>

<p></p>
<p> 我建议用前者,因为省事. </p> <p> 假设你采用clonezilla备份操作系统,我建议将/目录(操作系统目录)和/home目录放在两个分区内. </p> <p> 如果能够按照我前面的少而精的原则选择软件的话,操作系统目录的分区并不需要很大(8G足够了),目前我的常用软件和操作系统的所占空间控制在3G左右(我的例子比较极端,因为我的netbook只有4G硬盘),这样clonezilla的操作就很快. </p>
</div>  </div>  <div id="outline-container-5-6" class="outline-4"> <h5 id="sec-5-6">阅读官方文档</h5> <div class="outline-text-4" id="text-5-6">  <p>阅读官方和社区文档. </p> <p> Ubuntu社区的特点用户多,少见的bug一般都会在该社区报告.缺点是其文档深度不够. </p> <p> Arch Linux和Gentoo Linux的特点是用户一般水准较高,所以文档技术含量很高. </p>
</div>  </div>  <div id="outline-container-5-7" class="outline-4"> <h5 id="sec-5-7">虚拟机的用处</h5> <div class="outline-text-4" id="text-5-7">  <p>我虚拟机软件使用VirtualBox,虚拟机为Windows XP,该操作系统我会定期更新安全补丁.软件只安装了IE和firefox.该操作系统我只用来操作网络银行.每次操作完毕,我会重置虚拟机状态到操作前的snapshot. </p>
</div> </div>  </div>  <div id="outline-container-6" class="outline-3"> <h4 id="sec-6">常用软件的诊断修复</h4> <div class="outline-text-3" id="text-6">  <p>即使采用了上述做法,一年中也会有一次倒霉.就是我要用的某个版本的某个软件出问题了.没人能帮忙,不能降级,改软件配置也没用,也没有可用的错误信息. </p> <p> 问题看起来很难,事实上5分钟就能搞定.这往往是因为某软件需要的第三方库的版本出问题了. </p> <p> 比如说firefox不能启动,运行如下命令调试, </p>   
<pre class="prettyprint ">

strace -o err.txt firefox
</pre>

<p></p>
<p> 读一下err.txt就可以知道是哪个库出问题了.相信我,这是不需要任何编程知识的,猜加google就可以了. </p> <p> 你知道哪个库文件出问题了(保险起见,ldd firefox确认一下).比如/usr/lib/libpng.so.14找不到,简单的解决办法是用另一个版本的库文件代替. </p> <p> 如果/usr/lib/libpng.so.15是存在的,我们可以用该库顶替libpng.so.14, </p>   
<pre class="prettyprint ">

sudo ln -s /usr/lib/libpng.so.15 /usr/lib/libpng.so.14
</pre>

<p></p>
<p> 通常这样就行了. </p> <p> 万一冒名顶替不行,我们就必须根据丢失的库文件查找需要安装的软件包. </p> <p> 以Arch Linux为例(其他发行版也有类似功能): </p>   
<pre class="prettyprint ">

pkgfile libpng
</pre>

<p></p>
<p> pkgfile属于软件包pkgtools,所以你必须安装pkgtools, </p>   
<pre class="prettyprint ">

packer -S pkgtools-git
</pre>

<p></p>
</div>  </div>  <div id="outline-container-7" class="outline-3"> <h4 id="sec-7">系统启动失败的修复</h4> <div class="outline-text-3" id="text-7">  <p>解决方法很简单,用常见的Linux启动光盘启动,然后chroot,其作用是以指定目录作为操作系统根目录(root directory),然后以此根目录为基准建立一个新的环境. </p> <p> 细节请参考<a href="https://wiki.archlinux.org/index.php/Change_Root">https://wiki.archlinux.org/index.php/Change_Root</a>. </p> <p> 比如说我升级kernel后系统启动失败,而老的kernel没有备份,我可以光盘启动电脑,然后chroot,再使用上文所提的工具升级或者降级kernel. </p>
</div>  </div>  <div id="outline-container-8" class="outline-3"> <h4 id="sec-8">书籍推荐</h4> <div class="outline-text-3" id="text-8">  <table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides"> <caption></caption> <colgroup>
<col class="left">
<col class="left"> </colgroup> <thead> <tr>
<th scope="col" class="left">书籍</th>
<th scope="col" class="left">评论</th>
</tr> </thead> <tbody> <tr>
<td class="left">
<a href="http://www.tldp.org/LDP/abs/html/index.html">Advanced Bash-Scripting Guide</a> by Mendel Cooper</td>
<td class="left">经典,不断更新中.其提供的.bashrc模板很有价值,手册完全读完没必要</td>
</tr> <tr>
<td class="left"><a href="http://www.catb.org/esr/writings/taoup/">The Art of Unix Programming by Eric Steven Raymond</a></td>
<td class="left">开拓思路,当八卦看,和编程实际上关系不大</td>
</tr> <tr>
<td class="left"><a href="http://debian-handbook.info/browse/stable/">The Debian Administrator's Handbook</a></td>
<td class="left">很好.捡对你有用的章节看.</td>
</tr> </tbody> </table>  </div>  </div>  <div id="outline-container-9" class="outline-3"> <h4 id="sec-9">常见问题</h4> <div class="outline-text-3" id="text-9">  <p>等你的问题了. </p>
</div>  </div>  <div id="outline-container-10" class="outline-3"> <h4 id="sec-10">联系我</h4> <div class="outline-text-3" id="text-10">  <p>这是我的<a href="https://twitter.com/#!/chen_bin">twitter</a>和<a href="https://plus.google.com/110954683162859211810">google plus</a>,也可以通过我的email&lt;chenbin DOT sh AT GMAIL DOT COM&gt;联系我. </p> <p> 我的主力博客为<a href="http://blog.binchen.org">http://blog.binchen.org</a>. </p>
</div> </div> </div>
            </div>
        </div>
        <div class="post">
            <h1 class="title"><a href="posts/yong-mintty-zuo-wei-cyginw-de-console.html">用mintty作为cygwin的console</a></h1>
            <div class="meta">
                <div class="authordate">
                    <time class="timeago" datetime="2011-04-29T07:00:00+00:00">2011-04-29 07:00</time>
                </div>
                <div class="stats">
                    
        
    <a href="posts/yong-mintty-zuo-wei-cyginw-de-console.html#disqus_thread" data-disqus-identifier="cache/posts/yong-mintty-zuo-wei-cyginw-de-console.html">Comments</a>


                </div>
            
        <div itemprop="keywords" class="tags">
        <ul>
        Tags : 
           <li><a class="tag p-category" href="categories/chinese.html" rel="tag">chinese</a></li>
           <li><a class="tag p-category" href="categories/cygwin.html" rel="tag">cygwin</a></li>
           <li><a class="tag p-category" href="categories/software.html" rel="tag">software</a></li>
           <li><a class="tag p-category" href="categories/zh.html" rel="tag">zh</a></li>
        </ul>
        </div>

            </div>
            <div class="body">
                <div>
<p></p>
<p>cygwin1.7在我的电脑上不能显示中文,已困扰我很久了. </p> <p> 今天才找到解决办法,只要安装<a href="http://code.google.com/p/mintty/">mintty</a>即可. </p> <p> 安装后在宽屏显示器上字可能比较小, 参考<a href="http://mintty.googlecode.com/svn-history/r1065/trunk/docs/mintty.1.html">其手册</a>缩放字体. </p> <p> 以下是我的cygwin.bat, </p>    <pre class="example">@echo off
chdir C:cygwinbin
<p>set EDITOR=vi</p>
<p>set VISUAL=vi</p>
<p>REM shamelessly copied from git://github.com/justsoso8/dotfile.git</p>
<p>REM mintty installed which supports chinese</p>
<p>REM =======================================</p>
<p>@echo off</p>
<p>rem find cygwin roo directory one by one</p>
<p>rem disk c -&gt; disk d -&gt; disk e</p>
<p>:CYGWIN_C</p>
<p>if not exist c:cygwin goto CYGWIN_D</p>
<p>set _cygwinroot=c:cygwin</p>
<p>goto HAVECYGWIN</p>
<p>:CYGWIN_D</p>
<p>if not exist d:cygwin goto CYGWIN_E</p>
<p>set _cygwinroot=d:cygwin</p>
<p>goto HAVECYGWIN</p>
<p>:CYGWIN_E</p>
<p>if not exist e:cygwin goto NOCYGWIN</p>
<p>set _cygwinroot=e:cygwin</p>
<p>goto HAVECYGWIN</p>
<p>:NOCYGWIN</p>
<p>echo no cygwin installation found on disk C/D/E</p>
<p>pause</p>
<p>goto EOF</p>
<p>:HAVECYGWIN</p>
<p>set LANG=zh_CN.utf8</p>
<p>rem CONSOLE is sure to know this setting</p>
<p>rem and can display chinese very well</p>
<p>rem but look &amp; feel &amp; funcationality are not as good as mintty</p>
<p>REM select terminal one by one</p>
<p>REM mintty -&gt; rxvt -&gt; console</p>
<p>:MINTTY</p>
<p>set _termapp=%_cygwinroot%binmintty.exe</p>
<p>if not exist %_termapp% goto RXVT</p>
<p>start %_termapp% /bin/bash --login -i</p>
<p>rem mintty has it's option to set as zh_CN.utf8</p>
<p>rem ignore the ${LANG} setting</p>
<p>rem and it appends @cjknarrow automatically</p>
<p>rem current solution is to "LANG=zh_CN.utf8 gvim ..."</p>
<p>goto EOF</p>
<p>:RXVT</p>
<p>set _termapp=%_cygwinroot%binrxvt.exe</p>
<p>if not exist %_termapp% goto CONSOLE</p>
<p>set BGCOLOR=Black</p>
<p>set FGCOLOR=White</p>
<p>start %_termapp% -sl 2500 -fg %FGCOLOR% -bg %BGCOLOR% -sr -fn Courier-20 -geometry 80x25 -e /bin/bash --login -i</p>
<p>goto EOF</p>
<p>:CONSOLE</p>
<p>set _termapp=%_cygwinroot%binbash.exe</p>
<p>start %_termapp% --login -i</p>
<p>goto EOF</p>
<p>:EOF</p>
<p>exit</p>
<p></p></pre>
</div>
            </div>
        </div>
        <div class="post">
            <h1 class="title"><a href="posts/jian-chi-shi-yong-gnu-screen.html">坚持使用gnu screen</a></h1>
            <div class="meta">
                <div class="authordate">
                    <time class="timeago" datetime="2011-04-23T12:37:00+00:00">2011-04-23 12:37</time>
                </div>
                <div class="stats">
                    
        
    <a href="posts/jian-chi-shi-yong-gnu-screen.html#disqus_thread" data-disqus-identifier="cache/posts/jian-chi-shi-yong-gnu-screen.html">Comments</a>


                </div>
            
        <div itemprop="keywords" class="tags">
        <ul>
        Tags : 
           <li><a class="tag p-category" href="categories/linux.html" rel="tag">linux</a></li>
           <li><a class="tag p-category" href="categories/software.html" rel="tag">software</a></li>
           <li><a class="tag p-category" href="categories/zh.html" rel="tag">zh</a></li>
        </ul>
        </div>

            </div>
            <div class="body">
                <div>
<p></p>
<p>虽然tmux很优秀,但是目前很难支持<a href="http://www.cygwin.com">cygwin</a>(<a href="http://comments.gmane.org/gmane.comp.terminal-emulators.tmux.user/1093">Nicholas Marriott在2010年12月说的</a>),而我的工作需要使用windows. </p> <p> 最新版的screen的一个重要特性就是已支持垂直分屏,其快捷键为"C-a |". </p>  <div id="outline-container-1" class="outline-3"> <h4 id="sec-1">要安装最新版的screen,在我的<a href="http://www.archlinux.org">Arch Linux</a>下很简单, </h4> <div class="outline-text-3" id="text-1">     <pre class="src src-sh">yaourt -S screen-git
</pre>    </div>  </div>  <div id="outline-container-2" class="outline-3"> <h4 id="sec-2">在windows的cygwin下安装要多几步. </h4> <div class="outline-text-3" id="text-2">  <p>首先安装软件包libncurse-devel,然后去<a href="http://ftp.gnu.org/gnu/screen/">官方网站</a>下载最新源代码包(目前版本为4.0.3),解压缩, </p>   <pre class="src src-sh">tar zxf screen-4.0.3.tar.gz
<p></p></pre>    <p> 编译安装, </p>   <pre class="src src-sh"><span style="color:#0000ee;font-weight:bold;">cd</span> screen-4.0.3;configure;make;make install;
<p></p></pre>    </div>  </div>  <div id="outline-container-3" class="outline-3"> <h4 id="sec-3">如用urxvt作为Terminal Simulator(比如我),直接启动screen会报错, </h4> <div class="outline-text-3" id="text-3">     <pre class="src src-sh">$ screen
<p>$<span style="color:#cdcd00;">TERM</span> too long - sorry.</p>
<p></p></pre>    <p> 原因为screen的开发者对于环境变量$TERM的最大长度做了不合理的假定.这里是<a href="https://bbs.archlinux.org/viewtopic.php?pid=885446">具体讨论</a>,解决办法很简单. 在.Xdefaults中添加一行, </p>   <pre class="example">urxvt*termName: rxvt-256color
<p></p></pre>   <p> 在.screenrc中添加一行, </p>   <pre class="example">term rxvt-256color
<p></p></pre>    </div>  </div>  <div id="outline-container-4" class="outline-3"> <h4 id="sec-4">使用screen前我将screen的Ctrl-a改为Ctrl-t </h4> <div class="outline-text-3" id="text-4">  <p>因为Ctrl-a在bash和emacs中都是常用快捷键,在.screenrc中添加一行, </p>   <pre class="src src-sh">escape<span style="color:#00cd00;">"^Tt"</span>  <span style="color:#cd0000;">#</span><span style="color:#cd0000;">the default of A interferes with emacs keybindings for terminal, and I never use the emacs transpose command
<p></p></span></pre>   <p> 这个修改我是从<a href="http://jinome.stanford.edu/">Balaji S. Srinivasan</a>的<a href="http://jinome.stanford.edu/stat366/unix/.screenrc">.screenrc</a>抄来的. 可以参考<a href="http://www.emacswiki.org/emacs/GnuScreen">emacs wiki</a>获得更多兼容emacs的设置. </p>
</div> </div>
</div>
            </div>
        </div>
        <div class="post">
            <h1 class="title"><a href="posts/geek-chang-yong-ruan-jian-qin-dan.html">奇客(Geek)的常用软件清单(操作系统支持OS X, Windows, Linux)</a></h1>
            <div class="meta">
                <div class="authordate">
                    <time class="timeago" datetime="2011-04-16T15:11:00+00:00">2011-04-16 15:11</time>
                </div>
                <div class="stats">
                    
        
    <a href="posts/geek-chang-yong-ruan-jian-qin-dan.html#disqus_thread" data-disqus-identifier="cache/posts/geek-chang-yong-ruan-jian-qin-dan.html">Comments</a>


                </div>
            
        <div itemprop="keywords" class="tags">
        <ul>
        Tags : 
           <li><a class="tag p-category" href="categories/geek.html" rel="tag">geek</a></li>
           <li><a class="tag p-category" href="categories/linux.html" rel="tag">linux</a></li>
           <li><a class="tag p-category" href="categories/mac.html" rel="tag">mac</a></li>
           <li><a class="tag p-category" href="categories/software.html" rel="tag">software</a></li>
           <li><a class="tag p-category" href="categories/win32.html" rel="tag">win32</a></li>
           <li><a class="tag p-category" href="categories/zh.html" rel="tag">zh</a></li>
        </ul>
        </div>

            </div>
            <div class="body">
                <div>
<p>作者: 陈斌 (redguardtoo)
</p>

<p>
更新时间: <span class="timestamp-wrapper"> <span class="timestamp">2014-04-14 Mon</span></span>
</p>

<p>
原创时间: <span class="timestamp-wrapper"> <span class="timestamp">2011-04-16 六 15:11</span></span>
</p>

<p>
品味比较小众,如果你用几亿劳动人民都喜爱的某著名免费软件套装,这篇文章你就不用看下去了.
</p>

<p>
我选择软件的标准是:
</p>

<ul>
<li>功能强大(可编程,支持插件)
</li>
<li>性能优秀(不带图形界面,用C写的,一般性能还可以)
</li>
<li>诚实可靠(开源最好,闭源的话开发者本人要有相当信用)
</li>
<li>绿色软件,配置文件最好是纯文本
</li>
</ul>

<div id="table-of-contents">
<h3>Table of Contents</h3>
<div id="text-table-of-contents">
<ul>
<li><a href="posts/geek-chang-yong-ruan-jian-qin-dan.html#sec-1">1 Windows软件清单</a></li>
<li><a href="posts/geek-chang-yong-ruan-jian-qin-dan.html#sec-2">2 Linux软件清单</a></li>
<li><a href="posts/geek-chang-yong-ruan-jian-qin-dan.html#sec-3">3 Mac OS X软件清单</a></li>
<li>
<a href="posts/geek-chang-yong-ruan-jian-qin-dan.html#sec-4">4 某些优秀软件的插件清单</a>
<ul>
<li><a href="posts/geek-chang-yong-ruan-jian-qin-dan.html#sec-4-1">4.1 Firefox插件</a></li>
<li><a href="posts/geek-chang-yong-ruan-jian-qin-dan.html#sec-4-2">4.2 Greasemonkey插件</a></li>
<li><a href="posts/geek-chang-yong-ruan-jian-qin-dan.html#sec-4-3">4.3 vim插件</a></li>
<li><a href="posts/geek-chang-yong-ruan-jian-qin-dan.html#sec-4-4">4.4 emacs插件</a></li>
<li><a href="posts/geek-chang-yong-ruan-jian-qin-dan.html#sec-4-5">4.5 total commander插件</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-1" class="outline-3">
<h4 id="sec-1">Windows软件清单</h4>
<div class="outline-text-3" id="text-1">

<p>工作中我90%的时间用perforce+cygwin+Visual Studio+vi+firefox.下班后基本不碰windows.
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<colgroup>
<col class="left">
<col class="left">
<col class="left">
<col class="left">
</colgroup>
<thead>
<tr>
<th scope="col" class="left">名称</th>
<th scope="col" class="left">说明</th>
<th scope="col" class="left">频率</th>
<th scope="col" class="left">性质</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">cygwin</td>
<td class="left">Linux下常用工具集合</td>
<td class="left">高</td>
<td class="left">开源</td>
</tr>
<tr>
<td class="left">7-Zip</td>
<td class="left">压缩解压缩</td>
<td class="left">高</td>
<td class="left">开源</td>
</tr>
<tr>
<td class="left">AviSynth 2.5</td>
<td class="left">视频编辑</td>
<td class="left">低</td>
<td class="left">开源</td>
</tr>
<tr>
<td class="left">utorrent</td>
<td class="left">BT下载</td>
<td class="left">中</td>
<td class="left">免费</td>
</tr>
<tr>
<td class="left">CDBurnerXP</td>
<td class="left">刻录</td>
<td class="left">中</td>
<td class="left">免费</td>
</tr>
<tr>
<td class="left">CDex_170b2</td>
<td class="left">cd转mp3,从网上获得cd信息后自动生成mp3文件名</td>
<td class="left">中</td>
<td class="left">开源</td>
</tr>
<tr>
<td class="left">ditto</td>
<td class="left">剪贴板管理</td>
<td class="left">高</td>
<td class="left">免费</td>
</tr>
<tr>
<td class="left">CMake 2.8</td>
<td class="left">跨平台build工具,相见恨晚</td>
<td class="left">中</td>
<td class="left">开源</td>
</tr>
<tr>
<td class="left">ColorPic 4.1</td>
<td class="left">取色</td>
<td class="left">高</td>
<td class="left">免费</td>
</tr>
<tr>
<td class="left">comicsviewe</td>
<td class="left">看漫画</td>
<td class="left">低</td>
<td class="left">免费</td>
</tr>
<tr>
<td class="left">DAEMON Tools</td>
<td class="left">虚拟光驱</td>
<td class="left">高</td>
<td class="left">免费</td>
</tr>
<tr>
<td class="left">Debugging Tools for Windows</td>
<td class="left">如题</td>
<td class="left">低</td>
<td class="left">免费</td>
</tr>
<tr>
<td class="left">Wink</td>
<td class="left">录屏</td>
<td class="left">中</td>
<td class="left">免费</td>
</tr>
<tr>
<td class="left">Dependency Walker</td>
<td class="left">检查dll依赖</td>
<td class="left">高</td>
<td class="left">免费</td>
</tr>
<tr>
<td class="left">eMule</td>
<td class="left">p2p下载</td>
<td class="left">中</td>
<td class="left">开源</td>
</tr>
<tr>
<td class="left">FBReader</td>
<td class="left">电子图书阅读</td>
<td class="left">中</td>
<td class="left">开源</td>
</tr>
<tr>
<td class="left">foobar2000</td>
<td class="left">音乐播放</td>
<td class="left">高</td>
<td class="left">开源</td>
</tr>
<tr>
<td class="left">Foxit Reader</td>
<td class="left">PDF阅读器</td>
<td class="left">低</td>
<td class="left">免费</td>
</tr>
<tr>
<td class="left">GhostScript</td>
<td class="left">pdf解析引擎</td>
<td class="left">中</td>
<td class="left">开源</td>
</tr>
<tr>
<td class="left">GIMP</td>
<td class="left">图像编辑</td>
<td class="left">高</td>
<td class="left">开源</td>
</tr>
<tr>
<td class="left">gnuplot</td>
<td class="left">数据分析,主要用于数据显示</td>
<td class="left">低</td>
<td class="left">开源</td>
</tr>
<tr>
<td class="left">gtalk</td>
<td class="left">即时通信,语音服务佳</td>
<td class="left">高</td>
<td class="left">免费</td>
</tr>
<tr>
<td class="left">Picasa (google)</td>
<td class="left">照片管理</td>
<td class="left">中</td>
<td class="left">免费</td>
</tr>
<tr>
<td class="left">google拼音</td>
<td class="left">输入法,主要特色在于可以在线同步词库,资源消耗高</td>
<td class="left">高</td>
<td class="left">免费</td>
</tr>
<tr>
<td class="left">AVG Free</td>
<td class="left">杀毒</td>
<td class="left">高</td>
<td class="left">免费</td>
</tr>
<tr>
<td class="left">ImageMagick-6.3.5</td>
<td class="left">命令行图像处理</td>
<td class="left">高</td>
<td class="left">开源</td>
</tr>
<tr>
<td class="left">InfraRecorder</td>
<td class="left">刻录</td>
<td class="left">中</td>
<td class="left">开源</td>
</tr>
<tr>
<td class="left">Inno Setup 5</td>
<td class="left">打包,开发用</td>
<td class="left">低</td>
<td class="left">开源</td>
</tr>
<tr>
<td class="left">Internet Explorer</td>
<td class="left">系统自带</td>
<td class="left">否</td>
<td class="left">免费</td>
</tr>
<tr>
<td class="left">IPMsg</td>
<td class="left">局域网通信</td>
<td class="left">高</td>
<td class="left">开源</td>
</tr>
<tr>
<td class="left">IrfanView</td>
<td class="left">看图,可与total commander集成</td>
<td class="left">高</td>
<td class="left">免费</td>
</tr>
<tr>
<td class="left">Mercurial</td>
<td class="left">分布式版本控制</td>
<td class="left">低</td>
<td class="left">开源</td>
</tr>
<tr>
<td class="left">Msn Messenger</td>
<td class="left">微软的即时通信软件</td>
<td class="left">否</td>
<td class="left">免费</td>
</tr>
<tr>
<td class="left">Microsoft Visual Studio Express 2010</td>
<td class="left">C++ IDE</td>
<td class="left">高</td>
<td class="left">免费</td>
</tr>
<tr>
<td class="left">Miranda IM</td>
<td class="left">集成了yahoo,icq,qq,msn,gtalk,irc,msn的即时通信</td>
<td class="left">高</td>
<td class="left">开源</td>
</tr>
<tr>
<td class="left">Firefox</td>
<td class="left">网页浏览</td>
<td class="left">高</td>
<td class="left">开源</td>
</tr>
<tr>
<td class="left">mtPaint</td>
<td class="left">mspaint的替代品,简单画图,界面费解</td>
<td class="left">低</td>
<td class="left">开源</td>
</tr>
<tr>
<td class="left">MWSnap</td>
<td class="left">截图</td>
<td class="left">低</td>
<td class="left">免费</td>
</tr>
<tr>
<td class="left">Notepad++</td>
<td class="left">文本编辑,我用vim和Emacs,给别人用</td>
<td class="left">低</td>
<td class="left">开源</td>
</tr>
<tr>
<td class="left">LibreOffice</td>
<td class="left">办公字处理,导出word到pdf.最,画组织结构图,中文教程少</td>
<td class="left">低</td>
<td class="left">开源</td>
</tr>
<tr>
<td class="left">OpenVPN</td>
<td class="left">VPN</td>
<td class="left">否</td>
<td class="left">开源</td>
</tr>
<tr>
<td class="left">Chrome</td>
<td class="left">网页浏览</td>
<td class="left">低</td>
<td class="left">免费</td>
</tr>
<tr>
<td class="left">Pandora Recovery</td>
<td class="left">恢复误删除的文件</td>
<td class="left">低</td>
<td class="left">免费</td>
</tr>
<tr>
<td class="left">Passcape</td>
<td class="left">Mozilla套件密码恢复</td>
<td class="left">低</td>
<td class="left">免费</td>
</tr>
<tr>
<td class="left">password-recovery</td>
<td class="left">密码恢复</td>
<td class="left">低</td>
<td class="left">免费</td>
</tr>
<tr>
<td class="left">PPLive</td>
<td class="left">在线电视</td>
<td class="left">低</td>
<td class="left">免费</td>
</tr>
<tr>
<td class="left">reshacker</td>
<td class="left">从可执行文件中提取资源(图标)</td>
<td class="left">低</td>
<td class="left">免费</td>
</tr>
<tr>
<td class="left">Skype</td>
<td class="left">即时通信,语音通话</td>
<td class="left">高</td>
<td class="left">免费</td>
</tr>
<tr>
<td class="left">StarDict</td>
<td class="left">辞典</td>
<td class="left">中</td>
<td class="left">开源</td>
</tr>
<tr>
<td class="left">SumatraPDF</td>
<td class="left">pdf阅读器</td>
<td class="left">低</td>
<td class="left">开源</td>
</tr>
<tr>
<td class="left">VirtualBox</td>
<td class="left">虚拟机,用于模拟开发环境,或是网上银行专用的操作系统</td>
<td class="left">高</td>
<td class="left">开源</td>
</tr>
<tr>
<td class="left">QQ</td>
<td class="left">如题</td>
<td class="left">否</td>
<td class="left">免费</td>
</tr>
<tr>
<td class="left">MiniThunder(迅雷)</td>
<td class="left">下载</td>
<td class="left">高</td>
<td class="left">免费</td>
</tr>
<tr>
<td class="left">PDF-XChange Viewer</td>
<td class="left">PDF阅读器(由于工作关系,我装了很多PDF阅读器)</td>
<td class="left">高</td>
<td class="left">免费</td>
</tr>
<tr>
<td class="left">UltraVNC</td>
<td class="left">远程桌面控制</td>
<td class="left">低</td>
<td class="left">开源</td>
</tr>
<tr>
<td class="left">Subtitle Workshop</td>
<td class="left">字幕调整</td>
<td class="left">中</td>
<td class="left">免费</td>
</tr>
<tr>
<td class="left">USBOOT 1.7</td>
<td class="left">使usb能够启动电脑,制作usb自启动盘时用</td>
<td class="left">低</td>
<td class="left">免费</td>
</tr>
<tr>
<td class="left">F…gate</td>
<td class="left">翻墙</td>
<td class="left">高</td>
<td class="left">开源</td>
</tr>
<tr>
<td class="left">Vim/GVim</td>
<td class="left">文本编辑</td>
<td class="left">高</td>
<td class="left">开源</td>
</tr>
<tr>
<td class="left">Total Commander</td>
<td class="left">说是世界第一的文件管理器不算过分,未注册版</td>
<td class="left">高</td>
<td class="left">共享</td>
</tr>
<tr>
<td class="left">bblean</td>
<td class="left">windows shell</td>
<td class="left">高</td>
<td class="left">开源</td>
</tr>
<tr>
<td class="left">Bridge Base Online</td>
<td class="left">游戏</td>
<td class="left">中</td>
<td class="left">免费</td>
</tr>
<tr>
<td class="left">ntemacs</td>
<td class="left">文本编辑</td>
<td class="left">高</td>
<td class="left">开源</td>
</tr>
<tr>
<td class="left">openssl</td>
<td class="left">如题</td>
<td class="left">低</td>
<td class="left">开源</td>
</tr>
<tr>
<td class="left">python2.7</td>
<td class="left">一种脚本语言</td>
<td class="left">中</td>
<td class="left">开源</td>
</tr>
<tr>
<td class="left">wxWidgets 2.9</td>
<td class="left">跨平台c++ GUI库</td>
<td class="left">高</td>
<td class="left">开源</td>
</tr>
<tr>
<td class="left">mplayer</td>
<td class="left">命令行视频播放软件</td>
<td class="left">高</td>
<td class="left">开源</td>
</tr>
<tr>
<td class="left">autoruns</td>
<td class="left">检查启动时默认启动那些软件,用于手动杀木马</td>
<td class="left">高</td>
<td class="left">免费</td>
</tr>
<tr>
<td class="left">process explorer</td>
<td class="left">检查电脑中有什么程序在运行,用于手动杀木马</td>
<td class="left">高</td>
<td class="left">免费</td>
</tr>
<tr>
<td class="left">Everything</td>
<td class="left">找文件</td>
<td class="left">高</td>
<td class="left">免费</td>
</tr>
<tr>
<td class="left">treewalk</td>
<td class="left">缓存DNS</td>
<td class="left">高</td>
<td class="left">免费</td>
</tr>
</tbody>
</table>

</div>

</div>

<div id="outline-container-2" class="outline-3">
<h4 id="sec-2">Linux软件清单</h4>
<div class="outline-text-3" id="text-2">

<p>操作系统为<a href="http://www.gentoo.org">Gentoo Linux</a>.使用频率最高的软件为Git+Emacs+Vi+Firefox+I3+Bash
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<colgroup>
<col class="left">
<col class="left">
<col class="left">
</colgroup>
<thead>
<tr>
<th scope="col" class="left">名称</th>
<th scope="col" class="left">说明</th>
<th scope="col" class="left">频率</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">emacs</td>
<td class="left">任何事</td>
<td class="left">高</td>
</tr>
<tr>
<td class="left">vi</td>
<td class="left">文本编辑</td>
<td class="left">中</td>
</tr>
<tr>
<td class="left">Firefox</td>
<td class="left">网页浏览</td>
<td class="left">中</td>
</tr>
<tr>
<td class="left">pidgin</td>
<td class="left">即时通信</td>
<td class="left">中</td>
</tr>
<tr>
<td class="left">terminator</td>
<td class="left">Terminal</td>
<td class="left">高</td>
</tr>
<tr>
<td class="left">bash</td>
<td class="left">shell</td>
<td class="left">高</td>
</tr>
<tr>
<td class="left">scrot</td>
<td class="left">截图</td>
<td class="left">高</td>
</tr>
<tr>
<td class="left">i3</td>
<td class="left">窗口管理</td>
<td class="left">高</td>
</tr>
<tr>
<td class="left">wine</td>
<td class="left">win32模拟器</td>
<td class="left">高</td>
</tr>
<tr>
<td class="left">goagent</td>
<td class="left">翻墙</td>
<td class="left">高</td>
</tr>
<tr>
<td class="left">mplayer</td>
<td class="left">视频播放</td>
<td class="left">中</td>
</tr>
<tr>
<td class="left">ncmpcpp+mpd</td>
<td class="left">音频播放</td>
<td class="left">高</td>
</tr>
<tr>
<td class="left">amule (amule-dlp)</td>
<td class="left">p2p下载</td>
<td class="left">低</td>
</tr>
<tr>
<td class="left">rtorrent</td>
<td class="left">BT下载</td>
<td class="left">低</td>
</tr>
<tr>
<td class="left">virtualbox</td>
<td class="left">虚拟机</td>
<td class="left">低</td>
</tr>
<tr>
<td class="left">gimp</td>
<td class="left">图片编辑</td>
<td class="left">中</td>
</tr>
<tr>
<td class="left">git</td>
<td class="left">版本控制</td>
<td class="left">高</td>
</tr>
<tr>
<td class="left">zathura</td>
<td class="left">pdf阅读</td>
<td class="left">高</td>
</tr>
<tr>
<td class="left">parcellite</td>
<td class="left">剪贴板管理</td>
<td class="left">高</td>
</tr>
<tr>
<td class="left">fcitx</td>
<td class="left">中文输入</td>
<td class="left">高</td>
</tr>
<tr>
<td class="left">libreoffice</td>
<td class="left">办公软件</td>
<td class="left">中</td>
</tr>
</tbody>
</table>

</div>

</div>

<div id="outline-container-3" class="outline-3">
<h4 id="sec-3">Mac OS X软件清单</h4>
<div class="outline-text-3" id="text-3">

<p>OS X (10.7.3),使用频率最高的软件为Emacs, Firefox, Bash, Adium.
</p>
<p>
之前被一些Mac fan忽悠,对OS X下软件期望很高,使用之后大失所望.唯一的亮点是其Unix的环境.所以Linux下的命令行软件都能用.这些软件一般不重复罗列了.
</p>
<p>
另外有些软件我在用,但是我以用这些垃圾为耻(比如臭名昭著的iTune),所以就不放在软件清单里了.
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<colgroup>
<col class="left">
<col class="left">
<col class="left">
</colgroup>
<thead>
<tr>
<th scope="col" class="left">名称</th>
<th scope="col" class="left">说明</th>
<th scope="col" class="left">频率</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">Emacs</td>
<td class="left">任何事</td>
<td class="left">高</td>
</tr>
<tr>
<td class="left">Firefox</td>
<td class="left">上网</td>
<td class="left">高</td>
</tr>
<tr>
<td class="left">Bash</td>
<td class="left">shell</td>
<td class="left">高</td>
</tr>
<tr>
<td class="left">Libreoffice</td>
<td class="left">办公软件</td>
<td class="left">中</td>
</tr>
<tr>
<td class="left">迷你迅雷</td>
<td class="left">下载</td>
<td class="left">中</td>
</tr>
<tr>
<td class="left">HomeBrew</td>
<td class="left">开源软件包管理(Mac下少数几个亮点之一)</td>
<td class="left">高</td>
</tr>
<tr>
<td class="left">Adium</td>
<td class="left">即时通讯,支持多协议</td>
<td class="left">中</td>
</tr>
<tr>
<td class="left">Clippings</td>
<td class="left">剪贴板管理(收费)</td>
<td class="left">中</td>
</tr>
<tr>
<td class="left">Mplayer X</td>
<td class="left">类mplayer的视频播放器</td>
<td class="left">高</td>
</tr>
<tr>
<td class="left">Monolingual</td>
<td class="left">删除没用的多国语言和Mac自带的垃圾软件</td>
<td class="left">高</td>
</tr>
<tr>
<td class="left">Skim</td>
<td class="left">看PDF</td>
<td class="left">中</td>
</tr>
<tr>
<td class="left">CCleaner</td>
<td class="left">清理系统垃圾</td>
<td class="left">高</td>
</tr>
<tr>
<td class="left">有道词典</td>
<td class="left">查单词</td>
<td class="left">高</td>
</tr>
<tr>
<td class="left">muCommander</td>
<td class="left">文件管理器</td>
<td class="left">高</td>
</tr>
<tr>
<td class="left">Chicken of the VNC</td>
<td class="left">vnc客户端(远程桌面)</td>
<td class="left">低</td>
</tr>
<tr>
<td class="left">IPMessenger</td>
<td class="left">局域网内通信传文件</td>
<td class="left">高</td>
</tr>
</tbody>
</table>

</div>

</div>

<div id="outline-container-4" class="outline-3">
<h4 id="sec-4">某些优秀软件的插件清单</h4>
<div class="outline-text-3" id="text-4">

</div>

<div id="outline-container-4-1" class="outline-4">
<h5 id="sec-4-1">Firefox插件</h5>
<div class="outline-text-4" id="text-4-1">

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<colgroup>
<col class="left">
<col class="left">
<col class="left">
</colgroup>
<thead>
<tr>
<th scope="col" class="left">名称</th>
<th scope="col" class="left">说明</th>
<th scope="col" class="left">频率</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">adblock plus</td>
<td class="left">过滤广告,支持正则表达式</td>
<td class="left">高</td>
</tr>
<tr>
<td class="left">Autoproxy</td>
<td class="left">代理上网</td>
<td class="left">高</td>
</tr>
<tr>
<td class="left">Firebug</td>
<td class="left">最好的web开发工具</td>
<td class="left">高</td>
</tr>
<tr>
<td class="left">KeySnail</td>
<td class="left">安装了HoK(快捷键设置)脚本代替vimperator</td>
<td class="left">高</td>
</tr>
<tr>
<td class="left">ImageBlock</td>
<td class="left">和图片说再见</td>
<td class="left">高</td>
</tr>
<tr>
<td class="left">ColorZilla</td>
<td class="left">取色</td>
<td class="left">低</td>
</tr>
<tr>
<td class="left">Vacuum Palaces Improved</td>
<td class="left">firefox使用的sqlite数据库加速</td>
<td class="left">低</td>
</tr>
<tr>
<td class="left">DownloadHelper</td>
<td class="left">下载视频</td>
<td class="left">中</td>
</tr>
<tr>
<td class="left">Magrent</td>
<td class="left">转换链接为torrent文件</td>
<td class="left">中</td>
</tr>
<tr>
<td class="left">MozRepl</td>
<td class="left">和Emacs交互,web前端开发必备</td>
<td class="left">高</td>
</tr>
<tr>
<td class="left">Greasemonkey</td>
<td class="left">支持javascript写的脚本操作firefox</td>
<td class="left">高</td>
</tr>
<tr>
<td class="left">MeasureIt On</td>
<td class="left">Firefox的尺子</td>
<td class="left">中</td>
</tr>
<tr>
<td class="left">QR Code Image Generator</td>
<td class="left">产生QR码</td>
<td class="left">中</td>
</tr>
<tr>
<td class="left">JSONView</td>
<td class="left">View JSON</td>
<td class="left">低</td>
</tr>
<tr>
<td class="left">Magrent</td>
<td class="left">生成bt链接</td>
<td class="left">高</td>
</tr>
<tr>
<td class="left">LeechBlock</td>
<td class="left">自绝于社交网络</td>
<td class="left">高</td>
</tr>
<tr>
<td class="left">DownloadHelper</td>
<td class="left">下载视频</td>
<td class="left">中</td>
</tr>
</tbody>
</table>

</div>

</div>

<div id="outline-container-4-2" class="outline-4">
<h5 id="sec-4-2">Greasemonkey插件</h5>
<div class="outline-text-4" id="text-4-2">

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<colgroup>
<col class="left">
<col class="left">
<col class="left">
</colgroup>
<thead>
<tr>
<th scope="col" class="left">名称</th>
<th scope="col" class="left">说明</th>
<th scope="col" class="left">频率</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">NinjaWebCoder</td>
<td class="left">从网站拷贝代码</td>
<td class="left">高</td>
</tr>
<tr>
<td class="left">眼不见心不烦</td>
<td class="left">清理weibo.com</td>
<td class="left">高</td>
</tr>
</tbody>
</table>

</div>

</div>

<div id="outline-container-4-3" class="outline-4">
<h5 id="sec-4-3">vim插件</h5>
<div class="outline-text-4" id="text-4-3">

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<colgroup>
<col class="left">
<col class="left">
<col class="left">
</colgroup>
<thead>
<tr>
<th scope="col" class="left">名称</th>
<th scope="col" class="left">说明</th>
<th scope="col" class="left">频率</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">cmake</td>
<td class="left">有时要编辑cmake</td>
<td class="left">低</td>
</tr>
<tr>
<td class="left">cscope_maps.vim</td>
<td class="left">为vim中使用cscope(看c/c++代码工具)添加快捷键支持</td>
<td class="left">低</td>
</tr>
<tr>
<td class="left">LargeFile.vim</td>
<td class="left">看大文件时自动优化vim</td>
<td class="left">低</td>
</tr>
<tr>
<td class="left">matchit.vim</td>
<td class="left">跳转至匹配的符号,比如在匹配的括号见跳来跳去</td>
<td class="left">高</td>
</tr>
<tr>
<td class="left">NERD_commenter.vim</td>
<td class="left">码(支持很多语言)添加/取消注释</td>
<td class="left">高</td>
</tr>
<tr>
<td class="left">taglist.vim</td>
<td class="left">显示函数列表</td>
<td class="left">高</td>
</tr>
<tr>
<td class="left">vim-surround</td>
<td class="left">成对改字符串最外围字符</td>
<td class="left">中</td>
</tr>
<tr>
<td class="left">ctrlp</td>
<td class="left">搜索文件名</td>
<td class="left">高</td>
</tr>
<tr>
<td class="left">nerdtree</td>
<td class="left">文件一览</td>
<td class="left">中</td>
</tr>
<tr>
<td class="left">vim-unimpaired</td>
<td class="left">不知道</td>
<td class="left">低</td>
</tr>
<tr>
<td class="left">yankring</td>
<td class="left">剪贴板管理</td>
<td class="left">低</td>
</tr>
<tr>
<td class="left">zoomwin</td>
<td class="left">切换全屏buffer</td>
<td class="left">高</td>
</tr>
<tr>
<td class="left">vim-fugitive</td>
<td class="left">在vim中操作git</td>
<td class="left">低</td>
</tr>
<tr>
<td class="left">seek</td>
<td class="left">按s搜索最近两个字符</td>
<td class="left">低</td>
</tr>
<tr>
<td class="left">vim-autocolose</td>
<td class="left">自动完成匹配符号</td>
<td class="left">低</td>
</tr>
</tbody>
</table>


</div>

</div>

<div id="outline-container-4-4" class="outline-4">
<h5 id="sec-4-4">emacs插件</h5>
<div class="outline-text-4" id="text-4-4">

<p>我已转向emacs,我使用的插件较多,无法一一罗列,详见<a href="https://github.com/redguardtoo/emacs.d">https://github.com/redguardtoo/emacs.d</a>.
</p>
</div>

</div>

<div id="outline-container-4-5" class="outline-4">
<h5 id="sec-4-5">total commander插件</h5>
<div class="outline-text-4" id="text-4-5">

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<colgroup>
<col class="left">
<col class="left">
<col class="left">
</colgroup>
<thead>
<tr>
<th scope="col" class="left">名称</th>
<th scope="col" class="left">说明</th>
<th scope="col" class="left">频率</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">CatalogMaker.wcx</td>
<td class="left">创建文件列表</td>
<td class="left">低</td>
</tr>
<tr>
<td class="left">CHMDir.wcx</td>
<td class="left">生成chm文件</td>
<td class="left">低</td>
</tr>
<tr>
<td class="left">7zip.wcx</td>
<td class="left">压缩解压缩7zip格式的压缩文件</td>
<td class="left">高</td>
</tr>
<tr>
<td class="left">UnInstTC.wfx</td>
<td class="left">管理"添加/删除软件"面板</td>
<td class="left">高</td>
</tr>
<tr>
<td class="left">Registry</td>
<td class="left">管理注册表</td>
<td class="left">中</td>
</tr>
<tr>
<td class="left">ex2fs.wfx</td>
<td class="left">访问linux分区(只读)</td>
<td class="left">高</td>
</tr>
<tr>
<td class="left">sftpplug.wfx</td>
<td class="left">支持sftp</td>
<td class="left">中</td>
</tr>
<tr>
<td class="left">imagine.wlx</td>
<td class="left">看图</td>
<td class="left">低</td>
</tr>
</tbody>
</table>

</div>

<p></p>
</div>
</div>
</div>
            </div>
        </div>
        <div class="post">
            <h1 class="title"><a href="posts/hello-word.html">Hello Word</a></h1>
            <div class="meta">
                <div class="authordate">
                    <time class="timeago" datetime="2011-04-13T13:41:02+00:00">2011-04-13 13:41</time>
                </div>
                <div class="stats">
                    
        
    <a href="posts/hello-word.html#disqus_thread" data-disqus-identifier="cache/posts/hello-word.html">Comments</a>


                </div>
            
        <div itemprop="keywords" class="tags">
        <ul>
        Tags : 
           <li><a class="tag p-category" href="categories/zh.html" rel="tag">zh</a></li>
        </ul>
        </div>

            </div>
            <div class="body">
                <div>
<p></p>
<p>这是第一篇。用<a href="https://github.com/punchagan/org2blog">org2blog</a>发的，看一下中文支持如何.</p>
</div>
            </div>
        </div>
        <div class="post">
            <h1 class="title"><a href="posts/yong-org2blog-emacs-fa-biao-bo-ke.html">用org2blog+emacs发表博客</a></h1>
            <div class="meta">
                <div class="authordate">
                    <time class="timeago" datetime="2011-04-11T16:00:00+00:00">2011-04-11 16:00</time>
                </div>
                <div class="stats">
                    
        
    <a href="posts/yong-org2blog-emacs-fa-biao-bo-ke.html#disqus_thread" data-disqus-identifier="cache/posts/yong-org2blog-emacs-fa-biao-bo-ke.html">Comments</a>


                </div>
            
        <div itemprop="keywords" class="tags">
        <ul>
        Tags : 
           <li><a class="tag p-category" href="categories/blog.html" rel="tag">blog</a></li>
           <li><a class="tag p-category" href="categories/emacs.html" rel="tag">emacs</a></li>
           <li><a class="tag p-category" href="categories/org2blog.html" rel="tag">org2blog</a></li>
           <li><a class="tag p-category" href="categories/zh.html" rel="tag">zh</a></li>
        </ul>
        </div>

            </div>
            <div class="body">
                <div>
<p></p>
<p>我有兴趣开始写博,完全是因为我开始爱上emacs,以至<a href="http://blog.nethazard.net/post-to-wordpress-blogs-with-emacs-org-mode">有人</a>说emacs的插件<a href="https://github.com/punchagan/org2blog">org2blog</a>使的写博客非常高效，我就想试试. </p> <p> 我(计划)把所有的文章都放在一个org文件里(BTW,我爱死<a href="http://orgmode.org">org-mode</a>了,它本来是做计划管理和日志的,但事实上是无所不能),然后post sub-tree: </p>   <pre class="example">M-x org2blog/wp-post-subtree
</pre>    <p> 要正常使用org2blog,必需安装最新的org-mode(我的版本为7.5,`M-x org-version'检查当前版本,警告,<a href="https://github.com/punchagan/org2blog/issues/46">7.5不可靠</a>,应升级到最新版本,我用从git服务器取得"d6aba4db"版本). </p> <p> emacs(版本23.3.1)自带的org-mode太老,和最新的org2blog(&lt;2011-04-12 二&gt;的版本)不兼容. </p> <p> org2blog安装步骤在上文的链接里都有,也可以参看<a href="http://objectcommando.com/blog/2011/01/25/blogging-with-org2blog/">Blogging with org2blog</a>. </p> <p> org-mode安装步骤见<a href="http://orgmode.org/guide/Installation.html#Installation">官方文档</a>. </p>
</div>
            </div>
        </div>
        <div class="post">
            <h1 class="title"><a href="posts/yi-bu-wu-liao-de-zhen-zhi-xuan-chuan-pian.html">切.格瓦拉 阿根廷(Che: Part One),一部无聊的政治宣传片</a></h1>
            <div class="meta">
                <div class="authordate">
                    <time class="timeago" datetime="2009-05-02T11:13:00+00:00">2009-05-02 11:13</time>
                </div>
                <div class="stats">
                    
        
    <a href="posts/yi-bu-wu-liao-de-zhen-zhi-xuan-chuan-pian.html#disqus_thread" data-disqus-identifier="cache/posts/yi-bu-wu-liao-de-zhen-zhi-xuan-chuan-pian.html">Comments</a>


                </div>
            

            </div>
            <div class="body">
                <div>
<p></p>
<div>剧情基本上就是记流水帐,从1955年<a href="http://zh.wikipedia.org/wiki/%E8%8F%B2%E5%BE%B7%E5%B0%94%C2%B7%E5%8D%A1%E6%96%AF%E7%89%B9%E7%BD%97">卡斯特罗</a>(<a href="http://en.wikipedia.org/wiki/Fidel_Castro">Castro</a>)等人在墨西哥城组织七·二六运动(<a href="http://en.wikipedia.org/wiki/Che_Guevara" target="_blank">26th of July Movement</a>)开始,然后就是行军,袭击兵营,伏击战,救治伤员,做群众工作(给村民看病,演讲),处决违法军纪的士兵,最后是革命的高潮,<a href="http://zh.wikipedia.org/wiki/%E5%88%87%C2%B7%E6%A0%BC%E7%93%A6%E6%8B%89">切.格瓦拉</a>(<a href="http://en.wikipedia.org/wiki/Che_Guevara">Che Guevara</a>)和Camilo Cienfuegos夺取Las Villas省的首府<a href="http://en.wikipedia.org/wiki/Che_Guevara" target="_blank">Santa Clara</a>,这是古巴革命最后一场战役,12小时后古巴独裁者<a href="http://zh.wikipedia.org/wiki/%E5%AF%8C%E5%B0%94%E4%BA%A8%E8%A5%BF%E5%A5%A5%C2%B7%E5%B7%B4%E8%92%82%E6%96%AF%E5%A1%94">巴蒂斯塔</a>(Batista)离开了古巴. 当中穿插了卡斯特罗访问美国,在联合国做演讲,接受采访的片段.<br><br>电影的主要缺点是缺少人物性格刻画.格瓦拉的政治主张是什么(例如建立什么样的政府?)?他为何接受社会主义?他喜欢什么?不喜欢什么?他的性格有什么特点(不愿意在阿根廷做医生而去古巴参加革命的人很可能性格有不同于常人的地方)?这些电影中都没有提及.我看到的只有好人打坏人再加上一些战斗场面.<br><br>古巴政府和军队坏,因为电影中古巴革命者说Batista腐败.说古巴政府出卖国家利益给美国,例如古巴对美国的贸易逆差为10亿美元.还因为一些比较感性的镜头,比如古巴军队枪杀帮助游击队的平民.古巴军队的飞机轰炸攻入城市的革命者,杀伤了很多平民.古巴军队虐待俘虏.<br><br>说实话我认为这种对坏蛋的描写挺幼稚的.我感兴趣的是古巴革命爆发和革命队伍壮大的原因,对此电影没有做出合理的解释.<br><br>例如所谓古巴和美国的贸易逆差,我也可以从经济学解释为古巴需要从美国进口的货物多,可以出口给美国的<b>美国人需要的</b>货物少,这好像恰恰是"美国是世界最强大的发达国家的"的结果.当然"贸易逆差"可以是激发"民族主义"的借口,民族主义几乎是近现代革命的必备导火索.但是"贸易逆差"的这段戏导演仅处理为几个领袖间的闲谈,给我的印象就是领袖们私下的谈话缺乏逻辑思维,如果是通过给群众或士兵的演讲来表现的话,我就会认为卡斯特罗等人确实挺会激发(或操纵)大众的情绪.<br><br>电影中描写古巴军队残忍的场景很平庸,例如有一幕是一个平民跑来见格瓦拉,要求其部下离开他家,因为政府军要是发现叛军,会认为他通敌,把他全家杀死.我的理解是,从逻辑上来讲,这段镜头说明了政府军的反游击队战术很成功.如果导演想说明政府军是非正义的话,至少这和古巴革命没什么关系,因为在革命和战争中清洗通敌嫌疑分子是很常见的,是内战导致了清洗而不是反之.<br><br>其他类似场景我就不罗嗦了,本质上都一样,内战中常见的残酷行为如果一边倒地都列在政府军的头上,感觉太假了,没有说服力.而且这些行为古巴革命没有重要的因果联系(同样的事件也发生在美国,英国,法国,俄国内战上).<br><br>对好人的描写我怀疑是参考了我国早期的革命电影.电影的一开始,古巴军队在追捕逃亡的格瓦拉,导演拉了个惊慌失措的普通战士给格瓦拉作伴来衬托主角的镇定自若.接下,格瓦拉免费给村民看病,格瓦拉教文盲战士识字,格瓦拉英明神武,某个战士连发两发火箭炮都没有打中敌人的据点,格瓦拉说声"让我来",夺过火箭炮一炮就打爆敌人据点.等等等等... <br><br>电影唯一的亮点是战争场面不错,挺火爆残酷的,我作为男性观众挺享受的.<br>Technorati Tags: <a rel="tag" href="http://technorati.com/tag/movie" class="performancingtags">movie</a>, <a rel="tag" href="http://technorati.com/tag/revolution" class="performancingtags">revolution</a>, <a rel="tag" href="http://technorati.com/tag/%E7%94%B5%E5%BD%B1" class="performancingtags">电影</a>, <a rel="tag" href="http://technorati.com/tag/%E9%9D%A9%E5%91%BD" class="performancingtags">革命</a>, <a rel="tag" href="http://technorati.com/tag/%E6%A0%BC%E7%93%A6%E6%8B%89" class="performancingtags">格瓦拉</a><br><br><div class="zemanta-pixie"><img src="http://img.zemanta.com/pixy.gif?x-id=25eb970e-49e2-86e9-9e60-bf129e8839e4" class="zemanta-pixie-img"></div>
</div>
</div>
            </div>
        </div>
        <div class="post">
            <h1 class="title"><a href="posts/dropbox-hen-you-chuang-yi.html">DropBox很有创意</a></h1>
            <div class="meta">
                <div class="authordate">
                    <time class="timeago" datetime="2009-04-26T06:50:00+00:00">2009-04-26 06:50</time>
                </div>
                <div class="stats">
                    
        
    <a href="posts/dropbox-hen-you-chuang-yi.html#disqus_thread" data-disqus-identifier="cache/posts/dropbox-hen-you-chuang-yi.html">Comments</a>


                </div>
            

            </div>
            <div class="body">
                <div>
<p></p>
<div>本质上是给你一个网络硬盘还带版本控制.但是把界面傻瓜化了,用户看到的就是在My Document目录下多了个My DropBox文件夹,然后往里丢东西就可以了.使用这个<a href="https://www.getdropbox.com/referrals/NTg1ODg2Mjk">链接</a>可以立刻免费获得2G空间.<br><br><br><div class="zemanta-pixie"><img src="http://img.zemanta.com/pixy.gif?x-id=6a48c6de-51da-87f3-a486-c9439e4de67a" class="zemanta-pixie-img"></div>
</div>
</div>
            </div>
        </div>
        <div class="post">
            <h1 class="title"><a href="posts/perl-code-to-change-ip.html">perl code to change ip</a></h1>
            <div class="meta">
                <div class="authordate">
                    <time class="timeago" datetime="2006-12-11T10:39:00+00:00">2006-12-11 10:39</time>
                </div>
                <div class="stats">
                    
        
    <a href="posts/perl-code-to-change-ip.html#disqus_thread" data-disqus-identifier="cache/posts/perl-code-to-change-ip.html">Comments</a>


                </div>
            
        <div itemprop="keywords" class="tags">
        <ul>
        Tags : 
           <li><a class="tag p-category" href="categories/linux.html" rel="tag">linux</a></li>
        </ul>
        </div>

            </div>
            <div class="body">
                <div>
<p></p>
<p>I write this script for a real project. It changes ip of every node in a local network. All the information related to our customer is deleted. </p>
<p>if you see the test() function and you will notice "assert" lines. Yes, I believe in <strong>TDD (Test Drivern Development)</strong>. </p>
<p>

</p>

<pre class="src src-perl"><span style="color: #969896; font-style: italic;">#</span><span style="color: #969896; font-style: italic;">!/usr/bin/perl</span>



<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">File name: chgip</span>

<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">Description : change ip of every node in the local network</span>

<span style="color: #b5bd68;">require</span> <span style="color: #8abeb7;">"assert.pl"</span>;

<span style="color: #b5bd68;">use</span> <span style="color: #de935f;">File</span>::Basename;



<span style="color: #969896; font-style: italic;">#</span>

<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">Globals</span>

<span style="color: #969896; font-style: italic;">#</span>

<span style="color: #b5bd68;">use</span> <span style="color: #de935f;">vars</span> qw<span style="color: #8abeb7;">/ %opt /</span>;



<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">valid input:</span>

<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">192.168.30.151 node1 -&gt; change /etc/hosts ;$k= node1;</span>

<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">192.168.30.151 node1 eth0 none-&gt; NOT change /etc/hosts;$k=node1 eth0</span>

<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">192.168.30.151 node1 eth1 none-&gt; NOT change /etc/hosts;$k=node1 eth1</span>

<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">192.168.30.151 192.168.30.111 -&gt; NOT change /etc/hosts;$k= 192.168.30.111</span>

<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">192.168.30.151 node1 eth1 default -&gt; change /etc/hosts;$k=node1 eth1 default </span>

<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">192.168.30.151 node1 eth1 -&gt; "eth1" will be skipped andit equals </span>

<span style="color: #969896; font-style: italic;">#                          </span><span style="color: #969896; font-style: italic;">192.168.30.151 node1</span>

<span style="color: #969896; font-style: italic;">#                         </span><span style="color: #969896; font-style: italic;">cat /etc/hosts/ and you will see</span>

<span style="color: #969896; font-style: italic;">#                         </span><span style="color: #969896; font-style: italic;">"150.245.178.31 node1 node1.dcinema.com", </span>

<span style="color: #969896; font-style: italic;">#                         </span><span style="color: #969896; font-style: italic;">we will avoid confilict with such lines in /etc/hosts</span>



$<span style="color: #f0c674;">USE_SSH</span>=1;

$<span style="color: #f0c674;">USE_TELNET</span>=2;

<span style="color: #969896; font-style: italic;">############################</span>

<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">main</span>

<span style="color: #969896; font-style: italic;">############################</span>

$<span style="color: #f0c674;">NDEBUG</span>=0; <span style="color: #969896; font-style: italic;"># NDEBUG  NOT debug version</span>



&amp;<span style="color: #81a2be;">init</span>();

<span style="color: #b5bd68;">if</span>($<span style="color: #f0c674;">opt</span>{h}){
    usage();<span style="color: #b5bd68;">exit</span> 1;
}



$<span style="color: #f0c674;">NDEBUG</span>=$<span style="color: #f0c674;">opt</span>{d}?0:1;



<span style="color: #b5bd68;">if</span>($<span style="color: #f0c674;">NDEBUG</span>){
    <span style="color: #de935f;">my</span> @<span style="color: #f0c674; text-decoration: underline;">pipein</span>;

    <span style="color: #b5bd68;">if</span>(&amp;<span style="color: #81a2be;">is_interactive</span>()){
        <span style="color: #b5bd68;">if</span>($#<span style="color: #f0c674; text-decoration: underline;">ARGV</span>==-1){
            usage();<span style="color: #b5bd68;">exit</span> 1;
        }
        @<span style="color: #f0c674; text-decoration: underline;">pipein</span>=split(<span style="color: #8abeb7;">/[rn]+/</span>,$<span style="color: #f0c674;">ARGV</span>[$#<span style="color: #f0c674; text-decoration: underline;">ARGV</span>]);
    }
    <span style="color: #b5bd68;">else</span>{
        @<span style="color: #f0c674; text-decoration: underline;">pipein</span>=;
    }


<span style="color: #969896; font-style: italic;">#</span><span style="color: #969896; font-style: italic;">print "pipein[0]=$pipein[0]n"; #debug</span>


    <span style="color: #b5bd68;">if</span>(!$<span style="color: #f0c674;">opt</span>{a} &amp;&amp; !$<span style="color: #f0c674;">opt</span>{p}){
        $<span style="color: #f0c674;">opt</span>{a}=$<span style="color: #f0c674;">USE_SSH</span>;
    }

    <span style="color: #de935f;">my</span> $<span style="color: #f0c674;">arp</span>;
    <span style="color: #b5bd68;">if</span>($<span style="color: #f0c674;">opt</span>{a}){
        $<span style="color: #f0c674;">arp</span>=&amp;<span style="color: #81a2be;">get_hosts_from_arp</span>();
    }
    <span style="color: #de935f;">my</span> $<span style="color: #f0c674;">h</span>=&amp;<span style="color: #81a2be;">who_will_change</span>(@<span style="color: #f0c674; text-decoration: underline;">pipein</span>);

    <span style="color: #de935f;">my</span> $<span style="color: #f0c674;">pingable</span>;
    <span style="color: #b5bd68;">if</span>($<span style="color: #f0c674;">opt</span>{p}){
        $<span style="color: #f0c674;">pingable</span>=&amp;<span style="color: #81a2be;">who_are_pingable</span>($<span style="color: #f0c674;">h</span>);
    }

    <span style="color: #de935f;">my</span> %<span style="color: #f0c674; text-decoration: underline;">whose_ip_changed</span>=();

    <span style="color: #de935f;">my</span> $<span style="color: #f0c674;">local_restart_later</span>=0;
<span style="color: #969896; font-style: italic;">#</span><span style="color: #969896; font-style: italic;">for my $it (keys %$h){ print "key=$it:val=$h-&gt;{$it}n"; } #debug </span>
    <span style="color: #de935f;">my</span> $<span style="color: #f0c674;">pingcmd</span>=&amp;<span style="color: #81a2be;">get_pingcmd</span>();
    <span style="color: #b5bd68;">for</span> <span style="color: #de935f;">my</span> $<span style="color: #f0c674;">k</span> (sort keys %$<span style="color: #f0c674;">h</span>){
        <span style="color: #de935f;">my</span> @<span style="color: #f0c674; text-decoration: underline;">a</span>=split(<span style="color: #8abeb7;">/[st]+/</span>,$<span style="color: #f0c674;">k</span>);
        <span style="color: #de935f;">my</span> $<span style="color: #f0c674;">s</span>=<span style="color: #8abeb7;">`hostname`</span>;chomp($<span style="color: #f0c674;">s</span>);
        <span style="color: #b5bd68;">if</span>($<span style="color: #f0c674;">a</span>[0] eq $<span style="color: #f0c674;">s</span>){
            $<span style="color: #f0c674;">local_restart_later</span>=1;
        }

        <span style="color: #b5bd68;">if</span>($<span style="color: #f0c674;">opt</span>{a}){
            <span style="color: #b5bd68;">if</span>(!exists($<span style="color: #f0c674;">arp</span>-&gt;{$<span style="color: #f0c674;">a</span>[0]})){ <span style="color: #b5bd68;">if</span>($<span style="color: #f0c674;">s</span> ne $<span style="color: #f0c674;">a</span>[0]){ <span style="color: #b5bd68;">next</span>; } }
        }

        <span style="color: #b5bd68;">if</span>($<span style="color: #f0c674;">opt</span>{p}){
            <span style="color: #b5bd68;">if</span>(!exists($<span style="color: #f0c674;">pingable</span>-&gt;{$<span style="color: #f0c674;">a</span>[0]})){ <span style="color: #b5bd68;">next</span>; }
        }
        <span style="color: #de935f;">my</span> $<span style="color: #f0c674;">netcard</span>=<span style="color: #8abeb7;">"eth0"</span>;
        <span style="color: #b5bd68;">if</span>($#<span style="color: #f0c674; text-decoration: underline;">a</span>==2){
            <span style="color: #b5bd68;">if</span>($<span style="color: #f0c674;">a</span>[2] eq <span style="color: #8abeb7;">"default"</span> || $<span style="color: #f0c674;">a</span>[2] eq <span style="color: #8abeb7;">"none"</span>){
                $<span style="color: #f0c674;">netcard</span>=$<span style="color: #f0c674;">a</span>[1];
            }
        }
        <span style="color: #969896; font-style: italic;">#print "netcard=$netcardn"; #debug</span>
        print <span style="color: #8abeb7;">"changing ip of $netcard on $a[0] ... "</span>;
        <span style="color: #de935f;">my</span> $<span style="color: #f0c674;">try_telnet</span>=0;
        $<span style="color: #f0c674;">ret</span>=&amp;<span style="color: #81a2be;">change_ip</span>($<span style="color: #f0c674;">a</span>[0],$<span style="color: #f0c674;">h</span>-&gt;{$<span style="color: #f0c674;">k</span>},<span style="color: #8abeb7;">"/etc/sysconfig/network-scripts"</span>,
                        $<span style="color: #f0c674;">netcard</span>,$<span style="color: #f0c674;">try_telnet</span>);
        <span style="color: #b5bd68;">if</span>($<span style="color: #f0c674;">ret</span>){
            print <span style="color: #8abeb7;">"failed!n"</span>;
        }
        <span style="color: #b5bd68;">else</span>{
            $<span style="color: #f0c674;">whose_ip_changed</span>{$<span style="color: #f0c674;">a</span>[0]}=1;
            print <span style="color: #8abeb7;">"succeededn"</span>;
        }
        <span style="color: #b5bd68;">if</span>($<span style="color: #f0c674;">try_telnet</span>){
            <span style="color: #b5bd68;">if</span>($<span style="color: #f0c674;">opt</span>{a}){
                $<span style="color: #f0c674;">arp</span>-&gt;{$<span style="color: #f0c674;">a</span>[0]}=$<span style="color: #f0c674;">USE_TELNET</span>;
            }

            <span style="color: #b5bd68;">if</span>($<span style="color: #f0c674;">opt</span>{p}){
                $<span style="color: #f0c674;">pingable</span>-&gt;{$<span style="color: #f0c674;">a</span>[0]}=$<span style="color: #f0c674;">USE_TELNET</span>;
            }
        }
    }


<span style="color: #969896; font-style: italic;">#</span><span style="color: #969896; font-style: italic;">change /etc/host, every node need it</span>
    <span style="color: #de935f;">my</span> %<span style="color: #f0c674; text-decoration: underline;">nodes_restarted</span>=();
    system(<span style="color: #8abeb7;">"cp -f /etc/hosts /tmp/hosts.new &gt;/dev/null 2&gt;&amp;1"</span>);
    &amp;<span style="color: #81a2be;">change_etc_hosts</span>(<span style="color: #8abeb7;">"/tmp/hosts.new"</span>,$<span style="color: #f0c674;">h</span>);


<span style="color: #969896; font-style: italic;">#</span><span style="color: #969896; font-style: italic;">distribute /etc/hosts</span>
    <span style="color: #b5bd68;">for</span> <span style="color: #de935f;">my</span> $<span style="color: #f0c674;">k</span> (keys %$<span style="color: #f0c674;">h</span>){
        <span style="color: #de935f;">my</span> @<span style="color: #f0c674; text-decoration: underline;">a</span>=split(<span style="color: #8abeb7;">/[st]+/</span>,$<span style="color: #f0c674;">k</span>);
        <span style="color: #de935f;">my</span> $<span style="color: #f0c674;">s</span>=<span style="color: #8abeb7;">`hostname`</span>;chomp($<span style="color: #f0c674;">s</span>);
        <span style="color: #b5bd68;">if</span>( $<span style="color: #f0c674;">s</span> eq $<span style="color: #f0c674;">a</span>[0]){
            <span style="color: #969896; font-style: italic;">#print "s=$s;k=$k****n"; #debug</span>
            <span style="color: #969896; font-style: italic;">#you need reinstall ssh key, if you change anyone's ip and you want </span>
            <span style="color: #969896; font-style: italic;">#ssh it again </span>
            <span style="color: #b5bd68;">next</span>;
        }

        <span style="color: #969896; font-style: italic;">#if we cannot connect to the node, how can we send it /etc/hosts</span>
        <span style="color: #b5bd68;">if</span>($<span style="color: #f0c674;">opt</span>{a}){
            <span style="color: #b5bd68;">if</span>(!exists($<span style="color: #f0c674;">arp</span>-&gt;{$<span style="color: #f0c674;">a</span>[0]}) || $<span style="color: #f0c674;">arp</span>-&gt;{$<span style="color: #f0c674;">a</span>[0]}==$<span style="color: #f0c674;">USE_TELNET</span> )
            {
                <span style="color: #b5bd68;">next</span>;
            }
        }

        <span style="color: #b5bd68;">if</span>($<span style="color: #f0c674;">opt</span>{p}){
            <span style="color: #b5bd68;">if</span>(!exists($<span style="color: #f0c674;">pingable</span>-&gt;{$<span style="color: #f0c674;">a</span>[0]}) || $<span style="color: #f0c674;">pingable</span>-&gt;{$<span style="color: #f0c674;">a</span>[0]}==$<span style="color: #f0c674;">USE_TELNET</span> )
            {
                <span style="color: #b5bd68;">next</span>;
            }
        }

        <span style="color: #de935f;">my</span> @<span style="color: #f0c674; text-decoration: underline;">a</span>=split(<span style="color: #8abeb7;">/[st]+/</span>,$<span style="color: #f0c674;">k</span>);
        <span style="color: #969896; font-style: italic;">#it's ridiculous to restart same pc again and again!</span>
        <span style="color: #b5bd68;">if</span>(!exists($<span style="color: #f0c674;">nodes_restarted</span>{$<span style="color: #f0c674;">a</span>[0]})){
            <span style="color: #de935f;">my</span> $<span style="color: #f0c674;">ret</span>=0;
            print <span style="color: #8abeb7;">"distributing new /etc/hosts to $a[0] ... "</span>;
            $<span style="color: #f0c674;">ret</span>=system(<span style="color: #8abeb7;">"scp /tmp/hosts.new root@$a[0]:/etc/hosts &gt;/dev/null 2&gt;&amp;1"</span>);
            <span style="color: #b5bd68;">if</span>($<span style="color: #f0c674;">ret</span>){
                print <span style="color: #8abeb7;">"failed!n"</span>;
            }
            <span style="color: #b5bd68;">else</span>{
                print <span style="color: #8abeb7;">"succeededn"</span>;
            }



            <span style="color: #969896; font-style: italic;">#http://groups.google.com/group/linux.gentoo.user/browse_frm/thread/</span>
            <span style="color: #969896; font-style: italic;">#       677f23ea20dd85a/506384edeba2c270?lnk=st&amp;q=ssh+network+restart&amp;rnum=5&amp;hl</span>
            <span style="color: #969896; font-style: italic;">#       =zh-CN#506384edeba2c270</span>
            <span style="color: #969896; font-style: italic;">#print `cat /etc/hosts|grep node1`; #debug</span>
            <span style="color: #969896; font-style: italic;">#nohup return too quickly, before ssh starts, we've already changed /etc/hosts</span>
            <span style="color: #de935f;">my</span> $<span style="color: #f0c674;">restart_cmd</span>=<span style="color: #8abeb7;">"/etc/init.d/network restart;/etc/init.d/rmiregistry restart;"</span>;
            <span style="color: #b5bd68;">if</span>($<span style="color: #f0c674;">a</span>[0]=~<span style="color: #8abeb7;">/node[0-9]+/</span>){
                $<span style="color: #f0c674;">restart_cmd</span>.=<span style="color: #8abeb7;">"restart_some_scripts;"</span>;
            }
            <span style="color: #b5bd68;">elsif</span>($<span style="color: #f0c674;">a</span>[0]=~<span style="color: #8abeb7;">/ekfp[0-9]+/</span>){
                $<span style="color: #f0c674;">restart_cmd</span>.=<span style="color: #8abeb7;">"fp_restart;"</span>;
            }
            <span style="color: #969896; font-style: italic;">#print "restart_cmd=$restart_cmdn"; #debug</span>
            $<span style="color: #f0c674;">ret</span>=system(<span style="color: #8abeb7;">"nohup ssh root@"</span>.&amp;<span style="color: #81a2be;">get_ip</span>($<span style="color: #f0c674;">a</span>[0]).<span style="color: #8abeb7;">" '$restart_cmd' &gt;/dev/null 2&gt;&amp;1 &amp;"</span>);
            $<span style="color: #f0c674;">nodes_restarted</span>{$<span style="color: #f0c674;">a</span>[0]}=1;
        }
        <span style="color: #b5bd68;">else</span>{
            $<span style="color: #f0c674;">nodes_restarted</span>{$<span style="color: #f0c674;">a</span>[0]}+=1;
        }
    } <span style="color: #969896; font-style: italic;">#end of for</span>


<span style="color: #969896; font-style: italic;">#</span><span style="color: #969896; font-style: italic;">print("local_restart_later=$local_restart_latern");#debug</span>
    system(<span style="color: #8abeb7;">"cp -f /tmp/hosts.new /etc/hosts &gt;/dev/null 2&gt;&amp;1"</span>);
<span style="color: #969896; font-style: italic;">#</span><span style="color: #969896; font-style: italic;">print `cat /etc/hosts|grep node1`; #debug</span>
    <span style="color: #b5bd68;">if</span>($<span style="color: #f0c674;">local_restart_later</span> ){
        <span style="color: #de935f;">my</span> $<span style="color: #f0c674;">restart_cmd</span>=<span style="color: #8abeb7;">"/etc/init.d/network restart &gt;/dev/null 2&gt;&amp;1;"</span>;
        <span style="color: #de935f;">my</span> $<span style="color: #f0c674;">s</span>=<span style="color: #8abeb7;">`hostname`</span>;chomp($<span style="color: #f0c674;">s</span>);
        print <span style="color: #8abeb7;">"restarting $s ... "</span>;
        <span style="color: #b5bd68;">if</span>($<span style="color: #f0c674;">s</span>=~<span style="color: #8abeb7;">/manager.*/</span> ){
            $<span style="color: #f0c674;">restart_cmd</span>.=<span style="color: #8abeb7;">"restart_some_scripts &gt;/dev/null 2&gt;&amp;1;"</span>;
        }
        <span style="color: #b5bd68;">else</span>{
            $<span style="color: #f0c674;">restart_cmd</span>.=<span style="color: #8abeb7;">"restart_some_scripts &gt;/dev/null 2&gt;&amp;1;"</span>;
        }
        <span style="color: #969896; font-style: italic;">#assume this is a cms or tms</span>
        <span style="color: #de935f;">my</span> $<span style="color: #f0c674;">ret</span>=system($<span style="color: #f0c674;">restart_cmd</span>);
        <span style="color: #b5bd68;">if</span>($<span style="color: #f0c674;">ret</span>){
            print <span style="color: #8abeb7;">"failed!n"</span>;
        }
        <span style="color: #b5bd68;">else</span>{
            print <span style="color: #8abeb7;">"succeededn"</span>;
        }

    }

    print <span style="color: #8abeb7;">"finished to change ip!n"</span>;
    system(<span style="color: #8abeb7;">"rm nohup.out &gt;/dev/null 2&gt;&amp;1"</span>);
    system(<span style="color: #8abeb7;">"rm ~/.ssh/known_hosts&gt;/dev/null 2&gt;&amp;1"</span>);

    <span style="color: #b5bd68;">if</span>($<span style="color: #f0c674;">opt</span>{a}){
        print <span style="color: #8abeb7;">"updating arp cache ... "</span>;
        <span style="color: #b5bd68;">for</span> <span style="color: #de935f;">my</span> $<span style="color: #f0c674;">k</span> (keys %<span style="color: #f0c674; text-decoration: underline;">whose_ip_changed</span>){
            <span style="color: #de935f;">my</span> $<span style="color: #f0c674;">pingcmd</span>=&amp;<span style="color: #81a2be;">get_pingcmd</span>();
            system(<span style="color: #8abeb7;">"$pingcmd $k &gt;/dev/null 2&gt;&amp;1"</span>);
        }
        print <span style="color: #8abeb7;">"finishedn"</span>;
    }
}<span style="color: #969896; font-style: italic;">#if(0)</span>



<span style="color: #969896; font-style: italic;">############################</span>

<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">test</span>

<span style="color: #969896; font-style: italic;">############################</span>

<span style="color: #b5bd68;">if</span>(!$<span style="color: #f0c674;">NDEBUG</span>){
    &amp;<span style="color: #81a2be;">test</span>();
}<span style="color: #969896; font-style: italic;">#if(0)</span>



<span style="color: #b5bd68;">sub</span> <span style="color: #81a2be;">test</span>

{


    <span style="color: #b5bd68;">if</span>(1){
        <span style="color: #de935f;">my</span> $<span style="color: #f0c674;">hostname</span>=<span style="color: #8abeb7;">`hostname`</span>;chomp($<span style="color: #f0c674;">hostname</span>);
        <span style="color: #de935f;">my</span> $<span style="color: #f0c674;">pipein</span>;
        <span style="color: #b5bd68;">if</span>(&amp;<span style="color: #81a2be;">is_interactive</span>()){
            @<span style="color: #f0c674; text-decoration: underline;">pipein</span>=split(<span style="color: #8abeb7;">/[rn]/</span>,<span style="color: #8abeb7;">"127.0.0.9 $hostname"</span>);
            <span style="color: #de935f;">my</span> $<span style="color: #f0c674;">h</span>=&amp;<span style="color: #81a2be;">who_will_change</span>(@<span style="color: #f0c674; text-decoration: underline;">pipein</span>);
            <span style="color: #de935f;">my</span> $<span style="color: #f0c674;">pingable</span>=&amp;<span style="color: #81a2be;">who_are_pingable</span>($<span style="color: #f0c674;">h</span>);
            assert(exists($<span style="color: #f0c674;">pingable</span>-&gt;{$<span style="color: #f0c674;">hostname</span>}));
        }
        <span style="color: #b5bd68;">else</span>{
            @<span style="color: #f0c674; text-decoration: underline;">pipein</span>=;
            <span style="color: #de935f;">my</span> $<span style="color: #f0c674;">h</span>=&amp;<span style="color: #81a2be;">who_will_change</span>(@<span style="color: #f0c674; text-decoration: underline;">pipein</span>);
            <span style="color: #de935f;">my</span> $<span style="color: #f0c674;">pingable</span>=&amp;<span style="color: #81a2be;">who_are_pingable</span>($<span style="color: #f0c674;">h</span>);
            print <span style="color: #8abeb7;">"*********who are pingable**********beginn"</span>;
            <span style="color: #b5bd68;">for</span> <span style="color: #de935f;">my</span> $<span style="color: #f0c674;">k</span> (keys %$<span style="color: #f0c674;">pingable</span>){
                print <span style="color: #8abeb7;">"key=$kn"</span>;
                print <span style="color: #8abeb7;">"val=$pingable-&gt;{$k}n"</span>;
            }
            print <span style="color: #8abeb7;">"*********who are pingable**********endn"</span>;
        }
    }

    <span style="color: #b5bd68;">if</span>(1){
        <span style="color: #de935f;">my</span> $<span style="color: #f0c674;">id</span>=&amp;<span style="color: #81a2be;">unique_id</span>();
        print <span style="color: #8abeb7;">"id=$idn"</span>;
        assert( $<span style="color: #f0c674;">id</span> ne <span style="color: #8abeb7;">""</span>);
    }<span style="color: #969896; font-style: italic;">#if(0)</span>

    <span style="color: #b5bd68;">if</span>(1){
        <span style="color: #de935f;">my</span> $<span style="color: #f0c674;">id</span>=<span style="color: #8abeb7;">"test_set_one_card"</span>;
        print <span style="color: #8abeb7;">"file written by set_onecard=$idn"</span>;
        <span style="color: #8abeb7;">`echo "IPADDR=192.168.30.100" &gt; $id`</span>;
        <span style="color: #8abeb7;">`echo "NETWORK=192.168.30.0" &gt;&gt; $id`</span>;
        <span style="color: #8abeb7;">`echo "BROADCAST=192.168.30.255" &gt;&gt; $id`</span>;
        <span style="color: #8abeb7;">`echo "GATEWAY=192.168.30.1" &gt;&gt; $id`</span>;
        &amp;<span style="color: #81a2be;">set_one_card</span>(<span style="color: #8abeb7;">"11.168.30.100"</span>,$<span style="color: #f0c674;">id</span>);
        open(F,$<span style="color: #f0c674;">id</span>);
        <span style="color: #de935f;">my</span> @<span style="color: #f0c674; text-decoration: underline;">lines</span>=;
        close(F);
        chomp($<span style="color: #f0c674;">lines</span>[0]);assert($<span style="color: #f0c674;">lines</span>[0] eq <span style="color: #8abeb7;">"IPADDR=11.168.30.100"</span>);
        chomp($<span style="color: #f0c674;">lines</span>[1]);assert($<span style="color: #f0c674;">lines</span>[1] eq <span style="color: #8abeb7;">"NETWORK=11.168.30.0"</span>);
        chomp($<span style="color: #f0c674;">lines</span>[2]);assert($<span style="color: #f0c674;">lines</span>[2] eq <span style="color: #8abeb7;">"BROADCAST=11.168.30.255"</span>);
        chomp($<span style="color: #f0c674;">lines</span>[3]);assert($<span style="color: #f0c674;">lines</span>[3] eq <span style="color: #8abeb7;">"GATEWAY=11.168.30.1"</span>);
        <span style="color: #8abeb7;">`rm $id`</span>;
    }
    <span style="color: #b5bd68;">if</span>(1){
        <span style="color: #de935f;">my</span> $<span style="color: #f0c674;">hostname</span>=<span style="color: #8abeb7;">`hostname`</span>;chomp($<span style="color: #f0c674;">hostname</span>);
        <span style="color: #de935f;">my</span> $<span style="color: #f0c674;">ip</span>=get_ip($<span style="color: #f0c674;">hostname</span>);
        print <span style="color: #8abeb7;">"ip=$ipn"</span>;
        assert(&amp;<span style="color: #81a2be;">is_valid_ip</span>($<span style="color: #f0c674;">ip</span>));
        <span style="color: #de935f;">my</span> $<span style="color: #f0c674;">rubbish</span>=get_ip(<span style="color: #8abeb7;">"rubbish"</span>);
        assert( $<span style="color: #f0c674;">rubbish</span> eq <span style="color: #8abeb7;">"rubbish"</span>);
    }



    <span style="color: #b5bd68;">if</span>(1){
        <span style="color: #de935f;">my</span> $<span style="color: #f0c674;">p</span>=<span style="color: #8abeb7;">"127.0.0.9 node1n0.0.0.0 node2"</span>;
        <span style="color: #de935f;">my</span> @<span style="color: #f0c674; text-decoration: underline;">pipein</span>=split(<span style="color: #8abeb7;">/[rn]+/</span>,$<span style="color: #f0c674;">p</span>);
        <span style="color: #de935f;">my</span> $<span style="color: #f0c674;">h</span>=&amp;<span style="color: #81a2be;">who_will_change</span>(@<span style="color: #f0c674; text-decoration: underline;">pipein</span>);
        assert($<span style="color: #f0c674;">h</span>-&gt;{<span style="color: #8abeb7;">'node1'</span>} eq <span style="color: #8abeb7;">'127.0.0.9'</span>);
        assert($<span style="color: #f0c674;">h</span>-&gt;{<span style="color: #8abeb7;">'node2'</span>} eq <span style="color: #8abeb7;">'0.0.0.0'</span>);
        <span style="color: #8abeb7;">`echo "1.1.1.1 node1" &gt; hosts`</span>;
        <span style="color: #8abeb7;">`echo "1.1.1.1 node2 node2.dcinema.com" &gt;&gt; hosts`</span>;
        <span style="color: #8abeb7;">`echo "1.1.1.1 node3" &gt;&gt; hosts`</span>;
        &amp;<span style="color: #81a2be;">change_etc_hosts</span>(<span style="color: #8abeb7;">"hosts"</span>,$<span style="color: #f0c674;">h</span>);
        open(F,<span style="color: #8abeb7;">"&lt;hosts"</span>);
        <span style="color: #de935f;">my</span> @<span style="color: #f0c674; text-decoration: underline;">lines</span>=;
        close(F);
        chomp($<span style="color: #f0c674;">lines</span>[0]);assert($<span style="color: #f0c674;">lines</span>[0] eq <span style="color: #8abeb7;">"127.0.0.9 node1"</span>);
        chomp($<span style="color: #f0c674;">lines</span>[1]);assert($<span style="color: #f0c674;">lines</span>[1] eq <span style="color: #8abeb7;">"0.0.0.0 node2 node2.dcinema.com"</span>);
        chomp($<span style="color: #f0c674;">lines</span>[2]);assert($<span style="color: #f0c674;">lines</span>[2] eq <span style="color: #8abeb7;">"1.1.1.1 node3"</span>);
    }<span style="color: #969896; font-style: italic;">#if(0)</span>

    <span style="color: #b5bd68;">if</span>(1){
        <span style="color: #de935f;">my</span> $<span style="color: #f0c674;">hostname</span>=<span style="color: #8abeb7;">`hostname`</span>;chomp($<span style="color: #f0c674;">hostname</span>);
        print(<span style="color: #8abeb7;">"hostname=$hostnamen"</span>);
        <span style="color: #de935f;">my</span> $<span style="color: #f0c674;">p</span>=<span style="color: #8abeb7;">"11.168.30.10 $hostname"</span>;
        <span style="color: #de935f;">my</span> @<span style="color: #f0c674; text-decoration: underline;">pipein</span>=split(<span style="color: #8abeb7;">/[rn]+/</span>,$<span style="color: #f0c674;">p</span>);
        <span style="color: #de935f;">my</span> $<span style="color: #f0c674;">h</span>=&amp;<span style="color: #81a2be;">who_will_change</span>(@<span style="color: #f0c674; text-decoration: underline;">pipein</span>);
        assert($<span style="color: #f0c674;">h</span>-&gt;{$<span style="color: #f0c674;">hostname</span>} eq <span style="color: #8abeb7;">'11.168.30.10'</span>);
        <span style="color: #8abeb7;">`echo "DEVICE=eth0" &gt; ifcfg-eth0`</span>;
        <span style="color: #8abeb7;">`echo "IPADDR=192.168.30.10" &gt;&gt; ifcfg-eth0`</span>;
        <span style="color: #8abeb7;">`echo "NETWORK=192.168.30.0" &gt;&gt; ifcfg-eth0`</span>;
        <span style="color: #8abeb7;">`echo "NETMASK=255.255.255.0" &gt;&gt; ifcfg-eth0`</span>;
        <span style="color: #8abeb7;">`echo "ONBOOT=yes" &gt;&gt; ifcfg-eth0`</span>;
        <span style="color: #8abeb7;">`echo "TYPE=Ethernet" &gt;&gt; ifcfg-eth0`</span>;
        <span style="color: #8abeb7;">`echo "GATEWAY=192.168.30.1" &gt;&gt; ifcfg-eth0`</span>;
        <span style="color: #8abeb7;">`echo "BROADCAST=192.168.30.255" &gt;&gt; ifcfg-eth0`</span>;
        <span style="color: #b5bd68;">use</span> <span style="color: #de935f;">Cwd</span>;
        <span style="color: #de935f;">my</span> $<span style="color: #f0c674;">d</span>=getcwd;
        print <span style="color: #8abeb7;">"cwd=$dn"</span>;
        <span style="color: #de935f;">my</span> $<span style="color: #f0c674;">pingcmd</span>=&amp;<span style="color: #81a2be;">get_pingcmd</span>();
        <span style="color: #b5bd68;">for</span> <span style="color: #de935f;">my</span> $<span style="color: #f0c674;">k</span> (keys %$<span style="color: #f0c674;">h</span>){
            <span style="color: #de935f;">my</span> $<span style="color: #f0c674;">ret</span>=0;
            <span style="color: #b5bd68;">if</span>(system(<span style="color: #8abeb7;">"$pingcmd $k"</span>)!=0){
                <span style="color: #969896; font-style: italic;">#meanless to ping self</span>
                <span style="color: #b5bd68;">if</span>($<span style="color: #f0c674;">s</span> ne $<span style="color: #f0c674;">a</span>[0]) { <span style="color: #b5bd68;">next</span>; }
            }

            <span style="color: #969896; font-style: italic;"># $k: node1</span>
            <span style="color: #969896; font-style: italic;">#     node1 eth1</span>
            <span style="color: #969896; font-style: italic;">#     eckp1 ech1 default</span>
            <span style="color: #de935f;">my</span> $<span style="color: #f0c674;">netcard</span>=<span style="color: #8abeb7;">"eth0"</span>;
            <span style="color: #de935f;">my</span> @<span style="color: #f0c674; text-decoration: underline;">a</span>=split(<span style="color: #8abeb7;">/[st]+/</span>,$<span style="color: #f0c674;">k</span>);
            <span style="color: #b5bd68;">if</span>($#<span style="color: #f0c674; text-decoration: underline;">a</span>==2){
                $<span style="color: #f0c674;">netcard</span>=$<span style="color: #f0c674;">a</span>[1];
            }
            <span style="color: #de935f;">my</span> $<span style="color: #f0c674;">try_telnet</span>;
            $<span style="color: #f0c674;">ret</span>=&amp;<span style="color: #81a2be;">change_ip</span>($<span style="color: #f0c674;">a</span>[0],$<span style="color: #f0c674;">h</span>-&gt;{$<span style="color: #f0c674;">k</span>},$<span style="color: #f0c674;">d</span>,$<span style="color: #f0c674;">netcard</span>,$<span style="color: #f0c674;">try_telnet</span>);
        }
        open(F,<span style="color: #8abeb7;">"&lt;ifcfg-eth0"</span>);
        <span style="color: #de935f;">my</span> @<span style="color: #f0c674; text-decoration: underline;">lines</span>=;
        close(F);
        chomp($<span style="color: #f0c674;">lines</span>[0]);assert($<span style="color: #f0c674;">lines</span>[0] eq <span style="color: #8abeb7;">"DEVICE=eth0"</span>);
        chomp($<span style="color: #f0c674;">lines</span>[1]);assert($<span style="color: #f0c674;">lines</span>[1] eq <span style="color: #8abeb7;">"IPADDR=11.168.30.10"</span>);
        chomp($<span style="color: #f0c674;">lines</span>[2]);assert($<span style="color: #f0c674;">lines</span>[2] eq <span style="color: #8abeb7;">"NETWORK=11.168.30.0"</span>);
        chomp($<span style="color: #f0c674;">lines</span>[3]);assert($<span style="color: #f0c674;">lines</span>[3] eq <span style="color: #8abeb7;">"NETMASK=255.255.255.0"</span>);
        chomp($<span style="color: #f0c674;">lines</span>[4]);assert($<span style="color: #f0c674;">lines</span>[4] eq <span style="color: #8abeb7;">"ONBOOT=yes"</span>);
        chomp($<span style="color: #f0c674;">lines</span>[5]);assert($<span style="color: #f0c674;">lines</span>[5] eq <span style="color: #8abeb7;">"TYPE=Ethernet"</span>);
        chomp($<span style="color: #f0c674;">lines</span>[6]);assert($<span style="color: #f0c674;">lines</span>[6] eq <span style="color: #8abeb7;">"GATEWAY=11.168.30.1"</span>);
        chomp($<span style="color: #f0c674;">lines</span>[7]);assert($<span style="color: #f0c674;">lines</span>[7] eq <span style="color: #8abeb7;">"BROADCAST=11.168.30.255"</span>);
    }

    <span style="color: #b5bd68;">if</span>(0){
        <span style="color: #de935f;">my</span> ($<span style="color: #f0c674;">name</span>,$<span style="color: #f0c674;">dir</span>,$<span style="color: #f0c674;">suffix</span>)=fileparse($<span style="color: #f0c674;">0</span>);
        print <span style="color: #8abeb7;">"name=$name;dir=$dir;suffix=$suffix;n"</span>;
        assert(-e $<span style="color: #f0c674;">dir</span>.<span style="color: #8abeb7;">"chg_jnior_ip.exp"</span>);
        <span style="color: #de935f;">my</span> $<span style="color: #f0c674;">pingcmd</span>=&amp;<span style="color: #81a2be;">get_pingcmd</span>();
        <span style="color: #de935f;">my</span> $<span style="color: #f0c674;">e1ip</span>=&amp;<span style="color: #81a2be;">get_ip</span>(<span style="color: #8abeb7;">"node1-auto"</span>);
        <span style="color: #b5bd68;">if</span>(!system(<span style="color: #8abeb7;">"$pingcmd node1-auto"</span>)){
            print <span style="color: #8abeb7;">"ip of node1-auto=$e1ipn"</span>;
            assert($<span style="color: #f0c674;">e1ip</span> ne <span style="color: #8abeb7;">"192.168.30.52"</span>);
            assert(system(<span style="color: #8abeb7;">"$pingcmd 192.168.30.52"</span>));
            <span style="color: #b5bd68;">if</span>(system($<span style="color: #f0c674;">dir</span>.<span style="color: #8abeb7;">"chg_jnior_ip.exp node1-auto 192.168.30.52"</span>)){
                assert(0);
            }
            sleep(8); <span style="color: #969896; font-style: italic;">#wait jnior</span>
            assert(!system(<span style="color: #8abeb7;">"$pingcmd 192.168.30.52"</span>));
            assert(system(<span style="color: #8abeb7;">"$pingcmd node1-auto"</span>));
            <span style="color: #b5bd68;">if</span>(system($<span style="color: #f0c674;">dir</span>.<span style="color: #8abeb7;">"chg_jnior_ip.exp 192.168.30.52 $e1ip"</span>)){
                assert(0);
            }
            sleep(8); <span style="color: #969896; font-style: italic;">#wait jnior</span>
            assert(system(<span style="color: #8abeb7;">"$pingcmd 192.168.30.52"</span>));
            assert(!system(<span style="color: #8abeb7;">"$pingcmd node1-auto"</span>));
        }
        <span style="color: #b5bd68;">else</span>{
            print <span style="color: #8abeb7;">"cannnot connect to node1-auto!n"</span>;
        }
    }

    <span style="color: #b5bd68;">if</span>(1){
        <span style="color: #de935f;">my</span> ($<span style="color: #f0c674;">network</span>,$<span style="color: #f0c674;">broadcast</span>)=&amp;<span style="color: #81a2be;">get_netprop</span>(<span style="color: #8abeb7;">"192.168.1.1"</span>);
        assert($<span style="color: #f0c674;">network</span> eq <span style="color: #8abeb7;">"192.168.1.0"</span>);
        assert($<span style="color: #f0c674;">broadcast</span> eq <span style="color: #8abeb7;">"192.168.1.255"</span>);
    }



    <span style="color: #b5bd68;">if</span>(1){
        <span style="color: #de935f;">my</span> $<span style="color: #f0c674;">h</span>=&amp;<span style="color: #81a2be;">get_hosts_from_arp</span>();
        <span style="color: #b5bd68;">foreach</span> <span style="color: #de935f;">my</span> $<span style="color: #f0c674;">k</span> (keys %$<span style="color: #f0c674;">h</span>){
            print <span style="color: #8abeb7;">"key=$k;val=$h-&gt;{$k}n"</span>; <span style="color: #969896; font-style: italic;">#debug</span>
        }
    }


}



<span style="color: #b5bd68;">sub</span> <span style="color: #81a2be;">a</span>()

{
    <span style="color: #b5bd68;">if</span>(!$<span style="color: #f0c674;">NDEBUG</span>){
        assert($<span style="color: #f0c674;">_</span>[$[]);
    }
}



<span style="color: #969896; font-style: italic;">############################</span>

<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">subroutines</span>

<span style="color: #969896; font-style: italic;">############################</span>

<span style="color: #b5bd68;">sub</span> <span style="color: #81a2be;">get_ip</span>{
    <span style="color: #de935f;">my</span> $<span style="color: #f0c674;">hostname</span>=shift;
    <span style="color: #de935f;">my</span> $<span style="color: #f0c674;">pingcmd</span>=&amp;<span style="color: #81a2be;">get_pingcmd</span>();
    <span style="color: #de935f;">my</span> $<span style="color: #f0c674;">ip</span>=<span style="color: #8abeb7;">`$pingcmd $hostname`</span>;
    <span style="color: #969896; font-style: italic;">#PING node1 (192.168.30.111) 56(84) bytes of data.</span>
    <span style="color: #969896; font-style: italic;">#64 bytes from node1 (192.168.30.111): icmp_seq=0 ttl=64 time=0.129 ms</span>
    <span style="color: #de935f;">my</span> @<span style="color: #f0c674; text-decoration: underline;">a</span>=split(<span style="color: #8abeb7;">/[rn]+/</span>,<span style="color: #8abeb7;">`$pingcmd $hostname`</span>);
    chomp($<span style="color: #f0c674;">a</span>[0]);
<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">on cygwin, the first line is empty</span>
    <span style="color: #b5bd68;">if</span>($<span style="color: #f0c674;">a</span>[0] eq <span style="color: #8abeb7;">""</span>){ $<span style="color: #f0c674;">a</span>[0]=$<span style="color: #f0c674;">a</span>[1]; }
    <span style="color: #de935f;">my</span> @<span style="color: #f0c674; text-decoration: underline;">v</span>=split(<span style="color: #8abeb7;">/[st]+/</span>,$<span style="color: #f0c674;">a</span>[0]);
    $<span style="color: #f0c674;">v</span>[2]=~s<span style="color: #8abeb7;">/[()[] ]*//</span>g;
    <span style="color: #b5bd68;">if</span>(!&amp;<span style="color: #81a2be;">is_valid_ip</span>($<span style="color: #f0c674;">v</span>[2])){
        <span style="color: #b5bd68;">return</span> $<span style="color: #f0c674;">hostname</span>;
    }
    <span style="color: #b5bd68;">return</span> $<span style="color: #f0c674;">v</span>[2];
}



<span style="color: #b5bd68;">sub</span> <span style="color: #81a2be;">is_interactive</span> {
    <span style="color: #b5bd68;">return</span> -t STDIN &amp;&amp; -t STDOUT;
}





<span style="color: #b5bd68;">sub</span> <span style="color: #81a2be;">who_will_change</span>

{
    <span style="color: #de935f;">my</span> $<span style="color: #f0c674;">ls</span>=shift;
    <span style="color: #de935f;">my</span> %<span style="color: #f0c674; text-decoration: underline;">h</span>=();
    <span style="color: #de935f;">my</span> @<span style="color: #f0c674; text-decoration: underline;">rlt</span>=grep(<span style="color: #8abeb7;">/^[0-9.]+.*/</span>,@$<span style="color: #f0c674;">ls</span>);
    <span style="color: #969896; font-style: italic;"># change ip address to 127.0.0.1 is crazy idea!</span>
    <span style="color: #de935f;">my</span> @<span style="color: #f0c674; text-decoration: underline;">rlt</span>=grep(!<span style="color: #8abeb7;">/^127.0.0.1.*/</span>,@<span style="color: #f0c674; text-decoration: underline;">rlt</span>);
    <span style="color: #b5bd68;">foreach</span> (@<span style="color: #f0c674; text-decoration: underline;">rlt</span>){
        chomp($<span style="color: #f0c674;">_</span>);
        <span style="color: #b5bd68;">if</span>($<span style="color: #f0c674;">_</span> eq <span style="color: #8abeb7;">""</span>){<span style="color: #b5bd68;">next</span>;}
        <span style="color: #de935f;">my</span> @<span style="color: #f0c674; text-decoration: underline;">a</span>=split(<span style="color: #8abeb7;">/[st]+/</span>);
        <span style="color: #b5bd68;">if</span>($#<span style="color: #f0c674; text-decoration: underline;">a</span> == 0){<span style="color: #b5bd68;">next</span>;}
        <span style="color: #de935f;">my</span> $<span style="color: #f0c674;">k</span>=$<span style="color: #f0c674;">a</span>[1];
        <span style="color: #b5bd68;">for</span>(<span style="color: #de935f;">my</span> $<span style="color: #f0c674;">i</span>=2;$<span style="color: #f0c674;">i</span>&lt;=$#<span style="color: #f0c674; text-decoration: underline;">a</span>;$<span style="color: #f0c674;">i</span>++){
            $<span style="color: #f0c674;">k</span>.=<span style="color: #8abeb7;">" "</span>.$<span style="color: #f0c674;">a</span>[$<span style="color: #f0c674;">i</span>];
        }
        $<span style="color: #f0c674;">h</span>{$<span style="color: #f0c674;">k</span>}=$<span style="color: #f0c674;">a</span>[0];
    }
    <span style="color: #b5bd68;">return</span> %<span style="color: #f0c674; text-decoration: underline;">h</span>;
}





<span style="color: #b5bd68;">sub</span> <span style="color: #81a2be;">change_etc_hosts</span>

{
    <span style="color: #de935f;">my</span> $<span style="color: #f0c674;">f</span>=shift;
    <span style="color: #de935f;">my</span> $<span style="color: #f0c674;">h</span>=shift;
    open(F,$<span style="color: #f0c674;">f</span>);
    @<span style="color: #f0c674; text-decoration: underline;">lines</span>=;
    close(F);
    <span style="color: #b5bd68;">for</span> <span style="color: #de935f;">my</span> $<span style="color: #f0c674;">k</span> (keys %$<span style="color: #f0c674;">h</span>){
        <span style="color: #969896; font-style: italic;">#print "k=$kn"; #debug</span>
        <span style="color: #de935f;">my</span> $<span style="color: #f0c674;">need_replace</span>=0;
        <span style="color: #de935f;">my</span> $<span style="color: #f0c674;">replaced</span>=0;
        <span style="color: #de935f;">my</span> @<span style="color: #f0c674; text-decoration: underline;">a</span>=();
        <span style="color: #b5bd68;">for</span>(<span style="color: #de935f;">my</span> $<span style="color: #f0c674;">i</span>=0;$<span style="color: #f0c674;">i</span>&lt;=$#<span style="color: #f0c674; text-decoration: underline;">lines</span>;$<span style="color: #f0c674;">i</span>++){
            @<span style="color: #f0c674; text-decoration: underline;">a</span>=split(<span style="color: #8abeb7;">/[st]+/</span>,$<span style="color: #f0c674;">k</span>);
            <span style="color: #b5bd68;">if</span>( $#<span style="color: #f0c674; text-decoration: underline;">a</span> == 2 &amp;&amp; ($<span style="color: #f0c674;">a</span>[2] eq <span style="color: #8abeb7;">"none"</span>) ){
                <span style="color: #b5bd68;">next</span>;
            }

            <span style="color: #b5bd68;">if</span>(&amp;<span style="color: #81a2be;">is_valid_ip</span>($<span style="color: #f0c674;">a</span>[0])){
                <span style="color: #b5bd68;">next</span>;
            }

            $<span style="color: #f0c674;">need_replace</span>=1;
            $<span style="color: #f0c674;">_</span>=$<span style="color: #f0c674;">a</span>[0];
            <span style="color: #b5bd68;">if</span>($<span style="color: #f0c674;">lines</span>[$<span style="color: #f0c674;">i</span>]!~<span style="color: #8abeb7;">/^[d.]+[st]+$_[strn]+/</span>){
                <span style="color: #b5bd68;">next</span>;
            }

            $<span style="color: #f0c674;">lines</span>[$<span style="color: #f0c674;">i</span>]=~s<span style="color: #8abeb7;">/^[d.]+/$h-&gt;{$k}/</span>g;
            $<span style="color: #f0c674;">replaced</span>=1;

            <span style="color: #969896; font-style: italic;">#print "line=".$lines[$i]; #debug</span>
        }

        <span style="color: #b5bd68;">if</span>( $<span style="color: #f0c674;">need_replace</span> &amp;&amp; !$<span style="color: #f0c674;">replaced</span> ){
            push(@<span style="color: #f0c674; text-decoration: underline;">lines</span>,<span style="color: #8abeb7;">"$h-&gt;{$k} $a[0]n"</span>);
        }
    }
    <span style="color: #969896; font-style: italic;">#foreach (@lines){print "line=$_";}; #debug</span>
    open (F,<span style="color: #8abeb7;">"&gt;$f"</span>);
    print F (@<span style="color: #f0c674; text-decoration: underline;">lines</span>);
    close(F);
}



<span style="color: #b5bd68;">sub</span> <span style="color: #81a2be;">get_pingcmd</span>

{
    <span style="color: #de935f;">my</span> $<span style="color: #f0c674;">s</span>=<span style="color: #8abeb7;">`uname`</span>;chomp($<span style="color: #f0c674;">s</span>);
    <span style="color: #b5bd68;">if</span>($<span style="color: #f0c674;">s</span> eq <span style="color: #8abeb7;">"Linux"</span>){
        <span style="color: #b5bd68;">return</span> <span style="color: #8abeb7;">"ping -c3"</span>;
    }
    <span style="color: #b5bd68;">return</span> <span style="color: #8abeb7;">"ping"</span>;
}



<span style="color: #b5bd68;">sub</span> <span style="color: #81a2be;">set_one_card</span>

{
    <span style="color: #de935f;">my</span> $<span style="color: #f0c674;">addr</span>=shift;
    <span style="color: #de935f;">my</span> $<span style="color: #f0c674;">ifcfg</span>=shift;
    <span style="color: #de935f;">my</span> @<span style="color: #f0c674; text-decoration: underline;">p</span>=split(<span style="color: #8abeb7;">/./</span>,$<span style="color: #f0c674;">addr</span>);
    open(F,<span style="color: #8abeb7;">"&lt;$ifcfg"</span>);
    <span style="color: #de935f;">my</span> @<span style="color: #f0c674; text-decoration: underline;">lines</span>=;
    <span style="color: #b5bd68;">for</span>(<span style="color: #de935f;">my</span> $<span style="color: #f0c674;">i</span>=0;$<span style="color: #f0c674;">i</span>&lt;=$#<span style="color: #f0c674; text-decoration: underline;">lines</span>;$<span style="color: #f0c674;">i</span>++){
        <span style="color: #b5bd68;">if</span>($<span style="color: #f0c674;">lines</span>[$<span style="color: #f0c674;">i</span>]=~<span style="color: #8abeb7;">/IPADDR=.*$/</span>){
            $<span style="color: #f0c674;">lines</span>[$<span style="color: #f0c674;">i</span>]=<span style="color: #8abeb7;">"IPADDR=$addrn"</span>;
        }
        <span style="color: #b5bd68;">elsif</span>($<span style="color: #f0c674;">lines</span>[$<span style="color: #f0c674;">i</span>]=~<span style="color: #8abeb7;">/NETWORK=.*$/</span>){
            <span style="color: #de935f;">my</span> @<span style="color: #f0c674; text-decoration: underline;">orig</span>=split(<span style="color: #8abeb7;">/=/</span>,$<span style="color: #f0c674;">lines</span>[$<span style="color: #f0c674;">i</span>]);
            chomp($<span style="color: #f0c674;">orig</span>[1]);
            <span style="color: #de935f;">my</span> @<span style="color: #f0c674; text-decoration: underline;">o</span>=split(<span style="color: #8abeb7;">/./</span>,$<span style="color: #f0c674;">orig</span>[1]);
            $<span style="color: #f0c674;">s</span>=<span style="color: #8abeb7;">"$p[0].$p[1].$p[2].$o[3]"</span>;
            $<span style="color: #f0c674;">lines</span>[$<span style="color: #f0c674;">i</span>]=<span style="color: #8abeb7;">"NETWORK=$sn"</span>;

        }
        <span style="color: #b5bd68;">elsif</span>($<span style="color: #f0c674;">lines</span>[$<span style="color: #f0c674;">i</span>]=~<span style="color: #8abeb7;">/BROADCAST=.*$/</span>){
            <span style="color: #de935f;">my</span> @<span style="color: #f0c674; text-decoration: underline;">orig</span>=split(<span style="color: #8abeb7;">/=/</span>,$<span style="color: #f0c674;">lines</span>[$<span style="color: #f0c674;">i</span>]);
            chomp($<span style="color: #f0c674;">orig</span>[1]);
            <span style="color: #de935f;">my</span> @<span style="color: #f0c674; text-decoration: underline;">o</span>=split(<span style="color: #8abeb7;">/./</span>,$<span style="color: #f0c674;">orig</span>[1]);
            $<span style="color: #f0c674;">s</span>=<span style="color: #8abeb7;">"$p[0].$p[1].$p[2].$o[3]"</span>;
            $<span style="color: #f0c674;">lines</span>[$<span style="color: #f0c674;">i</span>]=<span style="color: #8abeb7;">"BROADCAST=$sn"</span>;
        }
        <span style="color: #b5bd68;">elsif</span>($<span style="color: #f0c674;">lines</span>[$<span style="color: #f0c674;">i</span>]=~<span style="color: #8abeb7;">/GATEWAY=.*$/</span>){
            <span style="color: #de935f;">my</span> @<span style="color: #f0c674; text-decoration: underline;">orig</span>=split(<span style="color: #8abeb7;">/=/</span>,$<span style="color: #f0c674;">lines</span>[$<span style="color: #f0c674;">i</span>]);
            chomp($<span style="color: #f0c674;">orig</span>[1]);
            <span style="color: #de935f;">my</span> @<span style="color: #f0c674; text-decoration: underline;">o</span>=split(<span style="color: #8abeb7;">/./</span>,$<span style="color: #f0c674;">orig</span>[1]);
            $<span style="color: #f0c674;">s</span>=<span style="color: #8abeb7;">"$p[0].$p[1].$p[2].$o[3]"</span>;
            $<span style="color: #f0c674;">lines</span>[$<span style="color: #f0c674;">i</span>]=<span style="color: #8abeb7;">"GATEWAY=$sn"</span>;
        }
    }
    close(F);
    open (F,<span style="color: #8abeb7;">"&gt;$ifcfg"</span>);
    print F (@<span style="color: #f0c674; text-decoration: underline;">lines</span>);
    close(F);
    <span style="color: #b5bd68;">return</span> 0;
}



<span style="color: #b5bd68;">sub</span> <span style="color: #81a2be;">get_netprop</span>

{
    <span style="color: #de935f;">my</span> $<span style="color: #f0c674;">addr</span>=shift;
    <span style="color: #de935f;">my</span> @<span style="color: #f0c674; text-decoration: underline;">p</span>=split(<span style="color: #8abeb7;">/./</span>,$<span style="color: #f0c674;">addr</span>);
    <span style="color: #de935f;">my</span> $<span style="color: #f0c674;">network</span>=<span style="color: #8abeb7;">"$p[0].$p[1].$p[2].0"</span>;
    <span style="color: #de935f;">my</span> $<span style="color: #f0c674;">broadcast</span>=<span style="color: #8abeb7;">"$p[0].$p[1].$p[2].255"</span>;
    <span style="color: #b5bd68;">return</span> ($<span style="color: #f0c674;">network</span>,$<span style="color: #f0c674;">broadcast</span>,);
}



<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">Return: </span>

<span style="color: #b5bd68;">sub</span> <span style="color: #81a2be;">change_ip</span>

{
    <span style="color: #de935f;">my</span> $<span style="color: #f0c674;">k</span>=shift;
    <span style="color: #de935f;">my</span> $<span style="color: #f0c674;">addr</span>=shift;
    <span style="color: #de935f;">my</span> $<span style="color: #f0c674;">dir</span>=shift;
    <span style="color: #de935f;">my</span> $<span style="color: #f0c674;">netcard</span>=shift;
    <span style="color: #de935f;">my</span> $<span style="color: #f0c674;">tr</span>=shift;

    <span style="color: #de935f;">my</span> $<span style="color: #f0c674;">ret</span>=0;
    <span style="color: #de935f;">my</span> $<span style="color: #f0c674;">s</span>=<span style="color: #8abeb7;">`hostname`</span>;chomp($<span style="color: #f0c674;">s</span>);
    <span style="color: #de935f;">my</span> ($<span style="color: #f0c674;">network</span>,$<span style="color: #f0c674;">broadcast</span>)=&amp;<span style="color: #81a2be;">get_netprop</span>($<span style="color: #f0c674;">addr</span>);
    <span style="color: #b5bd68;">if</span>( $<span style="color: #f0c674;">s</span> eq $<span style="color: #f0c674;">k</span>){ <span style="color: #969896; font-style: italic;">#local</span>
        <span style="color: #969896; font-style: italic;">#print "s=$s;k=$kn"; #debug</span>
        $<span style="color: #f0c674;">ret</span>=&amp;<span style="color: #81a2be;">set_one_card</span>($<span style="color: #f0c674;">addr</span>,<span style="color: #8abeb7;">"$dir/ifcfg-$netcard"</span>);
        <span style="color: #b5bd68;">if</span>($<span style="color: #f0c674;">ret</span>){ &amp;<span style="color: #81a2be;">a</span>(0); <span style="color: #b5bd68;">return</span> $<span style="color: #f0c674;">ret</span>;}
        <span style="color: #b5bd68;">return</span> $<span style="color: #f0c674;">ret</span>;
    }
    <span style="color: #969896; font-style: italic;">#remote</span>
    <span style="color: #de935f;">my</span> $<span style="color: #f0c674;">u</span>=&amp;<span style="color: #81a2be;">unique_id</span>();
    <span style="color: #969896; font-style: italic;">#print "k=$kn"; #debug</span>
    $<span style="color: #f0c674;">ret</span>=system(<span style="color: #8abeb7;">"scp root@$k:$dir/ifcfg-$netcard /tmp/$u.ifcfg-$netcard </span>
<span style="color: #8abeb7;">              &gt;/dev/null 2&gt;&amp;1"</span>);
    <span style="color: #b5bd68;">if</span>($<span style="color: #f0c674;">ret</span>){ <span style="color: #969896; font-style: italic;"># maybe jnior</span>
        $$<span style="color: #f0c674;">tr</span>=1;
        <span style="color: #de935f;">my</span> ($<span style="color: #f0c674;">name</span>,$<span style="color: #f0c674;">dir</span>,$<span style="color: #f0c674;">suffix</span>)=fileparse($<span style="color: #f0c674;">0</span>);
        &amp;<span style="color: #81a2be;">a</span>(-e $<span style="color: #f0c674;">dir</span>.<span style="color: #8abeb7;">"chg_jnior_ip.exp"</span>);
        $<span style="color: #f0c674;">ret</span>=system($<span style="color: #f0c674;">dir</span>.<span style="color: #8abeb7;">"chg_jnior_ip.exp $k $addr &gt;/dev/null 2&gt;&amp;1"</span>);
        <span style="color: #b5bd68;">return</span> $<span style="color: #f0c674;">ret</span>;
    }
    <span style="color: #b5bd68;">else</span>{
        $$<span style="color: #f0c674;">tr</span>=0;
    }
    $<span style="color: #f0c674;">ret</span>=&amp;<span style="color: #81a2be;">set_one_card</span>($<span style="color: #f0c674;">addr</span>,<span style="color: #8abeb7;">"/tmp/$u.ifcfg-$netcard"</span>);

    <span style="color: #b5bd68;">if</span>($<span style="color: #f0c674;">ret</span>){ &amp;<span style="color: #81a2be;">a</span>(0); <span style="color: #b5bd68;">return</span> $<span style="color: #f0c674;">ret</span>;}
    $<span style="color: #f0c674;">ret</span>=system(<span style="color: #8abeb7;">"scp /tmp/$u.ifcfg-$netcard root@$k:$dir/ifcfg-$netcard </span>
<span style="color: #8abeb7;">              &gt;/dev/null 2&gt;&amp;1"</span>);
    system(<span style="color: #8abeb7;">"rm -f /tmp/$u.ifcfg-$netcard &gt;/dev/null 2&gt;&amp;1"</span>);
    <span style="color: #b5bd68;">if</span>($<span style="color: #f0c674;">ret</span>){ &amp;<span style="color: #81a2be;">a</span>(0); <span style="color: #b5bd68;">return</span> $<span style="color: #f0c674;">ret</span>;}
    <span style="color: #b5bd68;">return</span> $<span style="color: #f0c674;">ret</span>;
}



<span style="color: #b5bd68;">sub</span> <span style="color: #81a2be;">unique_id</span>()

{
    <span style="color: #de935f;">my</span> $<span style="color: #f0c674;">sessionId</span>  =<span style="color: #8abeb7;">""</span>;
    <span style="color: #b5bd68;">for</span>($<span style="color: #f0c674;">i</span>=0 ; $<span style="color: #f0c674;">i</span>&lt; 32 ;) 
    {
        $<span style="color: #f0c674;">j</span> = chr(int(rand(127)));
        <span style="color: #b5bd68;">if</span>($<span style="color: #f0c674;">j</span> =~ <span style="color: #8abeb7;">/[a-zA-Z0-9]/</span>)
        {
            $<span style="color: #f0c674;">sessionId</span> .=$<span style="color: #f0c674;">j</span>;
            $<span style="color: #f0c674;">i</span>++;
        }
    }
    <span style="color: #b5bd68;">return</span> $<span style="color: #f0c674;">sessionId</span>;
g}



<span style="color: #b5bd68;">sub</span> <span style="color: #81a2be;">is_valid_ip</span>

{
    <span style="color: #de935f;">my</span> $<span style="color: #f0c674;">ip</span>=shift;
    <span style="color: #b5bd68;">if</span>( $<span style="color: #f0c674;">ip</span> !~ <span style="color: #8abeb7;">/^d{1,3}.d{1,3}.d{1,3}.d{1,3}$/</span> ){
        <span style="color: #b5bd68;">return</span> 0;
    }
    <span style="color: #de935f;">my</span> @<span style="color: #f0c674; text-decoration: underline;">a</span>=split(<span style="color: #8abeb7;">'.'</span>,$<span style="color: #f0c674;">ip</span>);
    <span style="color: #969896; font-style: italic;">#print "$a[0] $a[1] $a[2] $a[3]n";#debug</span>
    <span style="color: #b5bd68;">if</span>($<span style="color: #f0c674;">a</span>[0]&gt;255){ <span style="color: #b5bd68;">return</span> 0;}
    <span style="color: #b5bd68;">if</span>($<span style="color: #f0c674;">a</span>[1]&gt;255){ <span style="color: #b5bd68;">return</span> 0;}
    <span style="color: #b5bd68;">if</span>($<span style="color: #f0c674;">a</span>[2]&gt;255){ <span style="color: #b5bd68;">return</span> 0;}
    <span style="color: #b5bd68;">if</span>($<span style="color: #f0c674;">a</span>[3]&gt;255){ <span style="color: #b5bd68;">return</span> 0;}
    <span style="color: #b5bd68;">return</span> 1;
}



<span style="color: #b5bd68;">sub</span> <span style="color: #81a2be;">who_are_pingable</span>

{
    <span style="color: #de935f;">my</span> $<span style="color: #f0c674;">h</span>=shift;
    <span style="color: #de935f;">my</span> %<span style="color: #f0c674; text-decoration: underline;">p</span>=();
    <span style="color: #b5bd68;">for</span> <span style="color: #de935f;">my</span> $<span style="color: #f0c674;">k</span> (sort keys %$<span style="color: #f0c674;">h</span>){
        <span style="color: #de935f;">my</span> @<span style="color: #f0c674; text-decoration: underline;">a</span>=split(<span style="color: #8abeb7;">/[st]+/</span>,$<span style="color: #f0c674;">k</span>);
        <span style="color: #de935f;">my</span> $<span style="color: #f0c674;">s</span>=<span style="color: #8abeb7;">`hostname`</span>;chomp($<span style="color: #f0c674;">s</span>);
        <span style="color: #b5bd68;">if</span>($<span style="color: #f0c674;">a</span>[0] eq $<span style="color: #f0c674;">s</span>){
            print <span style="color: #8abeb7;">"test $a[0] ... connectablen"</span>;
            $<span style="color: #f0c674;">p</span>{$<span style="color: #f0c674;">a</span>[0]}=$<span style="color: #f0c674;">USE_SSH</span>;
            <span style="color: #b5bd68;">next</span>;
        }
        <span style="color: #de935f;">my</span> $<span style="color: #f0c674;">pingcmd</span>=&amp;<span style="color: #81a2be;">get_pingcmd</span>();
        print <span style="color: #8abeb7;">"test $a[0] ... "</span>;
        <span style="color: #b5bd68;">if</span>(system(<span style="color: #8abeb7;">"$pingcmd $a[0] &gt;/dev/null 2&gt;&amp;1"</span>)!=0){
            print <span style="color: #8abeb7;">"NOT connectablen"</span>;
            <span style="color: #b5bd68;">next</span>;
        }
        <span style="color: #b5bd68;">else</span>{
            print <span style="color: #8abeb7;">"connectablen"</span>;
        }

        $<span style="color: #f0c674;">p</span>{$<span style="color: #f0c674;">a</span>[0]}=1;
    }
    <span style="color: #b5bd68;">return</span> %<span style="color: #f0c674; text-decoration: underline;">p</span>;
}



<span style="color: #b5bd68;">sub</span> <span style="color: #81a2be;">get_hosts_from_arp</span>

{
    <span style="color: #de935f;">my</span> @<span style="color: #f0c674; text-decoration: underline;">a</span>=grep(!<span style="color: #8abeb7;">/incomplete/</span>,split(<span style="color: #8abeb7;">/[rn]/</span>,<span style="color: #8abeb7;">`arp -a`</span>));
    <span style="color: #de935f;">my</span> %<span style="color: #f0c674; text-decoration: underline;">h</span>=();
    <span style="color: #b5bd68;">foreach</span> <span style="color: #de935f;">my</span> $<span style="color: #f0c674;">l</span> (@<span style="color: #f0c674; text-decoration: underline;">a</span>){
        <span style="color: #de935f;">my</span> @<span style="color: #f0c674; text-decoration: underline;">s</span>=split(<span style="color: #8abeb7;">/[st()]+/</span>,$<span style="color: #f0c674;">l</span>);
        $<span style="color: #f0c674;">h</span>{$<span style="color: #f0c674;">s</span>[0]}=$<span style="color: #f0c674;">s</span>[1];
    }
    <span style="color: #b5bd68;">return</span> %<span style="color: #f0c674; text-decoration: underline;">h</span>;
}



<span style="color: #b5bd68;">sub</span> <span style="color: #81a2be;">usage</span>

{
    <span style="color: #de935f;">my</span> ($<span style="color: #f0c674;">name</span>,$<span style="color: #f0c674;">dir</span>,$<span style="color: #f0c674;">suffix</span>)=fileparse($<span style="color: #f0c674;">0</span>);
    print STDERR &lt;&lt; <span style="color: #8abeb7;">"EOF"</span>;
    USAGE
        $<span style="color: #f0c674;">name</span> [OPTION] <span style="color: #8abeb7;">"ip hostname [netcard default/none]"</span>

        DESCRIPTION
        Change IP of remote hosts.
        -h    : this (help) message
        -d    : self test and print debugging messages to stderr
        -a    : <span style="color: #b5bd68;">use</span> <span style="color: #8abeb7;">`arp -a`</span> to verify remote hosts reachable
        <span style="color: #8abeb7;">`$name "ip host"`</span> (without either -a or -p)  
        equals <span style="color: #8abeb7;">`$name -a "ip host"`</span>
        -p    : <span style="color: #b5bd68;">use</span> <span style="color: #8abeb7;">`ping`</span> to verify remote hosts reachable

        <span style="color: #de935f;">netcard</span>      : the name of the netcard
        default/none : default - the changed ip will be recorded in /etc/hosts
        none    - contrary to <span style="color: #8abeb7;">"default"</span>

        EXAMPLE
        echo 192.168.30.151 manager|$<span style="color: #f0c674;">name</span>
        echo 192.168.30.151 manager eth1 none|$<span style="color: #f0c674;">name</span> 
        echo 192.168.30.151 manager eth1 none|$<span style="color: #f0c674;">name</span>  -p
        cat /etc/hosts|$<span style="color: #f0c674;">name</span> -a
        $<span style="color: #f0c674;">name</span> <span style="color: #8abeb7;">"192.168.30.151 manager"</span>
        $<span style="color: #f0c674;">name</span> <span style="color: #8abeb7;">"192.168.30.151 manager eth0 default"</span>

        AUTHOR
        Chen Bin 

        EOF
}

<span style="color: #b5bd68;">sub</span> <span style="color: #81a2be;">init</span>()

{
    <span style="color: #b5bd68;">use</span> <span style="color: #de935f;">Getopt</span>::Std;
    <span style="color: #de935f;">my</span> $<span style="color: #f0c674;">opt_string</span> = <span style="color: #8abeb7;">'hdap'</span>;
    getopts( <span style="color: #8abeb7;">"$opt_string"</span>, %<span style="color: #f0c674; text-decoration: underline;">opt</span> ) or usage();
}

</pre>

<p></p>
</div>
            </div>
        </div>
    
        <nav class="postindexpager">
        <ul class="pager">
            <li class="previous">
                <a href="index-2.html" rel="prev">Newer posts</a>
            </li>
        </ul>
        </nav>

    
        
       <script>var disqus_shortname="chenbin0";(function(){var a=document.createElement("script");a.async=true;a.src="//"+disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)}());</script>


    


             
        <footer id="footer" role="contentinfo">
            <p>Contents © 2014         <a href="mailto:chenbin.sh@gmail.com">Chen Bin</a> - Powered by         <a href="http://getnikola.com" rel="nofollow">Nikola</a>         </p>
            
        </footer>

        </div>
    </section>
    
<script type="text/javascript">
function getParameterByName(name) {
    name = name.replace(/[\[]/, "\[").replace(/[\]]/, "\]");
    var regex = new RegExp("[\?&]" + name + "=([^&#]*)"),
        results = regex.exec(location.search);
    return results == null ? "" : decodeURIComponent(results[1].replace(/\+/g, " "));
}

var urlMap={
695:'/posts/australia-food-brands.html',
694:'/posts/hua-shen-jiang-len-mian-zuo-fa.html',
512:'/posts/moving-focus-and-buffer-between-emacs-window.html',
357:'/posts/how-to-configure-yasnippet-0-7-0-and-use-it-with-auto-complete-mode.html',
755:'/posts/niu-rou-mian-zuo-fa.html',
750:'/posts/how-to-manage-emacs-packages.html',
664:'/posts/elisp-code-copy-full-path-of-current-file-into-os-clipboard-and-yank-ring.html',
758:'/posts/nan-gua-zhou-zuo-fa.html',
214:'/posts/wei-shen-men-chen-xu-yaun-chuang-ye-de-xiao-shi-gong-zi-shi-1000yuan-xiao-shi.html',
1088:'/posts/use-firefox-in-emacs-way-3.html',
198:'/posts/tui-jian-hao-shu-enterprise-rails.html',
825:'/posts/matthew-keeler-video-tutorial-on-org-mode-in-emacs.html',
823:'/posts/one-liner-to-load-m3u-into-mpd.html',
636:'/posts/set-up-nfs-server-on-archlinux.html',
191:'/posts/pin-gu-le-emacs-xia-zhi-chi-intellisense-de-ji-ge-fang-an.html',
291:'/posts/chu-xue-zhe-shi-yong-emacs-de-nan-dian.html',
847:'/posts/how-to-use-git-effectively.html',
619:'/posts/an-example-to-abuse-the-git-merge.html',
596:'/posts/i-became-a-true-emacs-geek-when-i-publicized-my-emacs-d-at-github-com.html',
507:'/posts/commentuncomment-line-is-easy-in-emacs.html',
748:'/posts/use-git-send-email-at-ubuntu.html',
502:'http://blog.binchen.rg/posts/fa-biao-yi-nian-chen-wei-emacs-gao-shou-man-yi-zhou-nian-de-gan-wu.html',
742:'/posts/one-liner-bash-to-createupdate-playlist-for-mpd.html',
739:'/posts/how-to-install-emacs-source-code-under-ubuntu.html',
139:'/posts/mysqldump-for-sqlite3.html',
222:'/posts/clean-up-emacs-mode-line-for-tiny-netbook.html',
345:'/posts/zai-wo-de-osx-shang-wei-heroku-kai-fa-rails-chen-xu.html',
884:'/posts/memo-on-upgrading-archlinux.html',
341:'/posts/zhen-dui-ruby-on-rails-kai-fa-de-emacs-cha-jian.html',
835:'/posts/copy-file-name-or-full-path-of-file-in-emacs-dired-buffer-into-system-clipboard.html',
48:'/posts/jian-chi-shi-yong-gnu-screen.html',
832:'/posts/fan-qie-ji-dan-tang-zuo-fa.html',
181:'/posts/my-herbstluftwm-configuration.html',
1124:'/stories/test.html',
589:'/posts/the-reliable-way-to-access-system-clipboard-from-emacs.html',
1105:'/posts/popup-function-your-cursor-is-in.html',
424:'/posts/how-to-use-ftp-in-emacs.html',
580:'/posts/how-to-write-javascripthtml-code-quickly.html',
1128:'/stories/test-my-wordpress.html',
537:'/posts/my-work-flow-to-debug-emacs-plugin.html',
896:'/posts/why-some-systemd-service-on-archlinux-does-not-work.html',
111:'/posts/perforce-tip-how-to-apply-my-default-change-to-the-release-branch.html',
890:'/posts/hao-you-shen-cai-zuo-fa.html',
123:'/posts/my-emacs-configuration.html',
1065:'/posts/debug-emacs-lisp-code-the-hard-way.html',
803:'/posts/xiang-gu-shen-gun-niu-rou-wo-dan-zhou-zuo-fa.html',
5:'/stories/about.html',
692:'/posts/find-which-package-contains-a-file.html',
430:'/posts/my-personal-emacs-customization-custom-el.html',
436:'/posts/how-to-manage-and-use-tags-file-of-third-party-libraries-in-emacs.html',
1103:'/posts/paste-string-from-clipboard-into-minibuffer-in-emacs.html',
735:'/posts/how-to-avoid-ris-when-using-emacs-by-re-assigning-hotkeys-2.html',
730:'/posts/how-to-get-email-from-exchange-server-without-outlook.html',
1016:'/posts/one-liner-to-download-and-extract-emacs-lisp-source-code.html',
245:'/posts/always-turn-on-fpermissive-for-gcc-4-6.html',
924:'/posts/notes-on-google-chromes-dev-tool.html',
947:'/posts/how-to-execute-user-program-for-system-v-init-script.html',
248:'/posts/hao-yong-de-ti-gao-shen-chan-li-de-firefox-cha-jian-leechblock.html',
403:'/posts/notes-on-using-gnus.html',
329:'/posts/guan-yu-yi-nian-chen-wei-emacs-gao-shou-yi-wen-de-da-yi.html',
485:'/posts/import-gmail-contacts-into-bbdb.html',
525:'/posts/start-wxwidgets-programming-on-linux.html',
524:'/posts/notes-to-install-gentoo-linux.html',
488:'/posts/simplest-workflow-on-email-git-commit-in-emacs-no-magit-needed.html',
521:'/posts/find-files-provided-by-the-installed-package.html',
484:'/posts/use-emacs-keyboard-layout-under-archlinux-console-linuxemacsconsoleen.html',
22:'/posts/yong-org2blog-emacs-fa-biao-bo-ke.html',
950:'/posts/effective-spell-check-in-emacs.html',
1029:'/posts/how-to-adapt-my-work-style-to-the-employers-standard-in-emacs.html',
28:'/posts/yi-bu-wu-liao-de-zhen-zhi-xuan-chuan-pian.html',
1118:'/posts/how-to-embed-button-in-wxdataviewlistctrl.html',
773:'/posts/ku-gua-hu-luo-bo-chao-ji-dan-zuo-fa.html',
640:'/posts/install-google-talk-plugin-64bit-on-gentoo-linux.html',
583:'/posts/how-to-refactorrename-a-variable-name-in-a-function-efficiently.html',
644:'/posts/shi-mian-yu-du-tang-shao-fa.html',
818:'/posts/toggle-full-view-of-window-in-emacs.html',
816:'/posts/the-minimum-packages-to-install-for-front-end-development-on-linux.html',
812:'/posts/use-gnus-to-apply-patch-sent-by-git-send-email.html',
791:'/posts/install-gitso-v0-6-on-gentoo-linux.html',
256:'/posts/start-wxwdigets-programming-on-windows.html',
398:'/posts/the-latest-version-of-yasnippet-is-not-compatible-with-auto-complete-enemacsyasnippetauto-complete.html',
377:'/posts/my-git-alias-in-bashrc.html',
395:'/posts/why-facebook-app-for-android-pad-sucks.html',
390:'/posts/python-code-to-migrate-the-mysql-database-enmysqldatabasepython.html',
314:'/posts/it-chuang-ye-de-bei-can-gu-shi.html',
492:'/posts/open-url-in-emacs-with-external-browser.html',
375:'/posts/emacs-zhong-de-wan-mei-duo-chuang-kou-cao-zuo.html',
553:'/posts/how-to-use-yasnippets-to-produce-email-templates-in-emacs.html',
319:'/posts/emacs-zen-yang-gai-bian-le-wo-de-ren-shen.html',
1002:'/posts/my-answer-to-what-are-some-must-have-emacs-additions-on-quora-com.html',
30:'/posts/dropbox-hen-you-chuang-yi.html',
31:'/posts/perl-code-to-change-ip.html',
38:'/posts/geek-chang-yong-ruan-jian-qin-dan.html',
651:'/posts/how-to-use-terminal-in-emacs-effectively.html',
650:'/posts/my-git-set-up.html',
653:'/posts/how-to-do-the-screen-cast-in-linux.html',
655:'/posts/poor-mans-github.html',
654:'/posts/fan-qie-chao-dan-de-zuo-fa.html',
710:'/posts/the-power-of-git-command-line-interface-4.html',
1006:'/posts/code-rush.html',
866:'/posts/how-to-take-screen-shot-for-business-people-efficiently-in-emacs.html',
864:'/posts/how-to-use-flyspell-in-web-mode.html',
1041:'/posts/how-to-use-org2blog-effectively-as-a-programmer.html',
260:'/posts/the-most-important-features-of-midnight-commander-mc.html',
264:'/posts/copypaste-in-emacs.html',
669:'/posts/hei-mu-er-chao-dan-de-zuo-fa.html',
266:'/posts/hotkeys-for-moving-windows-in-emacs.html',
268:'/posts/yi-nian-cheng-wei-emacs-gao-shou-xiang-shen-yi-yang-shi-yong-bian-ji-qi.html',
666:'/posts/666.html',
173:'/posts/emacs-gdbgud-hotkeys.html',
175:'/posts/gitorious-is-useless.html',
303:'/posts/the-most-elegant-wordpress-theme-for-geeks.html',
901:'/posts/why-emacs-is-better-editor.html',
307:'/posts/fasd-make-me-10x-more-produtive-under-shell.html',
789:'/posts/han-guo-da-jiang-tang-zuo-fa.html',
1047:'/posts/hack-wordpress-php-and-make-cdnjs-com-host-js.html',
543:'/posts/convert-multiple-line-into-one-big-string-in-emacs.html',
542:'/posts/how-to-manage-my-software-configuration-at-github.html',
545:'/posts/make-emacs-support-auto-completion-for-cmake.html',
782:'/posts/how-to-use-expand-region-efficiently.html',
1057:'/posts/how-to-use-ctags-in-emacs-effectively-3.html',
575:'/posts/the-most-efficient-way-to-git-add-file-in-dired-mode-emacsendiredgit.html',
979:'/posts/notes-on-set-up-nfs-on-archlinux.html',
797:'/posts/use-org2blog-to-share-blog-efficiently.html',
467:'/posts/toggle-http-proxy-in-emacs-w3m.html',
464:'/posts/emacs-lisp-bin-bu-nan-xue.html',
462:'/posts/use-popfile-at-linux.html',
877:'/posts/notes-on-upgrading-gentoo-linux.html',
166:'/posts/zhan-li-bian-chen-de-fu-zuo-yong.html',
679:'/posts/hu-luo-bo-zhou-zuo-fa.html',
93:'/posts/one-line-linux-cli-to-remove-span-tag.html',
373:'/posts/convert-tex-to-pdf.html',
371:'/posts/install-perl-module-through-source-package-on-cygwin-by-using-cpanm-2.html',
574:'/posts/how-to-split-album-into-different-flac-and-tag-them-under-gentoo-linux.html',
332:'/posts/shi-yong-bootstrap-wen-zhang-de-xiao-jie.html',
570:'/posts/the-minimum-emacs-for-debug-purpose.html',
279:'/posts/how-to-debug-gtk-warning.html',
277:'/posts/notes-for-js3-mode-in-emacs.html',
668:'/posts/huang-jin-suan-tou-ji-tang-zuo-fa.html',
275:'/posts/tips-for-debug-c-code-in-emacs.html',
18:'/posts/hello-word.html',
170:'/posts/sample-python-code-to-resize-image.html',
762:'/posts/my-salad.html',
840:'/posts/san-wen-yu-dun-dou-fu-zuo-fa.html',
478:'/posts/search-the-word-under-cursor-in-stackoverflow-com-and-google-code-search.html',
775:'/posts/navigateselect-html-tags-in-emacs.html',
1021:'/posts/my-answer-to-how-do-you-use-emacs-without-a-directory-tree-on-the-side-of-the-editor-on-quora-com.html',
965:'/posts/git-merge-in-command-line.html',
963:'/posts/switch-input-method-in-evil-mode.html',
381:'/posts/emacs-zhong-de-zi-dong-wan-chen-wan-quan-zhi-nan.html',
728:'/posts/qin-jiao-chao-ji-rou-zuo-fa.html',
686:'/posts/mo-gu-ji-rou-yi-da-li-mian-zuo-fa.html',
110:'/posts/multiple-ssh-private-keys.html',
366:'/posts/install-perl-module-through-source-package-on-cygwin-by-using-cpanm.html',
363:'/posts/note-on-emacs-chat-between-john-wiegley-and-sacha-chua.html',
118:'/posts/you-yong-de-emacs-kuai-jie-jian.html',
368:'/posts/how-to-convert-org-to-pdf.html',
689:'/posts/nai-you-bao-yu-gu.html',
566:'/posts/how-to-use-keyboard-to-navigate-feedly-com.html',
987:'/posts/how-to-do-htmljavascript-repl-read-eval-print-loop-with-no-server-set-up-2.html',
201:'/posts/ncdu-best-disk-usage-analyzer-under-linux.html',
1093:'/posts/upload-emacs-package-to-marmalade.html',
62:'/posts/yong-mintty-zuo-wei-cyginw-de-console.html',
87:'/posts/linux-zhuo-mian-shi-yong-zhi-dao.html',
918:'/posts/my-grub2-configuration.html',
281:'/posts/zhen-que-de-tou-bu-bao-jian.html',
765:'/posts/dou-ban-jiang-gai-jiao-fan-zuo-fa.html',
856:'/posts/suan-miao-chao-niu-rou-zuo-fa.html',
1012:'/posts/add-current-directory-into-load-path-in-emacs.html',
769:'/posts/take-bavarian-tasting-platter-at-bavarian-bier-cafe-parramatta.html',
600:'/posts/open-readme-under-git-root-directory-in-emacs.html',
601:'/posts/use-vimdiff-to-resolve-git-merge-conflicts-effectively.html'
};

var postId=parseInt(getParameterByName('p'),10);
if(postId>0 && urlMap[postId]) {
    window.location=urlMap[postId];
}
</script>
<script type="text/javascript" src="https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js?lang=lisp&amp;lang=clj&amp;skin=sunburst"></script>
<script type="text/javascript">
var _gaq = _gaq || [];

_gaq.push(['_setAccount', 'UA-29850823-2']);
_gaq.push(['_addDevId', 'i9k95']); // Google Analyticator App ID with Google
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
</script>

    
    
            <script src="assets/js/all-nocdn.js" type="text/javascript"></script>
    
<!-- Social buttons -->
<div id="addthisbox" class="addthis_toolbox addthis_peekaboo_style addthis_default_style addthis_label_style addthis_32x32_style">
<a class="addthis_button_more">Share</a>
<ul>
<li>
<a class="addthis_button_facebook"></a>
</li>
<li>
<a class="addthis_button_google_plusone_share"></a>
</li>
<li>
<a class="addthis_button_linkedin"></a>
</li>
<li>
<a class="addthis_button_twitter"></a>
</li>
</ul>
</div>
<script src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-4f7088a56bb93798"></script>
<!-- End of social buttons -->


    
        <script type="text/javascript">
            $(function(){
                $('.timeago').timeago();
            });
        </script>
    
</body>
</html>
